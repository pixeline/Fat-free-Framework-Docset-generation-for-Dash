<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.12">
  <compounddef id="readme_8md" kind="file" language="Markdown">
    <compoundname>readme.md</compoundname>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline><highlight class="normal">[![Fat-Free<sp/>Framework](ui/images/logo.png)](http://fatfree.sf.net/)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">**A<sp/>powerful<sp/>yet<sp/>easy-to-use<sp/>PHP<sp/>micro-framework<sp/>designed<sp/>to<sp/>help<sp/>you<sp/>build<sp/>dynamic<sp/>and<sp/>robust<sp/>Web<sp/>applications<sp/>-<sp/>fast!**</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">[![Flattr<sp/>this<sp/>project](https://api.flattr.com/button/flattr-badge-large.png)](https://flattr.com/submit/auto?user_id=phpfatfree&amp;url=https://github.com/bcosca/fatfree)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Condensed<sp/>in<sp/>a<sp/>single<sp/>~65KB<sp/>file,<sp/>F3<sp/>(as<sp/>we<sp/>fondly<sp/>call<sp/>it)<sp/>gives<sp/>you<sp/>solid<sp/>foundation,<sp/>a<sp/>mature<sp/>code<sp/>base,<sp/>and<sp/>a<sp/>no-nonsense<sp/>approach<sp/>to<sp/>writing<sp/>Web<sp/>applications.<sp/>Under<sp/>the<sp/>hood<sp/>is<sp/>an<sp/>easy-to-use<sp/>Web<sp/>development<sp/>tool<sp/>kit,<sp/>a<sp/>high-performance<sp/>URL<sp/>routing<sp/>and<sp/>cache<sp/>engine,<sp/>built-in<sp/>code<sp/>highlighting,<sp/>and<sp/>support<sp/>for<sp/>multilingual<sp/>applications.<sp/>It&apos;s<sp/>lightweight,<sp/>easy-to-use,<sp/>and<sp/>fast.<sp/>Most<sp/>of<sp/>all,<sp/>it<sp/>doesn&apos;t<sp/>get<sp/>in<sp/>your<sp/>way.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Whether<sp/>you&apos;re<sp/>a<sp/>novice<sp/>or<sp/>an<sp/>expert<sp/>PHP<sp/>programmer,<sp/>F3<sp/>will<sp/>get<sp/>you<sp/>up<sp/>and<sp/>running<sp/>in<sp/>no<sp/>time.<sp/>No<sp/>unnecessary<sp/>and<sp/>painstaking<sp/>installation<sp/>procedures.<sp/>No<sp/>complex<sp/>configuration<sp/>required.<sp/>No<sp/>convoluted<sp/>directory<sp/>structures.<sp/>There&apos;s<sp/>no<sp/>better<sp/>time<sp/>to<sp/>start<sp/>developing<sp/>Web<sp/>applications<sp/>the<sp/>easy<sp/>way<sp/>than<sp/>right<sp/>now!</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3<sp/>supports<sp/>both<sp/>SQL<sp/>and<sp/>NoSQL<sp/>databases<sp/>off-the-shelf:<sp/>MySQL,<sp/>SQLite,<sp/>MSSQL/Sybase,<sp/>PostgreSQL,<sp/>DB2,<sp/>and<sp/>MongoDB.<sp/>It<sp/>also<sp/>comes<sp/>with<sp/>powerful<sp/>object-relational<sp/>mappers<sp/>for<sp/>data<sp/>abstraction<sp/>and<sp/>modeling<sp/>that<sp/>are<sp/>just<sp/>as<sp/>lightweight<sp/>as<sp/>the<sp/>framework.<sp/>No<sp/>configuration<sp/>needed.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">That&apos;s<sp/>not<sp/>all.<sp/>F3<sp/>is<sp/>packaged<sp/>with<sp/>other<sp/>optional<sp/>plug-ins<sp/>that<sp/>extend<sp/>its<sp/>capabilities:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Fast<sp/>and<sp/>clean<sp/>template<sp/>engine,</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Unit<sp/>testing<sp/>toolkit,</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Database-managed<sp/>sessions<sp/>with<sp/>automatic<sp/>CSRF<sp/>protection,</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Markdown-to-HTML<sp/>converter,</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Atom/RSS<sp/>feed<sp/>reader,</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Image<sp/>processor,</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Geodata<sp/>handler,</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Google<sp/>static<sp/>maps,</highlight></codeline>
<codeline><highlight class="normal">*<sp/>On-the-fly<sp/>Javascript/CSS<sp/>compressor,</highlight></codeline>
<codeline><highlight class="normal">*<sp/>OpenID<sp/>(consumer),</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Custom<sp/>logger,</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Basket/Shopping<sp/>cart,</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Pingback<sp/>server/consumer,</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Unicode-aware<sp/>string<sp/>functions,</highlight></codeline>
<codeline><highlight class="normal">*<sp/>SMTP<sp/>over<sp/>SSL/TLS,</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Tools<sp/>for<sp/>communicating<sp/>with<sp/>other<sp/>servers,</highlight></codeline>
<codeline><highlight class="normal">*<sp/>And<sp/>more<sp/>in<sp/>a<sp/>tiny<sp/>supercharged<sp/>package!</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Unlike<sp/>other<sp/>frameworks,<sp/>F3<sp/>aims<sp/>to<sp/>be<sp/>usable<sp/>-<sp/>not<sp/>usual.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">[![Flattr<sp/>this<sp/>project](https://api.flattr.com/button/flattr-badge-large.png)](https://flattr.com/submit/auto?user_id=phpfatfree&amp;url=https://github.com/bcosca/fatfree)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>philosophy<sp/>behind<sp/>the<sp/>framework<sp/>and<sp/>its<sp/>approach<sp/>to<sp/>software<sp/>architecture<sp/>is<sp/>towards<sp/>minimalism<sp/>in<sp/>structural<sp/>components,<sp/>avoiding<sp/>application<sp/>complexity<sp/>and<sp/>striking<sp/>a<sp/>balance<sp/>between<sp/>code<sp/>elegance,<sp/>application<sp/>performance<sp/>and<sp/>programmer<sp/>productivity.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">[![Paypal](ui/images/paypal.png)](https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=MJSQL8N5LPDAY)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">![Bitcoin](ui/images/bitcoin.png)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>Table<sp/>of<sp/>Contents</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>[Getting<sp/>Started](#getting-started)</highlight></codeline>
<codeline><highlight class="normal">*<sp/>[Routing<sp/>Engine](#routing-engine)</highlight></codeline>
<codeline><highlight class="normal">*<sp/>[Framework<sp/>Variables](#framework-variables)</highlight></codeline>
<codeline><highlight class="normal">*<sp/>[Views<sp/>and<sp/>Templates](#views-and-templates)</highlight></codeline>
<codeline><highlight class="normal">*<sp/>[Databases](#databases)</highlight></codeline>
<codeline><highlight class="normal">*<sp/>[Plug-Ins](#plug-ins)</highlight></codeline>
<codeline><highlight class="normal">*<sp/>[Optimization](#optimization)</highlight></codeline>
<codeline><highlight class="normal">*<sp/>[Unit<sp/>Testing](#unit-testing)</highlight></codeline>
<codeline><highlight class="normal">*<sp/>[Quick<sp/>Reference](#quick-reference)</highlight></codeline>
<codeline><highlight class="normal">*<sp/>[Support<sp/>and<sp/>Licensing](#support-and-licensing)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">[![Twitter](ui/images/twitter.png)](https://twitter.com/phpfatfree)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Version<sp/>3.6<sp/>Is<sp/>Finally<sp/>Released!</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>latest<sp/>official<sp/>release<sp/>welcomes<sp/>the<sp/>summer<sp/>with<sp/>a<sp/>bang<sp/>and<sp/>marks<sp/>the<sp/>final<sp/>milestone<sp/>in<sp/>this<sp/>version<sp/>of<sp/>the<sp/>Fat-Free<sp/>Framework.<sp/>Packed<sp/>with<sp/>exciting<sp/>new<sp/>features<sp/>and<sp/>outstanding<sp/>documentation<sp/>that<sp/>consumed<sp/>significant<sp/>time<sp/>and<sp/>effort<sp/>to<sp/>develop<sp/>and<sp/>refine,<sp/>version<sp/>3.6<sp/>is<sp/>now<sp/>available<sp/>for<sp/>download.<sp/>This<sp/>edition<sp/>is<sp/>packed<sp/>with<sp/>a<sp/>bunch<sp/>of<sp/>new<sp/>usability<sp/>and<sp/>security<sp/>features.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3<sp/>has<sp/>a<sp/>stable<sp/>enterprise-class<sp/>architecture.<sp/>Unbeatable<sp/>performance,<sp/>user-friendly<sp/>features<sp/>and<sp/>a<sp/>lightweight<sp/>footprint.<sp/>What<sp/>more<sp/>can<sp/>you<sp/>ask<sp/>for?</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">It<sp/>is<sp/>highly<sp/>recommended<sp/>that<sp/>experienced<sp/>users<sp/>develop<sp/>new<sp/>applications<sp/>with<sp/>this<sp/>version<sp/>to<sp/>take<sp/>advantage<sp/>of<sp/>the<sp/>latest<sp/>code<sp/>base<sp/>and<sp/>its<sp/>significant<sp/>improvements.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>Introducing<sp/>FatFreeFramework.com</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">**Detailed<sp/>API<sp/>documentation<sp/>with<sp/>lots<sp/>of<sp/>code<sp/>examples<sp/>and<sp/>a<sp/>graphic<sp/>guide<sp/>can<sp/>now<sp/>be<sp/>found<sp/>at<sp/>[http://fatfreeframework.com/](http://fatfreeframework.com/).**</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Of<sp/>course<sp/>this<sp/>handy<sp/>online<sp/>reference<sp/>is<sp/>powered<sp/>by<sp/>F3!<sp/>It<sp/>showcases<sp/>the<sp/>framework&apos;s<sp/>capability<sp/>and<sp/>performance.<sp/>Check<sp/>it<sp/>out<sp/>now.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>Getting<sp/>Started</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">&gt;<sp/>*A<sp/>designer<sp/>knows<sp/>he<sp/>has<sp/>achieved<sp/>perfection<sp/>not<sp/>when<sp/>there<sp/>is<sp/>nothing<sp/>left<sp/>to<sp/>add,<sp/>but<sp/>when<sp/>there<sp/>is<sp/>nothing<sp/>left<sp/>to<sp/>take<sp/>away.<sp/>--<sp/>Antoine<sp/>de<sp/>Saint-Exup√©ry*</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Fat-Free<sp/>Framework<sp/>makes<sp/>it<sp/>easy<sp/>to<sp/>build<sp/>entire<sp/>Web<sp/>sites<sp/>in<sp/>a<sp/>jiffy.<sp/>With<sp/>the<sp/>same<sp/>power<sp/>and<sp/>brevity<sp/>as<sp/>modern<sp/>Javascript<sp/>toolkits<sp/>and<sp/>libraries,<sp/>F3<sp/>helps<sp/>you<sp/>write<sp/>better-looking<sp/>and<sp/>more<sp/>reliable<sp/>PHP<sp/>programs.<sp/>One<sp/>glance<sp/>at<sp/>your<sp/>PHP<sp/>source<sp/>code<sp/>and<sp/>anyone<sp/>will<sp/>find<sp/>it<sp/>easy<sp/>to<sp/>understand,<sp/>how<sp/>much<sp/>you<sp/>can<sp/>accomplish<sp/>in<sp/>so<sp/>few<sp/>lines<sp/>of<sp/>code,<sp/>and<sp/>how<sp/>powerful<sp/>the<sp/>results<sp/>are.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3<sp/>is<sp/>one<sp/>of<sp/>the<sp/>best<sp/>documented<sp/>frameworks<sp/>around.<sp/>Learning<sp/>it<sp/>costs<sp/>next<sp/>to<sp/>nothing.<sp/>No<sp/>strict<sp/>set<sp/>of<sp/>difficult-to-navigate<sp/>directory<sp/>structures<sp/>and<sp/>obtrusive<sp/>programming<sp/>steps.<sp/>No<sp/>truck<sp/>load<sp/>of<sp/>configuration<sp/>options<sp/>just<sp/>to<sp/>display<sp/>`&apos;Hello,<sp/>World&apos;`<sp/>in<sp/>your<sp/>browser.<sp/>Fat-Free<sp/>gives<sp/>you<sp/>a<sp/>lot<sp/>of<sp/>freedom<sp/>-<sp/>and<sp/>style<sp/>-<sp/>to<sp/>get<sp/>more<sp/>work<sp/>done<sp/>with<sp/>ease<sp/>and<sp/>in<sp/>less<sp/>time.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3&apos;s<sp/>declarative<sp/>approach<sp/>to<sp/>programming<sp/>makes<sp/>it<sp/>easy<sp/>for<sp/>novices<sp/>and<sp/>experts<sp/>alike<sp/>to<sp/>understand<sp/>PHP<sp/>code.<sp/>If<sp/>you&apos;re<sp/>familiar<sp/>with<sp/>the<sp/>programming<sp/>language<sp/>Ruby,<sp/>you&apos;ll<sp/>notice<sp/>the<sp/>resemblance<sp/>between<sp/>Fat-Free<sp/>and<sp/>Sinatra<sp/>micro-framework<sp/>because<sp/>they<sp/>both<sp/>employ<sp/>a<sp/>simple<sp/>Domain-Specific<sp/>Language<sp/>for<sp/>ReSTful<sp/>Web<sp/>services.<sp/>But<sp/>unlike<sp/>Sinatra<sp/>and<sp/>its<sp/>PHP<sp/>incarnations<sp/>(Fitzgerald,<sp/>Limonade,<sp/>Glue<sp/>-<sp/>to<sp/>name<sp/>a<sp/>few),<sp/>Fat-Free<sp/>goes<sp/>beyond<sp/>just<sp/>handling<sp/>routes<sp/>and<sp/>requests.<sp/>Views<sp/>can<sp/>be<sp/>in<sp/>any<sp/>form,<sp/>such<sp/>as<sp/>plain<sp/>text,<sp/>HTML,<sp/>XML<sp/>or<sp/>an<sp/>e-mail<sp/>message.<sp/>The<sp/>framework<sp/>comes<sp/>with<sp/>a<sp/>fast<sp/>and<sp/>easy-to-use<sp/>template<sp/>engine.<sp/>F3<sp/>also<sp/>works<sp/>seamlessly<sp/>with<sp/>other<sp/>template<sp/>engines,<sp/>including<sp/>Twig,<sp/>Smarty,<sp/>and<sp/>PHP<sp/>itself.<sp/>Models<sp/>communicate<sp/>with<sp/>F3&apos;s<sp/>data<sp/>mappers<sp/>and<sp/>the<sp/>SQL<sp/>helper<sp/>for<sp/>more<sp/>complex<sp/>interactions<sp/>with<sp/>various<sp/>database<sp/>engines.<sp/>Other<sp/>plug-ins<sp/>extend<sp/>the<sp/>base<sp/>functionality<sp/>even<sp/>more.<sp/>It&apos;s<sp/>a<sp/>total<sp/>Web<sp/>development<sp/>framework<sp/>-<sp/>with<sp/>a<sp/>lot<sp/>of<sp/>muscle!</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Enough<sp/>Said<sp/>-<sp/>See<sp/>For<sp/>Yourself</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Unzip<sp/>the<sp/>contents<sp/>of<sp/>the<sp/>distribution<sp/>package<sp/>anywhere<sp/>in<sp/>your<sp/>hard<sp/>drive.<sp/>By<sp/>default,<sp/>the<sp/>framework<sp/>file<sp/>and<sp/>optional<sp/>plug-ins<sp/>are<sp/>located<sp/>in<sp/>the<sp/>`lib/`<sp/>path.<sp/>Organize<sp/>your<sp/>directory<sp/>structures<sp/>any<sp/>way<sp/>you<sp/>want.<sp/>You<sp/>may<sp/>move<sp/>the<sp/>default<sp/>folders<sp/>to<sp/>a<sp/>path<sp/>that&apos;s<sp/>not<sp/>Web-accessible<sp/>for<sp/>better<sp/>security.<sp/>Delete<sp/>the<sp/>plug-ins<sp/>that<sp/>you<sp/>don&apos;t<sp/>need.<sp/>You<sp/>can<sp/>always<sp/>restore<sp/>them<sp/>later<sp/>and<sp/>F3<sp/>will<sp/>detect<sp/>their<sp/>presence<sp/>automatically.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">**Important:**<sp/>If<sp/>your<sp/>application<sp/>uses<sp/>APC,<sp/>Memcached,<sp/>WinCache,<sp/>XCache,<sp/>or<sp/>a<sp/>filesystem<sp/>cache,<sp/>clear<sp/>all<sp/>cache<sp/>entries<sp/>first<sp/>before<sp/>overwriting<sp/>an<sp/>older<sp/>version<sp/>of<sp/>the<sp/>framework<sp/>with<sp/>a<sp/>new<sp/>one.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Make<sp/>sure<sp/>you&apos;re<sp/>running<sp/>the<sp/>right<sp/>version<sp/>of<sp/>PHP.<sp/>F3<sp/>does<sp/>not<sp/>support<sp/>versions<sp/>earlier<sp/>than<sp/>PHP<sp/>5.3.<sp/>You&apos;ll<sp/>be<sp/>getting<sp/>syntax<sp/>errors<sp/>(false<sp/>positives)<sp/>all<sp/>over<sp/>the<sp/>place<sp/>because<sp/>new<sp/>language<sp/>constructs<sp/>and<sp/>closures/anonymous<sp/>functions<sp/>are<sp/>not<sp/>supported<sp/>by<sp/>outdated<sp/>PHP<sp/>versions.<sp/>To<sp/>find<sp/>out,<sp/>open<sp/>your<sp/>console<sp/>(`bash`<sp/>shell<sp/>on<sp/>GNU/Linux,<sp/>or<sp/>`cmd.exe`<sp/>on<sp/>Windows):-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">/path/to/php<sp/>-v</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">PHP<sp/>will<sp/>let<sp/>you<sp/>know<sp/>which<sp/>particular<sp/>version<sp/>you&apos;re<sp/>running<sp/>and<sp/>you<sp/>should<sp/>get<sp/>something<sp/>that<sp/>looks<sp/>similar<sp/>to<sp/>this:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">PHP<sp/>5.3.15<sp/>(cli)<sp/>(built:<sp/>Jul<sp/>20<sp/>2012<sp/>00:20:38)</highlight></codeline>
<codeline><highlight class="normal">Copyright<sp/>(c)<sp/>1997-2012<sp/>The<sp/>PHP<sp/>Group</highlight></codeline>
<codeline><highlight class="normal">Zend<sp/>Engine<sp/>v2.3.0,<sp/>Copyright<sp/>(c)<sp/>1998-2012<sp/>Zend<sp/>Technologies</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Upgrade<sp/>if<sp/>necessary<sp/>and<sp/>come<sp/>back<sp/>here<sp/>if<sp/>you&apos;ve<sp/>made<sp/>the<sp/>jump<sp/>to<sp/>PHP<sp/>5.3<sp/>or<sp/>a<sp/>later<sp/>release.<sp/>If<sp/>you<sp/>need<sp/>a<sp/>PHP<sp/>5.3+<sp/>hosting<sp/>service<sp/>provider,<sp/>try<sp/>one<sp/>of<sp/>these<sp/>services:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>[A2<sp/>Hosting](http://www.a2hosting.com/2461-15-1-72.html)</highlight></codeline>
<codeline><highlight class="normal">*<sp/>[DreamHost](http://www.dreamhost.com/r.cgi?665472)</highlight></codeline>
<codeline><highlight class="normal">*<sp/>[Hostek](http://hostek.com/aff.php?aff=364&amp;plat=L)</highlight></codeline>
<codeline><highlight class="normal">*<sp/>[SiteGround](http://www.siteground.com/index.htm?referrerid=155694)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Hello,<sp/>World:<sp/>The<sp/>Less-Than-A-Minute<sp/>Fat-Free<sp/>Recipe</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Time<sp/>to<sp/>start<sp/>writing<sp/>our<sp/>first<sp/>application:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3<sp/>=<sp/>require(&apos;path/to/base.php&apos;);</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET<sp/>/&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>function()<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>echo<sp/>&apos;Hello,<sp/>world!&apos;;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;run();</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Prepend<sp/>`base.php`<sp/>on<sp/>the<sp/>first<sp/>line<sp/>with<sp/>the<sp/>appropriate<sp/>path.<sp/>Save<sp/>the<sp/>above<sp/>code<sp/>fragment<sp/>as<sp/>`index.php`<sp/>in<sp/>your<sp/>Web<sp/>root<sp/>folder.<sp/>We&apos;ve<sp/>written<sp/>our<sp/>first<sp/>Web<sp/>page.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>first<sp/>command<sp/>tells<sp/>the<sp/>PHP<sp/>interpreter<sp/>that<sp/>you<sp/>want<sp/>the<sp/>framework&apos;s<sp/>functions<sp/>and<sp/>features<sp/>available<sp/>to<sp/>your<sp/>application.<sp/>The<sp/>`$f3-&gt;route()`<sp/>method<sp/>informs<sp/>Fat-Free<sp/>that<sp/>a<sp/>Web<sp/>page<sp/>is<sp/>available<sp/>at<sp/>the<sp/>relative<sp/>URL<sp/>indicated<sp/>by<sp/>the<sp/>slash<sp/>(`/`).<sp/>Anyone<sp/>visiting<sp/>your<sp/>site<sp/>located<sp/>at<sp/>`http://www.example.com/`<sp/>will<sp/>see<sp/>the<sp/>`&apos;Hello,<sp/>world!&apos;`<sp/>message<sp/>because<sp/>the<sp/>URL<sp/>`/`<sp/>is<sp/>equivalent<sp/>to<sp/>the<sp/>root<sp/>page.<sp/>To<sp/>create<sp/>a<sp/>route<sp/>that<sp/>branches<sp/>out<sp/>from<sp/>the<sp/>root<sp/>page,<sp/>like<sp/>`http://www.example.com/inside/`,<sp/>you<sp/>can<sp/>define<sp/>another<sp/>route<sp/>with<sp/>a<sp/>simple<sp/>`GET<sp/>/inside`<sp/>string.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>route<sp/>described<sp/>above<sp/>tells<sp/>the<sp/>framework<sp/>to<sp/>render<sp/>the<sp/>page<sp/>only<sp/>when<sp/>it<sp/>receives<sp/>a<sp/>URL<sp/>request<sp/>using<sp/>the<sp/>HTTP<sp/>`GET`<sp/>method.<sp/>More<sp/>complex<sp/>Web<sp/>sites<sp/>containing<sp/>forms<sp/>use<sp/>other<sp/>HTTP<sp/>methods<sp/>like<sp/>`POST`,<sp/>and<sp/>you<sp/>can<sp/>also<sp/>implement<sp/>that<sp/>as<sp/>part<sp/>of<sp/>a<sp/>`$f3-&gt;route()`<sp/>specification.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>the<sp/>framework<sp/>sees<sp/>an<sp/>incoming<sp/>request<sp/>for<sp/>your<sp/>Web<sp/>page<sp/>located<sp/>at<sp/>the<sp/>root<sp/>URL<sp/>`/`,<sp/>it<sp/>will<sp/>automatically<sp/>route<sp/>the<sp/>request<sp/>to<sp/>the<sp/>callback<sp/>function,<sp/>which<sp/>contains<sp/>the<sp/>code<sp/>necessary<sp/>to<sp/>process<sp/>the<sp/>request<sp/>and<sp/>render<sp/>the<sp/>appropriate<sp/>HTML<sp/>stuff.<sp/>In<sp/>this<sp/>example,<sp/>we<sp/>just<sp/>send<sp/>the<sp/>string<sp/>`&apos;Hello,<sp/>world!&apos;`<sp/>to<sp/>the<sp/>user&apos;s<sp/>Web<sp/>browser.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">So<sp/>we&apos;ve<sp/>established<sp/>our<sp/>first<sp/>route.<sp/>But<sp/>that<sp/>won&apos;t<sp/>do<sp/>much,<sp/>except<sp/>to<sp/>let<sp/>F3<sp/>know<sp/>that<sp/>there&apos;s<sp/>a<sp/>process<sp/>that<sp/>will<sp/>handle<sp/>it<sp/>and<sp/>there&apos;s<sp/>some<sp/>text<sp/>to<sp/>display<sp/>on<sp/>the<sp/>user&apos;s<sp/>Web<sp/>browser.<sp/>If<sp/>you<sp/>have<sp/>a<sp/>lot<sp/>more<sp/>pages<sp/>on<sp/>your<sp/>site,<sp/>you<sp/>need<sp/>to<sp/>set<sp/>up<sp/>different<sp/>routes<sp/>for<sp/>each<sp/>group.<sp/>For<sp/>now,<sp/>let&apos;s<sp/>keep<sp/>it<sp/>simple.<sp/>To<sp/>instruct<sp/>the<sp/>framework<sp/>to<sp/>start<sp/>waiting<sp/>for<sp/>requests,<sp/>we<sp/>issue<sp/>the<sp/>`$f3-&gt;run()`<sp/>command.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">**Can&apos;t<sp/>Get<sp/>the<sp/>Example<sp/>Running?**<sp/>If<sp/>you&apos;re<sp/>having<sp/>trouble<sp/>getting<sp/>this<sp/>simple<sp/>program<sp/>to<sp/>run<sp/>on<sp/>your<sp/>server,<sp/>you<sp/>may<sp/>have<sp/>to<sp/>tweak<sp/>your<sp/>Web<sp/>server<sp/>settings<sp/>a<sp/>bit.<sp/>Take<sp/>a<sp/>look<sp/>at<sp/>the<sp/>sample<sp/>Apache<sp/>configuration<sp/>in<sp/>the<sp/>following<sp/>section<sp/>(along<sp/>with<sp/>the<sp/>Nginx<sp/>and<sp/>Lighttpd<sp/>equivalents).</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">**Still<sp/>having<sp/>trouble?**<sp/>Make<sp/>sure<sp/>the<sp/>`$f3<sp/>=<sp/>require(&apos;path/to/base.php&apos;);`<sp/>assignment<sp/>comes<sp/>before<sp/>any<sp/>output<sp/>in<sp/>your<sp/>script.<sp/>`base.php`<sp/>modifies<sp/>the<sp/>HTTP<sp/>headers,<sp/>so<sp/>any<sp/>character<sp/>that<sp/>is<sp/>output<sp/>to<sp/>the<sp/>browser<sp/>before<sp/>this<sp/>assignment<sp/>will<sp/>cause<sp/>errors.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>Routing<sp/>Engine</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Overview</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Our<sp/>first<sp/>example<sp/>wasn&apos;t<sp/>too<sp/>hard<sp/>to<sp/>swallow,<sp/>was<sp/>it?<sp/>If<sp/>you<sp/>like<sp/>a<sp/>little<sp/>more<sp/>flavor<sp/>in<sp/>your<sp/>Fat-Free<sp/>soup,<sp/>insert<sp/>another<sp/>route<sp/>before<sp/>the<sp/>`$f3-&gt;run()`<sp/>command:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET<sp/>/about&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>function()<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>echo<sp/>&apos;Donations<sp/>go<sp/>to<sp/>a<sp/>local<sp/>charity...<sp/>us!&apos;;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">You<sp/>don&apos;t<sp/>want<sp/>to<sp/>clutter<sp/>the<sp/>global<sp/>namespace<sp/>with<sp/>function<sp/>names?<sp/>Fat-Free<sp/>recognizes<sp/>different<sp/>ways<sp/>of<sp/>mapping<sp/>route<sp/>handlers<sp/>to<sp/>OOP<sp/>classes<sp/>and<sp/>methods:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">class<sp/>WebPage<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>function<sp/>display()<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>echo<sp/>&apos;I<sp/>cannot<sp/>object<sp/>to<sp/>an<sp/>object&apos;;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET<sp/>/about&apos;,&apos;WebPage-&gt;display&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">HTTP<sp/>requests<sp/>can<sp/>also<sp/>be<sp/>routed<sp/>to<sp/>static<sp/>class<sp/>methods:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET<sp/>/login&apos;,&apos;Auth::login&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Passed<sp/>arguments<sp/>are<sp/>always<sp/>provided<sp/>as<sp/>the<sp/>second<sp/>parameter:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET<sp/>/hello/@name&apos;,&apos;User::greet&apos;);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">class<sp/>User<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>public<sp/>static<sp/>function<sp/>greet($f3,<sp/>$args)<sp/>{<sp/>//$args<sp/>is<sp/>type<sp/>of<sp/>Array</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>echo<sp/>&quot;Hello<sp/>&quot;<sp/>.<sp/>$args[&apos;name&apos;];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">If<sp/>the<sp/>provided<sp/>name<sp/>argument<sp/>would<sp/>be<sp/>**foo**<sp/>(/hello/foo),<sp/>the<sp/>following<sp/>output<sp/>would<sp/>be<sp/>shown:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">Hello<sp/>foo</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Routes<sp/>and<sp/>Tokens</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">As<sp/>a<sp/>demonstration<sp/>of<sp/>Fat-Free&apos;s<sp/>powerful<sp/>domain-specific<sp/>language<sp/>(DSL),<sp/>you<sp/>can<sp/>specify<sp/>a<sp/>single<sp/>route<sp/>to<sp/>handle<sp/>different<sp/>possibilities:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET<sp/>/brew/@count&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>function($f3)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>echo<sp/>$f3-&gt;get(&apos;PARAMS.count&apos;).&apos;<sp/>bottles<sp/>of<sp/>beer<sp/>on<sp/>the<sp/>wall.&apos;;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">This<sp/>example<sp/>shows<sp/>how<sp/>we<sp/>can<sp/>specify<sp/>a<sp/>token<sp/>`@count`<sp/>to<sp/>represent<sp/>part<sp/>of<sp/>a<sp/>URL.<sp/>The<sp/>framework<sp/>will<sp/>serve<sp/>any<sp/>request<sp/>URL<sp/>that<sp/>matches<sp/>the<sp/>`/brew/`<sp/>prefix,<sp/>like<sp/>`/brew/99`,<sp/>`/brew/98`,<sp/>etc.<sp/>This<sp/>will<sp/>display<sp/>`&apos;99<sp/>bottles<sp/>of<sp/>beer<sp/>on<sp/>the<sp/>wall&apos;`<sp/>and<sp/>`&apos;98<sp/>bottles<sp/>of<sp/>beer<sp/>on<sp/>the<sp/>wall&apos;`,<sp/>respectively.<sp/>Fat-Free<sp/>will<sp/>also<sp/>accept<sp/>a<sp/>page<sp/>request<sp/>for<sp/>`/brew/unbreakable`.<sp/>(Expect<sp/>this<sp/>to<sp/>display<sp/>`&apos;unbreakable<sp/>bottles<sp/>of<sp/>beer<sp/>on<sp/>the<sp/>wall&apos;`.)<sp/>When<sp/>such<sp/>a<sp/>dynamic<sp/>route<sp/>is<sp/>specified,<sp/>Fat-Free<sp/>automagically<sp/>populates<sp/>the<sp/>global<sp/>`PARAMS`<sp/>array<sp/>variable<sp/>with<sp/>the<sp/>value<sp/>of<sp/>the<sp/>captured<sp/>strings<sp/>in<sp/>the<sp/>URL.<sp/>The<sp/>`$f3-&gt;get()`<sp/>call<sp/>inside<sp/>the<sp/>callback<sp/>function<sp/>retrieves<sp/>the<sp/>value<sp/>of<sp/>a<sp/>framework<sp/>variable.<sp/>You<sp/>can<sp/>certainly<sp/>apply<sp/>this<sp/>method<sp/>in<sp/>your<sp/>code<sp/>as<sp/>part<sp/>of<sp/>the<sp/>presentation<sp/>or<sp/>business<sp/>logic.<sp/>But<sp/>we&apos;ll<sp/>discuss<sp/>that<sp/>in<sp/>greater<sp/>detail<sp/>later.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Notice<sp/>that<sp/>Fat-Free<sp/>understands<sp/>array<sp/>dot-notation.<sp/>You<sp/>can<sp/>use<sp/>`PARAMS[&apos;count&apos;]`<sp/>regular<sp/>notation<sp/>instead<sp/>in<sp/>code,<sp/>which<sp/>is<sp/>prone<sp/>to<sp/>typo<sp/>errors<sp/>and<sp/>unbalanced<sp/>braces.<sp/>In<sp/>views<sp/>and<sp/>templates,<sp/>the<sp/>framework<sp/>permits<sp/>`@PARAMS.count`<sp/>notation<sp/>which<sp/>is<sp/>somewhat<sp/>similar<sp/>to<sp/>Javascript.<sp/>(We&apos;ll<sp/>cover<sp/>views<sp/>and<sp/>templates<sp/>later.)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Here&apos;s<sp/>another<sp/>way<sp/>to<sp/>access<sp/>tokens<sp/>in<sp/>a<sp/>request<sp/>pattern:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET<sp/>/brew/@count&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>function($f3,$params)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>echo<sp/>$params[&apos;count&apos;].&apos;<sp/>bottles<sp/>of<sp/>beer<sp/>on<sp/>the<sp/>wall.&apos;;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">You<sp/>can<sp/>use<sp/>the<sp/>asterisk<sp/>(`*`)<sp/>to<sp/>accept<sp/>any<sp/>URL<sp/>after<sp/>the<sp/>`/brew`<sp/>route<sp/>-<sp/>if<sp/>you<sp/>don&apos;t<sp/>really<sp/>care<sp/>about<sp/>the<sp/>rest<sp/>of<sp/>the<sp/>path:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET<sp/>/brew/*&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>function()<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>echo<sp/>&apos;Enough<sp/>beer!<sp/>We<sp/>always<sp/>end<sp/>up<sp/>here.&apos;;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">An<sp/>important<sp/>point<sp/>to<sp/>consider:<sp/>You<sp/>will<sp/>get<sp/>Fat-Free<sp/>(and<sp/>yourself)<sp/>confused<sp/>if<sp/>you<sp/>have<sp/>both<sp/>`GET<sp/>/brew/@count`<sp/>and<sp/>`GET<sp/>/brew/*`<sp/>together<sp/>in<sp/>the<sp/>same<sp/>application.<sp/>Use<sp/>one<sp/>or<sp/>the<sp/>other.<sp/>Another<sp/>thing:<sp/>Fat-Free<sp/>sees<sp/>`GET<sp/>/brew`<sp/>as<sp/>separate<sp/>and<sp/>distinct<sp/>from<sp/>the<sp/>route<sp/>`GET<sp/>/brew/@count`.<sp/>Each<sp/>can<sp/>have<sp/>different<sp/>route<sp/>handlers.</highlight></codeline>
<codeline></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Dynamic<sp/>Web<sp/>Sites</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Wait<sp/>a<sp/>second<sp/>-<sp/>in<sp/>all<sp/>the<sp/>previous<sp/>examples,<sp/>we<sp/>never<sp/>really<sp/>created<sp/>any<sp/>directory<sp/>in<sp/>our<sp/>hard<sp/>drive<sp/>to<sp/>store<sp/>these<sp/>routes.<sp/>The<sp/>short<sp/>answer:<sp/>we<sp/>don&apos;t<sp/>have<sp/>to.<sp/>All<sp/>F3<sp/>routes<sp/>are<sp/>virtual.<sp/>They<sp/>don&apos;t<sp/>mirror<sp/>our<sp/>hard<sp/>disk<sp/>folder<sp/>structure.<sp/>If<sp/>you<sp/>have<sp/>programs<sp/>or<sp/>static<sp/>files<sp/>(images,<sp/>CSS,<sp/>etc.)<sp/>that<sp/>do<sp/>not<sp/>use<sp/>the<sp/>framework<sp/>-<sp/>as<sp/>long<sp/>as<sp/>the<sp/>paths<sp/>to<sp/>these<sp/>files<sp/>do<sp/>not<sp/>conflict<sp/>with<sp/>any<sp/>route<sp/>defined<sp/>in<sp/>your<sp/>application<sp/>-<sp/>your<sp/>Web<sp/>server<sp/>software<sp/>will<sp/>deliver<sp/>them<sp/>to<sp/>the<sp/>user&apos;s<sp/>browser,<sp/>provided<sp/>the<sp/>server<sp/>is<sp/>configured<sp/>properly.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Named<sp/>Routes</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">When<sp/>you<sp/>define<sp/>a<sp/>route,<sp/>you<sp/>can<sp/>assign<sp/>it<sp/>a<sp/>name.<sp/>Use<sp/>the<sp/>route<sp/>name<sp/>in<sp/>your<sp/>code<sp/>and<sp/>templates<sp/>instead<sp/>of<sp/>a<sp/>typed<sp/>url.<sp/>Then<sp/>if<sp/>you<sp/>need<sp/>to<sp/>change<sp/>your<sp/>urls<sp/>to<sp/>please<sp/>the<sp/>marketing<sp/>overlords,<sp/>you<sp/>only<sp/>need<sp/>to<sp/>make<sp/>the<sp/>change<sp/>where<sp/>the<sp/>route<sp/>was<sp/>defined.<sp/>The<sp/>route<sp/>names<sp/>must<sp/>follow<sp/>php<sp/>variable<sp/>naming<sp/>rules<sp/>(no<sp/>dots,<sp/>dashes<sp/>nor<sp/>hyphens).</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Let&apos;s<sp/>name<sp/>a<sp/>route:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET<sp/>@beer_list:<sp/>/beer&apos;,<sp/>&apos;Beer-&gt;list&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>name<sp/>is<sp/>inserted<sp/>after<sp/>the<sp/>route<sp/>VERB<sp/>(`GET`<sp/>in<sp/>this<sp/>example)<sp/>preceded<sp/>by<sp/>an<sp/>`@`<sp/>symbol,<sp/>and<sp/>separated<sp/>from<sp/>the<sp/>URL<sp/>portion<sp/>by<sp/>a<sp/>colon<sp/>`:`<sp/>symbol.<sp/>You<sp/>can<sp/>insert<sp/>a<sp/>space<sp/>after<sp/>the<sp/>colon<sp/>if<sp/>that<sp/>makes<sp/>it<sp/>easier<sp/>to<sp/>read<sp/>your<sp/>code<sp/>(as<sp/>shown<sp/>here).</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">To<sp/>access<sp/>the<sp/>named<sp/>route<sp/>in<sp/>a<sp/>template,<sp/>get<sp/>the<sp/>value<sp/>of<sp/>the<sp/>named<sp/>route<sp/>as<sp/>the<sp/>key<sp/>of<sp/>the<sp/>`ALIASES`<sp/>hive<sp/>array:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">&lt;a<sp/>href=&quot;{{<sp/>@ALIASES.beer_list<sp/>}}&quot;&gt;View<sp/>beer<sp/>list&lt;/a&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">To<sp/>redirect<sp/>the<sp/>visitor<sp/>to<sp/>a<sp/>new<sp/>URL,<sp/>call<sp/>the<sp/>named<sp/>route<sp/>inside<sp/>the<sp/>`reroute()`<sp/>method<sp/>like:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">//<sp/>a<sp/>named<sp/>route<sp/>is<sp/>a<sp/>string<sp/>value</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;reroute(&apos;@beer_list&apos;);<sp/>//<sp/>note<sp/>the<sp/>single<sp/>quotes</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>you<sp/>use<sp/>tokens<sp/>in<sp/>your<sp/>route,<sp/>F3<sp/>will<sp/>replace<sp/>those<sp/>tokens<sp/>with<sp/>their<sp/>current<sp/>value.<sp/>If<sp/>you<sp/>want<sp/>to<sp/>change<sp/>the<sp/>token&apos;s<sp/>value<sp/>before<sp/>calling<sp/>reroute,<sp/>pass<sp/>it<sp/>as<sp/>the<sp/>2nd<sp/>argument.:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET<sp/>@beer_list:<sp/>/beer/@country&apos;,<sp/>&apos;Beer-&gt;bycountry&apos;);</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET<sp/>@beer_list:<sp/>/beer/@country/@village&apos;,<sp/>&apos;Beer-&gt;byvillage&apos;);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">//<sp/>a<sp/>set<sp/>of<sp/>key-value<sp/>pairs<sp/>is<sp/>passed<sp/>as<sp/>argument<sp/>to<sp/>named<sp/>route</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;reroute(&apos;@beer_list(@country=Germany)&apos;);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">//<sp/>if<sp/>more<sp/>than<sp/>one<sp/>token<sp/>needed</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;reroute(&apos;@beer_list(@country=Germany,@village=Rhine)&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Remember<sp/>to<sp/>`urlencode()`<sp/>your<sp/>arguments<sp/>if<sp/>you<sp/>have<sp/>characters<sp/>that<sp/>do<sp/>not<sp/>comply<sp/>with<sp/>RFC<sp/>1738<sp/>guidelines<sp/>for<sp/>well-formed<sp/>URLs.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>PHP<sp/>5.4&apos;s<sp/>Built-In<sp/>Web<sp/>Server</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">PHP&apos;s<sp/>latest<sp/>stable<sp/>version<sp/>has<sp/>its<sp/>own<sp/>built-in<sp/>Web<sp/>server.<sp/>Start<sp/>it<sp/>up<sp/>using<sp/>the<sp/>following<sp/>configuration:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">php<sp/>-S<sp/>localhost:80<sp/>-t<sp/>/var/www/</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>above<sp/>command<sp/>will<sp/>start<sp/>routing<sp/>all<sp/>requests<sp/>to<sp/>the<sp/>Web<sp/>root<sp/>`/var/www`.<sp/>If<sp/>an<sp/>incoming<sp/>HTTP<sp/>request<sp/>for<sp/>a<sp/>file<sp/>or<sp/>folder<sp/>is<sp/>received,<sp/>PHP<sp/>will<sp/>look<sp/>for<sp/>it<sp/>inside<sp/>the<sp/>Web<sp/>root<sp/>and<sp/>send<sp/>it<sp/>over<sp/>to<sp/>the<sp/>browser<sp/>if<sp/>found.<sp/>Otherwise,<sp/>PHP<sp/>will<sp/>load<sp/>the<sp/>default<sp/>`index.php`<sp/>(containing<sp/>your<sp/>F3-enabled<sp/>code).</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Sample<sp/>Apache<sp/>Configuration</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>you&apos;re<sp/>using<sp/>Apache,<sp/>make<sp/>sure<sp/>you<sp/>activate<sp/>the<sp/>URL<sp/>rewriting<sp/>module<sp/>(mod_rewrite)<sp/>in<sp/>your<sp/>apache.conf<sp/>(or<sp/>httpd.conf)<sp/>file.<sp/>You<sp/>should<sp/>also<sp/>create<sp/>a<sp/>.htaccess<sp/>file<sp/>containing<sp/>the<sp/>following:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>apache</highlight></codeline>
<codeline><highlight class="normal">RewriteEngine<sp/>On</highlight></codeline>
<codeline><highlight class="normal">RewriteCond<sp/>%{REQUEST_FILENAME}<sp/>!-f</highlight></codeline>
<codeline><highlight class="normal">RewriteCond<sp/>%{REQUEST_FILENAME}<sp/>!-d</highlight></codeline>
<codeline><highlight class="normal">RewriteCond<sp/>%{REQUEST_FILENAME}<sp/>!-l</highlight></codeline>
<codeline><highlight class="normal">RewriteRule<sp/>.*<sp/>index.php<sp/>[L,QSA]</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>script<sp/>tells<sp/>Apache<sp/>that<sp/>whenever<sp/>an<sp/>HTTP<sp/>request<sp/>arrives<sp/>and<sp/>if<sp/>no<sp/>physical<sp/>file<sp/>(`!-f`)<sp/>or<sp/>path<sp/>(`!-d`)<sp/>or<sp/>symbolic<sp/>link<sp/>(`!-l`)<sp/>can<sp/>be<sp/>found,<sp/>it<sp/>should<sp/>transfer<sp/>control<sp/>to<sp/>`index.php`,<sp/>which<sp/>contains<sp/>our<sp/>main/front<sp/>controller,<sp/>and<sp/>which<sp/>in<sp/>turn,<sp/>invokes<sp/>the<sp/>framework.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>`.htaccess<sp/>file`<sp/>containing<sp/>the<sp/>Apache<sp/>directives<sp/>stated<sp/>above<sp/>should<sp/>always<sp/>be<sp/>in<sp/>the<sp/>same<sp/>folder<sp/>as<sp/>`index.php`.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">You<sp/>also<sp/>need<sp/>to<sp/>set<sp/>up<sp/>Apache<sp/>so<sp/>it<sp/>knows<sp/>the<sp/>physical<sp/>location<sp/>of<sp/>`index.php`<sp/>in<sp/>your<sp/>hard<sp/>drive.<sp/>A<sp/>typical<sp/>configuration<sp/>is:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>apache</highlight></codeline>
<codeline><highlight class="normal">DocumentRoot<sp/>&quot;/var/www/html&quot;</highlight></codeline>
<codeline><highlight class="normal">&lt;Directory<sp/>&quot;/var/www/html&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Options<sp/>-Indexes<sp/>+FollowSymLinks<sp/>+Includes</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>AllowOverride<sp/>All</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Order<sp/>allow,deny</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Allow<sp/>from<sp/>All</highlight></codeline>
<codeline><highlight class="normal">&lt;/Directory&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>you&apos;re<sp/>developing<sp/>several<sp/>applications<sp/>simultaneously,<sp/>a<sp/>virtual<sp/>host<sp/>configuration<sp/>is<sp/>easier<sp/>to<sp/>manage:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>apache</highlight></codeline>
<codeline><highlight class="normal">NameVirtualHost<sp/>*</highlight></codeline>
<codeline><highlight class="normal">&lt;VirtualHost<sp/>*&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ServerName<sp/>site1.com</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>DocumentRoot<sp/>&quot;/var/www/site1&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;Directory<sp/>&quot;/var/www/site1&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Options<sp/>-Indexes<sp/>+FollowSymLinks<sp/>+Includes</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>AllowOverride<sp/>All</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Order<sp/>allow,deny</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Allow<sp/>from<sp/>All</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;/Directory&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;/VirtualHost&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;VirtualHost<sp/>*&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ServerName<sp/>site2.com</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>DocumentRoot<sp/>&quot;/var/www/site2&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;Directory<sp/>&quot;/var/www/site2&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Options<sp/>-Indexes<sp/>+FollowSymLinks<sp/>+Includes</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>AllowOverride<sp/>All</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Order<sp/>allow,deny</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Allow<sp/>from<sp/>All</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;/Directory&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;/VirtualHost&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Each<sp/>`ServerName`<sp/>(`site1.com`<sp/>and<sp/>`site2.com`<sp/>in<sp/>our<sp/>example)<sp/>must<sp/>be<sp/>listed<sp/>in<sp/>your<sp/>`/etc/hosts`<sp/>file.<sp/>On<sp/>Windows,<sp/>you<sp/>should<sp/>edit<sp/>`C:/WINDOWS/system32/drivers/etc/hosts`.<sp/>A<sp/>reboot<sp/>might<sp/>be<sp/>necessary<sp/>to<sp/>effect<sp/>the<sp/>changes.<sp/>You<sp/>can<sp/>then<sp/>point<sp/>your<sp/>Web<sp/>browser<sp/>to<sp/>the<sp/>address<sp/>`http://site1.com`<sp/>or<sp/>`http://site2.com`.<sp/>Virtual<sp/>hosts<sp/>make<sp/>your<sp/>applications<sp/>a<sp/>lot<sp/>easier<sp/>to<sp/>deploy.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Sample<sp/>Nginx<sp/>Configuration</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">For<sp/>Nginx<sp/>servers,<sp/>here&apos;s<sp/>the<sp/>recommended<sp/>configuration<sp/>(replace<sp/>ip_address:port<sp/>with<sp/>your<sp/>environment&apos;s<sp/>FastCGI<sp/>PHP<sp/>settings):-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>nginx</highlight></codeline>
<codeline><highlight class="normal">server<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>root<sp/>/var/www/html;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>location<sp/>/<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>index<sp/>index.php<sp/>index.html<sp/>index.htm;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>try_files<sp/>$uri<sp/>$uri/<sp/>/index.php?$query_string;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>location<sp/>~<sp/>\.php$<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fastcgi_pass<sp/>ip_address:port;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>include<sp/>fastcgi_params;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Sample<sp/>Lighttpd<sp/>Configuration</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Lighttpd<sp/>servers<sp/>are<sp/>configured<sp/>in<sp/>a<sp/>similar<sp/>manner:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">$HTTP[&quot;host&quot;]<sp/>=~<sp/>&quot;www\.example\.com$&quot;<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>url.rewrite-once<sp/>=<sp/>(<sp/>&quot;^/(.*?)(\?.+)?$&quot;=&gt;&quot;/index.php/$1?$2&quot;<sp/>)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>server.error-handler-404<sp/>=<sp/>&quot;/index.php&quot;</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Sample<sp/>IIS<sp/>Configuration</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Install<sp/>the<sp/>[URL<sp/>rewrite<sp/>module](http://www.iis.net/downloads/microsoft/url-rewrite)<sp/>and<sp/>the<sp/>appropriate<sp/>.NET<sp/>framework<sp/>corresponding<sp/>to<sp/>your<sp/>Windows<sp/>version.<sp/>Then<sp/>create<sp/>a<sp/>file<sp/>named<sp/>`web.config`<sp/>in<sp/>your<sp/>application<sp/>root<sp/>with<sp/>the<sp/>following<sp/>contents:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">&lt;?xml<sp/>version=&quot;1.0&quot;<sp/>encoding=&quot;UTF-8&quot;?&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;configuration&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;system.webServer&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;rewrite&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;rules&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;rule<sp/>name=&quot;Application&quot;<sp/>stopProcessing=&quot;true&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;match<sp/>url=&quot;.*&quot;<sp/>ignoreCase=&quot;false&quot;<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;conditions<sp/>logicalGrouping=&quot;MatchAll&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;add<sp/>input=&quot;{REQUEST_FILENAME}&quot;<sp/>matchType=&quot;IsFile&quot;<sp/>ignoreCase=&quot;false&quot;<sp/>negate=&quot;true&quot;<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;add<sp/>input=&quot;{REQUEST_FILENAME}&quot;<sp/>matchType=&quot;IsDirectory&quot;<sp/>ignoreCase=&quot;false&quot;<sp/>negate=&quot;true&quot;<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;/conditions&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;action<sp/>type=&quot;Rewrite&quot;<sp/>url=&quot;index.php&quot;<sp/>appendQueryString=&quot;true&quot;<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;/rule&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;/rules&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;/rewrite&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>&lt;/system.webServer&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;/configuration&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Rerouting</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">So<sp/>let&apos;s<sp/>get<sp/>back<sp/>to<sp/>coding.<sp/>You<sp/>can<sp/>declare<sp/>a<sp/>page<sp/>obsolete<sp/>and<sp/>redirect<sp/>your<sp/>visitors<sp/>to<sp/>another<sp/>site/page:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET|HEAD<sp/>/obsoletepage&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>function($f3)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$f3-&gt;reroute(&apos;/newpage&apos;);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>someone<sp/>tries<sp/>to<sp/>access<sp/>the<sp/>URL<sp/>`http://www.example.com/obsoletepage`<sp/>using<sp/>either<sp/>HTTP<sp/>GET<sp/>or<sp/>HEAD<sp/>request,<sp/>the<sp/>framework<sp/>redirects<sp/>the<sp/>user<sp/>to<sp/>the<sp/>URL:<sp/>`http://www.example.com/newpage`<sp/>as<sp/>shown<sp/>in<sp/>the<sp/>above<sp/>example.<sp/>You<sp/>can<sp/>also<sp/>redirect<sp/>the<sp/>user<sp/>to<sp/>another<sp/>site,<sp/>like<sp/>`$f3-&gt;reroute(&apos;http://www.anotherexample.org/&apos;);`.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Rerouting<sp/>can<sp/>be<sp/>particularly<sp/>useful<sp/>when<sp/>you<sp/>need<sp/>to<sp/>do<sp/>some<sp/>maintenance<sp/>work<sp/>on<sp/>your<sp/>site.<sp/>You<sp/>can<sp/>have<sp/>a<sp/>route<sp/>handler<sp/>that<sp/>informs<sp/>your<sp/>visitors<sp/>that<sp/>your<sp/>site<sp/>is<sp/>offline<sp/>for<sp/>a<sp/>short<sp/>period.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">HTTP<sp/>redirects<sp/>are<sp/>indispensable<sp/>but<sp/>they<sp/>can<sp/>also<sp/>be<sp/>expensive.<sp/>As<sp/>much<sp/>as<sp/>possible,<sp/>refrain<sp/>from<sp/>using<sp/>`$f3-&gt;reroute()`<sp/>to<sp/>send<sp/>a<sp/>user<sp/>to<sp/>another<sp/>page<sp/>on<sp/>the<sp/>same<sp/>Web<sp/>site<sp/>if<sp/>you<sp/>can<sp/>direct<sp/>the<sp/>flow<sp/>of<sp/>your<sp/>application<sp/>by<sp/>invoking<sp/>the<sp/>function<sp/>or<sp/>method<sp/>that<sp/>handles<sp/>the<sp/>target<sp/>route.<sp/>However,<sp/>this<sp/>approach<sp/>will<sp/>not<sp/>change<sp/>the<sp/>URL<sp/>on<sp/>the<sp/>address<sp/>bar<sp/>of<sp/>the<sp/>user&apos;s<sp/>Web<sp/>browser.<sp/>If<sp/>this<sp/>is<sp/>not<sp/>the<sp/>behavior<sp/>you<sp/>want<sp/>and<sp/>you<sp/>really<sp/>need<sp/>to<sp/>send<sp/>a<sp/>user<sp/>to<sp/>another<sp/>page,<sp/>in<sp/>instances<sp/>like<sp/>successful<sp/>submission<sp/>of<sp/>a<sp/>form<sp/>or<sp/>after<sp/>a<sp/>user<sp/>has<sp/>been<sp/>authenticated,<sp/>Fat-Free<sp/>sends<sp/>an<sp/>`HTTP<sp/>303<sp/>See<sp/>Other`<sp/>header.<sp/>For<sp/>all<sp/>other<sp/>attempts<sp/>to<sp/>reroute<sp/>to<sp/>another<sp/>page<sp/>or<sp/>site,<sp/>the<sp/>framework<sp/>sends<sp/>an<sp/>`HTTP<sp/>301<sp/>Moved<sp/>Permanently`<sp/>header.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Triggering<sp/>a<sp/>404</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">At<sp/>runtime,<sp/>Fat-Free<sp/>automatically<sp/>generates<sp/>an<sp/>HTTP<sp/>404<sp/>error<sp/>whenever<sp/>it<sp/>sees<sp/>that<sp/>an<sp/>incoming<sp/>HTTP<sp/>request<sp/>does<sp/>not<sp/>match<sp/>any<sp/>of<sp/>the<sp/>routes<sp/>defined<sp/>in<sp/>your<sp/>application.<sp/>However,<sp/>there<sp/>are<sp/>instances<sp/>when<sp/>you<sp/>need<sp/>to<sp/>trigger<sp/>it<sp/>yourself.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Take<sp/>for<sp/>instance<sp/>a<sp/>route<sp/>defined<sp/>as<sp/>`GET<sp/>/dogs/@breed`.<sp/>Your<sp/>application<sp/>logic<sp/>may<sp/>involve<sp/>searching<sp/>a<sp/>database<sp/>and<sp/>attempting<sp/>to<sp/>retrieve<sp/>the<sp/>record<sp/>corresponding<sp/>to<sp/>the<sp/>value<sp/>of<sp/>`@breed`<sp/>in<sp/>the<sp/>incoming<sp/>HTTP<sp/>request.<sp/>Since<sp/>Fat-Free<sp/>will<sp/>accept<sp/>any<sp/>value<sp/>after<sp/>the<sp/>`/dogs/`<sp/>prefix<sp/>because<sp/>of<sp/>the<sp/>presence<sp/>of<sp/>the<sp/>`@breed`<sp/>token,<sp/>displaying<sp/>an<sp/>`HTTP<sp/>404<sp/>Not<sp/>Found`<sp/>message<sp/>programmatically<sp/>becomes<sp/>necessary<sp/>when<sp/>the<sp/>program<sp/>doesn&apos;t<sp/>find<sp/>any<sp/>match<sp/>in<sp/>our<sp/>database.<sp/>To<sp/>do<sp/>that,<sp/>use<sp/>the<sp/>following<sp/>command:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;error(404);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Representational<sp/>State<sp/>Transfer<sp/>(ReST)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Fat-Free&apos;s<sp/>architecture<sp/>is<sp/>based<sp/>on<sp/>the<sp/>concept<sp/>that<sp/>HTTP<sp/>URIs<sp/>represent<sp/>abstract<sp/>Web<sp/>resources<sp/>(not<sp/>limited<sp/>to<sp/>HTML)<sp/>and<sp/>each<sp/>resource<sp/>can<sp/>move<sp/>from<sp/>one<sp/>application<sp/>state<sp/>to<sp/>another.<sp/>For<sp/>this<sp/>reason,<sp/>F3<sp/>does<sp/>not<sp/>have<sp/>any<sp/>restrictions<sp/>on<sp/>the<sp/>way<sp/>you<sp/>structure<sp/>your<sp/>application.<sp/>If<sp/>you<sp/>prefer<sp/>to<sp/>use<sp/>the<sp/>[Model-View-Controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)<sp/>pattern,<sp/>F3<sp/>can<sp/>help<sp/>you<sp/>compartmentalize<sp/>your<sp/>application<sp/>components<sp/>to<sp/>stick<sp/>to<sp/>this<sp/>paradigm.<sp/>On<sp/>the<sp/>other<sp/>hand,<sp/>the<sp/>framework<sp/>also<sp/>supports<sp/>the<sp/>[Resource-Method-Representation](http://www.peej.co.uk/articles/rmr-architecture.html)<sp/>pattern,<sp/>and<sp/>implementing<sp/>it<sp/>is<sp/>more<sp/>straightforward.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Here&apos;s<sp/>an<sp/>example<sp/>of<sp/>a<sp/>ReST<sp/>interface:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">class<sp/>Item<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>function<sp/>get()<sp/>{}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>function<sp/>post()<sp/>{}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>function<sp/>put()<sp/>{}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>function<sp/>delete()<sp/>{}</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">$f3=require(&apos;lib/base.php&apos;);</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;map(&apos;/cart/@item&apos;,&apos;Item&apos;);</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;run();</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Fat-Free&apos;s<sp/>`$f3-&gt;map()`<sp/>method<sp/>provides<sp/>a<sp/>ReST<sp/>interface<sp/>by<sp/>mapping<sp/>HTTP<sp/>methods<sp/>in<sp/>routes<sp/>to<sp/>the<sp/>equivalent<sp/>methods<sp/>of<sp/>an<sp/>object<sp/>or<sp/>a<sp/>PHP<sp/>class.<sp/>If<sp/>your<sp/>application<sp/>receives<sp/>an<sp/>incoming<sp/>HTTP<sp/>request<sp/>like<sp/>`GET<sp/>/cart/123`,<sp/>Fat-Free<sp/>will<sp/>automatically<sp/>transfer<sp/>control<sp/>to<sp/>the<sp/>object&apos;s<sp/>or<sp/>class&apos;<sp/>`get()`<sp/>method.<sp/>On<sp/>the<sp/>other<sp/>hand,<sp/>a<sp/>`POST<sp/>/cart/123`<sp/>request<sp/>will<sp/>be<sp/>routed<sp/>to<sp/>the<sp/>`Item`<sp/>class&apos;<sp/>`post()`<sp/>method.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">**Note:**<sp/>Browsers<sp/>do<sp/>not<sp/>implement<sp/>the<sp/>HTTP<sp/>`PUT`<sp/>and<sp/>`DELETE`<sp/>methods<sp/>in<sp/>regular<sp/>HTML<sp/>forms.<sp/>These<sp/>and<sp/>other<sp/>ReST<sp/>methods<sp/>(`HEAD`,<sp/>and<sp/>`CONNECT`)<sp/>are<sp/>accessible<sp/>only<sp/>via<sp/>AJAX<sp/>calls<sp/>to<sp/>the<sp/>server.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>the<sp/>framework<sp/>receives<sp/>an<sp/>HTTP<sp/>request<sp/>for<sp/>a<sp/>route<sp/>that<sp/>maps<sp/>to<sp/>a<sp/>method<sp/>that<sp/>is<sp/>not<sp/>implemented<sp/>by<sp/>a<sp/>class<sp/>(perhaps<sp/>you&apos;ve<sp/>made<sp/>an<sp/>error<sp/>in<sp/>the<sp/>route<sp/>mapping,<sp/>or<sp/>the<sp/>method<sp/>is<sp/>not<sp/>written<sp/>yet),<sp/>it<sp/>generates<sp/>an<sp/>`HTTP<sp/>405<sp/>Method<sp/>Not<sp/>Allowed`<sp/>error.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>a<sp/>client<sp/>requests<sp/>HTTP<sp/>`OPTIONS`<sp/>for<sp/>a<sp/>URL<sp/>resource,<sp/>F3<sp/>responds<sp/>with<sp/>the<sp/>appropriate<sp/>HTTP<sp/>headers<sp/>that<sp/>indicate<sp/>which<sp/>methods<sp/>are<sp/>allowed<sp/>for<sp/>the<sp/>resource<sp/>(HEAD,<sp/>GET,<sp/>PUT,<sp/>etc).<sp/>The<sp/>framework<sp/>will<sp/>not<sp/>map<sp/>the<sp/>`OPTIONS`<sp/>request<sp/>to<sp/>a<sp/>class.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>The<sp/>F3<sp/>Autoloader</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Fat-Free<sp/>has<sp/>a<sp/>way<sp/>of<sp/>loading<sp/>classes<sp/>only<sp/>at<sp/>the<sp/>time<sp/>you<sp/>need<sp/>them,<sp/>so<sp/>they<sp/>don&apos;t<sp/>gobble<sp/>up<sp/>more<sp/>memory<sp/>than<sp/>a<sp/>particular<sp/>segment<sp/>of<sp/>your<sp/>application<sp/>needs.<sp/>And<sp/>you<sp/>don&apos;t<sp/>have<sp/>to<sp/>write<sp/>a<sp/>long<sp/>list<sp/>of<sp/>`include`<sp/>or<sp/>`require`<sp/>statements<sp/>just<sp/>to<sp/>load<sp/>PHP<sp/>classes<sp/>saved<sp/>in<sp/>different<sp/>files<sp/>and<sp/>different<sp/>locations.<sp/>The<sp/>framework<sp/>can<sp/>do<sp/>this<sp/>automatically<sp/>for<sp/>you.<sp/>Just<sp/>save<sp/>your<sp/>files<sp/>(one<sp/>class<sp/>per<sp/>file)<sp/>in<sp/>a<sp/>folder<sp/>and<sp/>tell<sp/>the<sp/>framework<sp/>to<sp/>automatically<sp/>load<sp/>the<sp/>appropriate<sp/>file<sp/>once<sp/>you<sp/>invoke<sp/>a<sp/>method<sp/>in<sp/>the<sp/>class:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;AUTOLOAD&apos;,&apos;autoload/&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">You<sp/>can<sp/>assign<sp/>a<sp/>different<sp/>location<sp/>for<sp/>your<sp/>autoloaded<sp/>classes<sp/>by<sp/>changing<sp/>the<sp/>value<sp/>of<sp/>the<sp/>`AUTOLOAD`<sp/>global<sp/>variable.<sp/>You<sp/>can<sp/>also<sp/>have<sp/>multiple<sp/>autoload<sp/>paths.<sp/>If<sp/>you<sp/>have<sp/>your<sp/>classes<sp/>organized<sp/>and<sp/>in<sp/>different<sp/>folders,<sp/>you<sp/>can<sp/>instruct<sp/>the<sp/>framework<sp/>to<sp/>autoload<sp/>the<sp/>appropriate<sp/>class<sp/>when<sp/>a<sp/>static<sp/>method<sp/>is<sp/>called<sp/>or<sp/>when<sp/>an<sp/>object<sp/>is<sp/>instantiated.<sp/>Modify<sp/>the<sp/>`AUTOLOAD`<sp/>variable<sp/>this<sp/>way:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;AUTOLOAD&apos;,&apos;admin/autoload/;<sp/>user/autoload/;<sp/>default/&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">**Important:**<sp/>Except<sp/>for<sp/>the<sp/>.php<sp/>extension,<sp/>the<sp/>class<sp/>name<sp/>and<sp/>file<sp/>name<sp/>must<sp/>be<sp/>identical,<sp/>for<sp/>the<sp/>framework<sp/>to<sp/>autoload<sp/>your<sp/>class<sp/>properly.<sp/>The<sp/>basename<sp/>of<sp/>this<sp/>file<sp/>must<sp/>be<sp/>identical<sp/>to<sp/>your<sp/>class<sp/>invocation,<sp/>e.g.<sp/>F3<sp/>will<sp/>look<sp/>for<sp/>either<sp/>`Foo/BarBaz.php`<sp/>or<sp/>`foo/barbaz.php`<sp/>when<sp/>it<sp/>detects<sp/>a<sp/>`new<sp/>Foo\BarBaz`<sp/>statement<sp/>in<sp/>your<sp/>application.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Working<sp/>with<sp/>Namespaces</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`AUTOLOAD`<sp/>allows<sp/>class<sp/>hierarchies<sp/>to<sp/>reside<sp/>in<sp/>similarly-named<sp/>subfolders,<sp/>so<sp/>if<sp/>you<sp/>want<sp/>the<sp/>framework<sp/>to<sp/>autoload<sp/>a<sp/>PHP<sp/>5.3<sp/>namespaced<sp/>class<sp/>that&apos;s<sp/>invoked<sp/>in<sp/>the<sp/>following<sp/>manner:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;AUTOLOAD&apos;,&apos;autoload/&apos;);</highlight></codeline>
<codeline><highlight class="normal">$obj=new<sp/>Gadgets\iPad;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">You<sp/>can<sp/>create<sp/>a<sp/>folder<sp/>hierarchy<sp/>that<sp/>follows<sp/>the<sp/>same<sp/>structure.<sp/>Assuming<sp/>`/var/www/html/`<sp/>is<sp/>your<sp/>Web<sp/>root,<sp/>then<sp/>F3<sp/>will<sp/>look<sp/>for<sp/>the<sp/>class<sp/>in<sp/>`/var/www/html/autoload/gadgets/ipad.php`.<sp/>The<sp/>file<sp/>`ipad.php`<sp/>should<sp/>have<sp/>the<sp/>following<sp/>minimum<sp/>code:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">namespace<sp/>Gadgets;</highlight></codeline>
<codeline><highlight class="normal">class<sp/>iPad<sp/>{}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Remember:<sp/>All<sp/>directory<sp/>names<sp/>in<sp/>Fat-Free<sp/>must<sp/>end<sp/>with<sp/>a<sp/>slash.<sp/>You<sp/>can<sp/>assign<sp/>a<sp/>search<sp/>path<sp/>for<sp/>the<sp/>autoloader<sp/>as<sp/>follows:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;AUTOLOAD&apos;,&apos;main/;aux/&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Routing<sp/>to<sp/>a<sp/>Namespaced<sp/>Class</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3,<sp/>being<sp/>a<sp/>namespace-aware<sp/>framework,<sp/>allows<sp/>you<sp/>to<sp/>use<sp/>a<sp/>method<sp/>in<sp/>namespaced<sp/>class<sp/>as<sp/>a<sp/>route<sp/>handler,<sp/>and<sp/>there<sp/>are<sp/>several<sp/>ways<sp/>of<sp/>doing<sp/>it.<sp/>To<sp/>call<sp/>a<sp/>static<sp/>method:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;AUTOLOAD&apos;,&apos;classes/&apos;);</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET|POST<sp/>/&apos;,&apos;Main\Home::show&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>above<sp/>code<sp/>will<sp/>invoke<sp/>the<sp/>static<sp/>`show()`<sp/>method<sp/>of<sp/>the<sp/>class<sp/>`Home`<sp/>within<sp/>the<sp/>`Main`<sp/>namespace.<sp/>The<sp/>`Home`<sp/>class<sp/>must<sp/>be<sp/>saved<sp/>in<sp/>the<sp/>folder<sp/>`classes/main/home.php`<sp/>for<sp/>it<sp/>to<sp/>be<sp/>loaded<sp/>automatically.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>you<sp/>prefer<sp/>to<sp/>work<sp/>with<sp/>objects:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET|POST<sp/>/&apos;,&apos;Main\Home-&gt;show&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">will<sp/>instantiate<sp/>the<sp/>`Home`<sp/>class<sp/>at<sp/>runtime<sp/>and<sp/>call<sp/>the<sp/>`show()`<sp/>method<sp/>thereafter.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Event<sp/>Handlers</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3<sp/>has<sp/>a<sp/>couple<sp/>of<sp/>routing<sp/>event<sp/>listeners<sp/>that<sp/>might<sp/>help<sp/>you<sp/>improve<sp/>the<sp/>flow<sp/>and<sp/>structure<sp/>of<sp/>controller<sp/>classes.<sp/>Say<sp/>you<sp/>have<sp/>a<sp/>route<sp/>defined<sp/>as<sp/>follows:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET<sp/>/&apos;,&apos;Main-&gt;home&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>the<sp/>application<sp/>receives<sp/>an<sp/>HTTP<sp/>request<sp/>matching<sp/>the<sp/>above<sp/>route,<sp/>F3<sp/>instantiates<sp/>`Main`,<sp/>but<sp/>before<sp/>executing<sp/>the<sp/>`home()`<sp/>method,<sp/>the<sp/>framework<sp/>looks<sp/>for<sp/>a<sp/>method<sp/>in<sp/>this<sp/>class<sp/>named<sp/>`beforeRoute()`.<sp/>In<sp/>case<sp/>it&apos;s<sp/>found,<sp/>F3<sp/>runs<sp/>the<sp/>code<sp/>contained<sp/>in<sp/>the<sp/>`beforeRoute()`<sp/>event<sp/>handler<sp/>before<sp/>transferring<sp/>control<sp/>to<sp/>the<sp/>`home()`<sp/>method.<sp/>Once<sp/>this<sp/>is<sp/>accomplished,<sp/>the<sp/>framework<sp/>looks<sp/>for<sp/>an<sp/>`afterRoute()`<sp/>event<sp/>handler.<sp/>Like<sp/>`beforeRoute()`,<sp/>the<sp/>method<sp/>gets<sp/>executed<sp/>if<sp/>it&apos;s<sp/>defined.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Dynamic<sp/>Route<sp/>Handlers</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Here&apos;s<sp/>another<sp/>F3<sp/>goodie:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET<sp/>/products/@action&apos;,&apos;Products-&gt;@action&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>your<sp/>application<sp/>receives<sp/>a<sp/>request<sp/>for,<sp/>say,<sp/>`/products/itemize`,<sp/>F3<sp/>will<sp/>extract<sp/>the<sp/>`&apos;itemize&apos;`<sp/>string<sp/>from<sp/>the<sp/>URL<sp/>and<sp/>pass<sp/>it<sp/>on<sp/>to<sp/>the<sp/>`@action`<sp/>token<sp/>in<sp/>the<sp/>route<sp/>handler.<sp/>F3<sp/>will<sp/>then<sp/>look<sp/>for<sp/>a<sp/>class<sp/>named<sp/>`Products`<sp/>and<sp/>execute<sp/>the<sp/>`itemize()`<sp/>method.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Dynamic<sp/>route<sp/>handlers<sp/>may<sp/>have<sp/>various<sp/>forms:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">//<sp/>static<sp/>method</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET<sp/>/public/@genre&apos;,&apos;Main::@genre&apos;);</highlight></codeline>
<codeline><highlight class="normal">//<sp/>object<sp/>mode</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET<sp/>/public/@controller/@action&apos;,&apos;@controller-&gt;@action&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3<sp/>triggers<sp/>an<sp/>`HTTP<sp/>404<sp/>Not<sp/>Found`<sp/>error<sp/>at<sp/>runtime<sp/>if<sp/>it<sp/>cannot<sp/>transfer<sp/>control<sp/>to<sp/>the<sp/>class<sp/>or<sp/>method<sp/>associated<sp/>with<sp/>the<sp/>current<sp/>route,<sp/>i.e.<sp/>an<sp/>undefined<sp/>class<sp/>or<sp/>method.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>AJAX<sp/>and<sp/>Synchronous<sp/>Requests</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Routing<sp/>patterns<sp/>may<sp/>contain<sp/>modifiers<sp/>that<sp/>direct<sp/>the<sp/>framework<sp/>to<sp/>base<sp/>its<sp/>routing<sp/>decision<sp/>on<sp/>the<sp/>type<sp/>of<sp/>HTTP<sp/>request:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET<sp/>/example<sp/>[ajax]&apos;,&apos;Page-&gt;getFragment&apos;);</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET<sp/>/example<sp/>[sync]&apos;,&apos;Page-&gt;getFull&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>first<sp/>statement<sp/>will<sp/>route<sp/>the<sp/>HTTP<sp/>request<sp/>to<sp/>the<sp/>`Page-&gt;getFragment()`<sp/>callback<sp/>only<sp/>if<sp/>an<sp/>`X-Requested-With:<sp/>XMLHttpRequest`<sp/>header<sp/>(AJAX<sp/>object)<sp/>is<sp/>received<sp/>by<sp/>the<sp/>server.<sp/>If<sp/>an<sp/>ordinary<sp/>(synchronous)<sp/>request<sp/>is<sp/>detected,<sp/>F3<sp/>will<sp/>simply<sp/>drop<sp/>down<sp/>to<sp/>the<sp/>next<sp/>matching<sp/>pattern,<sp/>and<sp/>in<sp/>this<sp/>case<sp/>it<sp/>executes<sp/>the<sp/>`Page-&gt;getFull()`<sp/>callback.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>no<sp/>modifiers<sp/>are<sp/>defined<sp/>in<sp/>a<sp/>routing<sp/>pattern,<sp/>then<sp/>both<sp/>AJAX<sp/>and<sp/>synchronous<sp/>request<sp/>types<sp/>are<sp/>routed<sp/>to<sp/>the<sp/>specified<sp/>handler.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Route<sp/>pattern<sp/>modifiers<sp/>are<sp/>also<sp/>recognized<sp/>by<sp/>`$f3-&gt;map()`.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>Framework<sp/>Variables</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Basic<sp/>Use</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Variables<sp/>defined<sp/>in<sp/>Fat-Free<sp/>are<sp/>global,<sp/>i.e.<sp/>they<sp/>can<sp/>be<sp/>accessed<sp/>by<sp/>any<sp/>MVC<sp/>component.<sp/>Framework<sp/>globals<sp/>are<sp/>not<sp/>identical<sp/>to<sp/>PHP<sp/>globals.<sp/>An<sp/>F3<sp/>variable<sp/>named<sp/>`content`<sp/>is<sp/>not<sp/>identical<sp/>to<sp/>PHP&apos;s<sp/>`$content`.<sp/>F3<sp/>is<sp/>a<sp/>domain-specific<sp/>language<sp/>in<sp/>its<sp/>own<sp/>right<sp/>and<sp/>maintains<sp/>its<sp/>own<sp/>separate<sp/>symbol<sp/>table<sp/>for<sp/>system<sp/>and<sp/>application<sp/>variables.<sp/>The<sp/>framework,<sp/>like<sp/>every<sp/>well-designed<sp/>object-oriented<sp/>program,<sp/>does<sp/>not<sp/>pollute<sp/>the<sp/>PHP<sp/>global<sp/>namespace<sp/>with<sp/>constants,<sp/>variables,<sp/>functions<sp/>or<sp/>classes<sp/>that<sp/>might<sp/>conflict<sp/>with<sp/>any<sp/>application.<sp/>Unlike<sp/>other<sp/>frameworks,<sp/>F3<sp/>does<sp/>not<sp/>use<sp/>PHP&apos;s<sp/>`define()`<sp/>statement.<sp/>All<sp/>framework<sp/>constants<sp/>are<sp/>confined<sp/>to<sp/>classes.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">To<sp/>assign<sp/>a<sp/>value<sp/>to<sp/>a<sp/>Fat-Free<sp/>variable:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;var&apos;,value)</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">**Note:**<sp/>Fat-Free<sp/>variables<sp/>accept<sp/>all<sp/>PHP<sp/>data<sp/>types,<sp/>including<sp/>objects<sp/>and<sp/>anonymous<sp/>functions.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">To<sp/>set<sp/>several<sp/>variables<sp/>at<sp/>once:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;mset(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>array(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;foo&apos;=&gt;&apos;bar&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;baz&apos;=&gt;123</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">To<sp/>retrieve<sp/>the<sp/>value<sp/>of<sp/>a<sp/>framework<sp/>variable<sp/>named<sp/>`var`:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;get(&apos;var&apos;)</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">To<sp/>remove<sp/>a<sp/>Fat-Free<sp/>variable<sp/>from<sp/>memory<sp/>if<sp/>you<sp/>no<sp/>longer<sp/>need<sp/>it<sp/>(discard<sp/>it<sp/>so<sp/>it<sp/>doesn&apos;t<sp/>interfere<sp/>with<sp/>your<sp/>other<sp/>functions/methods),<sp/>use<sp/>the<sp/>method:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;clear(&apos;var&apos;)</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">To<sp/>find<sp/>out<sp/>if<sp/>a<sp/>variable<sp/>has<sp/>been<sp/>previously<sp/>defined:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;exists(&apos;var&apos;)</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Globals</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3<sp/>maintains<sp/>its<sp/>own<sp/>symbol<sp/>table<sp/>for<sp/>framework<sp/>and<sp/>application<sp/>variables,<sp/>which<sp/>are<sp/>independent<sp/>of<sp/>PHP&apos;s.<sp/>Some<sp/>variables<sp/>are<sp/>mapped<sp/>to<sp/>PHP<sp/>globals.<sp/>Fat-Free&apos;s<sp/>`SESSION`<sp/>is<sp/>equivalent<sp/>to<sp/>`$_SESSION`,<sp/>and<sp/>`REQUEST`<sp/>maps<sp/>to<sp/>`$_REQUEST`.<sp/>Use<sp/>of<sp/>framework<sp/>variables<sp/>is<sp/>recommended,<sp/>instead<sp/>of<sp/>PHP&apos;s,<sp/>to<sp/>help<sp/>you<sp/>with<sp/>data<sp/>transfer<sp/>across<sp/>different<sp/>functions,<sp/>classes<sp/>and<sp/>methods.<sp/>They<sp/>also<sp/>have<sp/>other<sp/>advantages:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>You<sp/>can<sp/>use<sp/>framework<sp/>variables<sp/>directly<sp/>in<sp/>your<sp/>templates.</highlight></codeline>
<codeline><highlight class="normal">*<sp/>You<sp/>don&apos;t<sp/>have<sp/>to<sp/>instruct<sp/>PHP<sp/>to<sp/>reference<sp/>a<sp/>variable<sp/>outside<sp/>the<sp/>current<sp/>scope<sp/>using<sp/>a<sp/>global<sp/>keyword<sp/>inside<sp/>each<sp/>function<sp/>or<sp/>method.<sp/>All<sp/>F3<sp/>variables<sp/>are<sp/>global<sp/>to<sp/>your<sp/>application.</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Setting<sp/>the<sp/>Fat-Free<sp/>equivalent<sp/>of<sp/>a<sp/>PHP<sp/>global<sp/>like<sp/>`SESSION`<sp/>also<sp/>changes<sp/>PHP&apos;s<sp/>underlying<sp/>`$_SESSION`.<sp/>Altering<sp/>the<sp/>latter<sp/>also<sp/>alters<sp/>the<sp/>framework<sp/>counterpart.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Fat-Free<sp/>does<sp/>not<sp/>maintain<sp/>just<sp/>a<sp/>dumb<sp/>storage<sp/>for<sp/>variables<sp/>and<sp/>their<sp/>values.<sp/>It<sp/>can<sp/>also<sp/>automate<sp/>session<sp/>management<sp/>and<sp/>other<sp/>things.<sp/>Assigning<sp/>or<sp/>retrieving<sp/>a<sp/>value<sp/>through<sp/>F3&apos;s<sp/>`SESSION`<sp/>variable<sp/>auto-starts<sp/>the<sp/>session.<sp/>If<sp/>you<sp/>use<sp/>`$_SESSION`<sp/>(or<sp/>session-related<sp/>functions)<sp/>directly,<sp/>instead<sp/>of<sp/>the<sp/>framework<sp/>variable<sp/>`SESSION`,<sp/>your<sp/>application<sp/>becomes<sp/>responsible<sp/>for<sp/>managing<sp/>sessions.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">As<sp/>a<sp/>rule,<sp/>framework<sp/>variables<sp/>do<sp/>not<sp/>persist<sp/>between<sp/>HTTP<sp/>requests.<sp/>Only<sp/>`SESSION`<sp/>and<sp/>`COOKIE`<sp/>(and<sp/>their<sp/>elements)<sp/>which<sp/>are<sp/>mapped<sp/>to<sp/>PHP&apos;s<sp/>`$_SESSION`<sp/>and<sp/>`$_COOKIE`<sp/>global<sp/>variables<sp/>are<sp/>exempt<sp/>from<sp/>the<sp/>stateless<sp/>nature<sp/>of<sp/>HTTP.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">There<sp/>are<sp/>several<sp/>predefined<sp/>global<sp/>variables<sp/>used<sp/>internally<sp/>by<sp/>Fat-Free,<sp/>and<sp/>you<sp/>can<sp/>certainly<sp/>utilize<sp/>them<sp/>in<sp/>your<sp/>application.<sp/>Be<sp/>sure<sp/>you<sp/>know<sp/>what<sp/>you&apos;re<sp/>doing.<sp/>Altering<sp/>some<sp/>Fat-Free<sp/>global<sp/>variables<sp/>may<sp/>result<sp/>in<sp/>unexpected<sp/>framework<sp/>behavior.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>framework<sp/>has<sp/>several<sp/>variables<sp/>to<sp/>help<sp/>you<sp/>keep<sp/>your<sp/>files<sp/>and<sp/>directory<sp/>structures<sp/>organized.<sp/>We&apos;ve<sp/>seen<sp/>how<sp/>we<sp/>can<sp/>automate<sp/>class<sp/>loading<sp/>by<sp/>using<sp/>the<sp/>`AUTOLOAD`.<sp/>There&apos;s<sp/>a<sp/>`UI`<sp/>global<sp/>variable,<sp/>which<sp/>contains<sp/>the<sp/>path<sp/>pointing<sp/>to<sp/>the<sp/>location<sp/>of<sp/>your<sp/>HTML<sp/>views/templates.<sp/>`DEBUG`<sp/>is<sp/>another<sp/>variable<sp/>you&apos;ll<sp/>be<sp/>using<sp/>quite<sp/>often<sp/>during<sp/>application<sp/>development<sp/>and<sp/>it&apos;s<sp/>used<sp/>for<sp/>setting<sp/>the<sp/>verbosity<sp/>of<sp/>error<sp/>traces.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Refer<sp/>to<sp/>the<sp/>[Quick<sp/>Reference](#quick-reference)<sp/>if<sp/>you<sp/>need<sp/>a<sp/>comprehensive<sp/>list<sp/>of<sp/>built-in<sp/>framework<sp/>variables.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Naming<sp/>Rules</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">A<sp/>framework<sp/>variable<sp/>may<sp/>contain<sp/>any<sp/>number<sp/>of<sp/>letters,<sp/>digits<sp/>and<sp/>underscores.<sp/>It<sp/>must<sp/>start<sp/>with<sp/>an<sp/>alpha<sp/>character<sp/>and<sp/>should<sp/>have<sp/>no<sp/>spaces.<sp/>Variable<sp/>names<sp/>are<sp/>case-sensitive.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3<sp/>uses<sp/>all-caps<sp/>for<sp/>internal<sp/>predefined<sp/>global<sp/>variables.<sp/>Nothing<sp/>stops<sp/>you<sp/>from<sp/>using<sp/>variable<sp/>names<sp/>consisting<sp/>of<sp/>all-caps<sp/>in<sp/>your<sp/>own<sp/>program,<sp/>but<sp/>as<sp/>a<sp/>general<sp/>rule,<sp/>stick<sp/>to<sp/>lowercase<sp/>(or<sp/>camelCase)<sp/>when<sp/>you<sp/>set<sp/>up<sp/>your<sp/>own<sp/>variables<sp/>so<sp/>you<sp/>can<sp/>avoid<sp/>any<sp/>possible<sp/>conflict<sp/>with<sp/>current<sp/>and<sp/>future<sp/>framework<sp/>releases.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">You<sp/>should<sp/>not<sp/>use<sp/>PHP<sp/>reserved<sp/>words<sp/>like<sp/>`if`,<sp/>`for`,<sp/>`class`,<sp/>`default`,<sp/>etc.<sp/>as<sp/>framework<sp/>variable<sp/>names.<sp/>These<sp/>may<sp/>cause<sp/>unpredictable<sp/>results.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Working<sp/>with<sp/>String<sp/>and<sp/>Array<sp/>Variables</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3<sp/>also<sp/>provides<sp/>a<sp/>number<sp/>of<sp/>tools<sp/>to<sp/>help<sp/>you<sp/>with<sp/>framework<sp/>variables.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;a&apos;,&apos;fire&apos;);</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;concat(&apos;a&apos;,&apos;cracker&apos;);</highlight></codeline>
<codeline><highlight class="normal">echo<sp/>$f3-&gt;get(&apos;a&apos;);<sp/>//<sp/>returns<sp/>the<sp/>string<sp/>&apos;firecracker&apos;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">$f3-&gt;copy(&apos;a&apos;,&apos;b&apos;);</highlight></codeline>
<codeline><highlight class="normal">echo<sp/>$f3-&gt;get(&apos;b&apos;);<sp/>//<sp/>returns<sp/>the<sp/>same<sp/>string:<sp/>&apos;firecracker&apos;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3<sp/>also<sp/>provides<sp/>some<sp/>primitive<sp/>methods<sp/>for<sp/>working<sp/>with<sp/>array<sp/>variables:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;colors&apos;,array(&apos;red&apos;,&apos;blue&apos;,&apos;yellow&apos;));</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;push(&apos;colors&apos;,&apos;green&apos;);<sp/>//<sp/>works<sp/>like<sp/>PHP&apos;s<sp/>array_push()</highlight></codeline>
<codeline><highlight class="normal">echo<sp/>$f3-&gt;pop(&apos;colors&apos;);<sp/>//<sp/>returns<sp/>&apos;green&apos;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">$f3-&gt;unshift(&apos;colors&apos;,&apos;purple&apos;);<sp/>//<sp/>similar<sp/>to<sp/>array_unshift()</highlight></codeline>
<codeline><highlight class="normal">echo<sp/>$f3-&gt;shift(&apos;colors&apos;);<sp/>//<sp/>returns<sp/>&apos;purple&apos;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;grays&apos;,array(&apos;light&apos;,&apos;dark&apos;));</highlight></codeline>
<codeline><highlight class="normal">$result=$f3-&gt;merge(&apos;colors&apos;,&apos;grays&apos;);<sp/>//<sp/>merges<sp/>the<sp/>two<sp/>arrays</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Do-It-Yourself<sp/>Directory<sp/>Structures</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Unlike<sp/>other<sp/>frameworks<sp/>that<sp/>have<sp/>rigid<sp/>folder<sp/>structures,<sp/>F3<sp/>gives<sp/>you<sp/>a<sp/>lot<sp/>of<sp/>flexibility.<sp/>You<sp/>can<sp/>have<sp/>a<sp/>folder<sp/>structure<sp/>that<sp/>looks<sp/>like<sp/>this<sp/>(parenthesized<sp/>words<sp/>in<sp/>all-caps<sp/>represent<sp/>the<sp/>F3<sp/>framework<sp/>variables<sp/>that<sp/>need<sp/>tweaking):-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">/<sp/>(your<sp/>Web<sp/>root,<sp/>where<sp/>index.php<sp/>is<sp/>located)</highlight></codeline>
<codeline><highlight class="normal">app/<sp/>(application<sp/>files)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>dict/<sp/>(LOCALES,<sp/>optional)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>controllers/</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>logs/<sp/>(LOGS,<sp/>optional)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>models/</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>views/<sp/>(UI)</highlight></codeline>
<codeline><highlight class="normal">css/</highlight></codeline>
<codeline><highlight class="normal">js/</highlight></codeline>
<codeline><highlight class="normal">lib/<sp/>(you<sp/>can<sp/>store<sp/>base.php<sp/>here)</highlight></codeline>
<codeline><highlight class="normal">tmp/<sp/>(TEMP,<sp/>used<sp/>by<sp/>the<sp/>framework)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>cache/<sp/>(CACHE)</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Feel<sp/>free<sp/>to<sp/>organize<sp/>your<sp/>files<sp/>and<sp/>directories<sp/>any<sp/>way<sp/>you<sp/>want.<sp/>Just<sp/>set<sp/>the<sp/>appropriate<sp/>F3<sp/>global<sp/>variables.<sp/>If<sp/>you<sp/>want<sp/>a<sp/>really<sp/>secure<sp/>site,<sp/>Fat-Free<sp/>even<sp/>allows<sp/>you<sp/>to<sp/>store<sp/>all<sp/>your<sp/>files<sp/>in<sp/>a<sp/>non-Web-accessible<sp/>directory.<sp/>The<sp/>only<sp/>requirement<sp/>is<sp/>that<sp/>you<sp/>leave<sp/>`index.php`,<sp/>`.htaccess`<sp/>and<sp/>your<sp/>public<sp/>files,<sp/>like<sp/>CSS,<sp/>JavaScript,<sp/>images,<sp/>etc.<sp/>in<sp/>a<sp/>path<sp/>visible<sp/>to<sp/>your<sp/>browser.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>About<sp/>the<sp/>F3<sp/>Error<sp/>Handler</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Fat-Free<sp/>generates<sp/>its<sp/>own<sp/>HTML<sp/>error<sp/>pages,<sp/>with<sp/>stack<sp/>traces<sp/>to<sp/>help<sp/>you<sp/>with<sp/>debugging.<sp/>Here&apos;s<sp/>an<sp/>example:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">&gt;<sp/>---</highlight></codeline>
<codeline><highlight class="normal">&gt;<sp/>###<sp/>Internal<sp/>Server<sp/>Error</highlight></codeline>
<codeline><highlight class="normal">&gt;<sp/>strpos()<sp/>expects<sp/>at<sp/>least<sp/>2<sp/>parameters,<sp/>0<sp/>given</highlight></codeline>
<codeline><highlight class="normal">&gt;</highlight></codeline>
<codeline><highlight class="normal">&gt;<sp/><sp/><sp/><sp/><sp/>‚Ä¢<sp/>var/html/dev/main.php:96<sp/>strpos()</highlight></codeline>
<codeline><highlight class="normal">&gt;<sp/><sp/><sp/><sp/><sp/>‚Ä¢<sp/>var/html/dev/index.php:16<sp/>Base-&gt;run()</highlight></codeline>
<codeline><highlight class="normal">&gt;<sp/>---</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>you<sp/>feel<sp/>it&apos;s<sp/>a<sp/>bit<sp/>too<sp/>plain<sp/>or<sp/>wish<sp/>to<sp/>do<sp/>other<sp/>things<sp/>when<sp/>the<sp/>error<sp/>occurs,<sp/>you<sp/>may<sp/>create<sp/>your<sp/>own<sp/>custom<sp/>error<sp/>handler:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;ONERROR&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>function($f3)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>custom<sp/>error<sp/>handler<sp/>code<sp/>goes<sp/>here</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>use<sp/>this<sp/>if<sp/>you<sp/>want<sp/>to<sp/>display<sp/>errors<sp/>in<sp/>a</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>format<sp/>consistent<sp/>with<sp/>your<sp/>site&apos;s<sp/>theme</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>echo<sp/>$f3-&gt;get(&apos;ERROR.status&apos;);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3<sp/>maintains<sp/>a<sp/>global<sp/>variable<sp/>containing<sp/>the<sp/>details<sp/>of<sp/>the<sp/>latest<sp/>error<sp/>that<sp/>occurred<sp/>in<sp/>your<sp/>application.<sp/>The<sp/>`ERROR`<sp/>variable<sp/>is<sp/>an<sp/>array<sp/>structured<sp/>as<sp/>follows:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">ERROR.code<sp/>-<sp/>displays<sp/>the<sp/>error<sp/>code<sp/>(404,<sp/>500,<sp/>etc.)</highlight></codeline>
<codeline><highlight class="normal">ERROR.status<sp/>-<sp/>header<sp/>and<sp/>page<sp/>title</highlight></codeline>
<codeline><highlight class="normal">ERROR.text<sp/>-<sp/>error<sp/>context</highlight></codeline>
<codeline><highlight class="normal">ERROR.trace<sp/>-<sp/>stack<sp/>trace</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">While<sp/>developing<sp/>your<sp/>application,<sp/>it&apos;s<sp/>best<sp/>to<sp/>set<sp/>the<sp/>debug<sp/>level<sp/>to<sp/>maximum<sp/>so<sp/>you<sp/>can<sp/>trace<sp/>all<sp/>errors<sp/>to<sp/>their<sp/>root<sp/>cause:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;DEBUG&apos;,3);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Just<sp/>insert<sp/>the<sp/>command<sp/>in<sp/>your<sp/>application&apos;s<sp/>bootstrap<sp/>sequence.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Once<sp/>your<sp/>application<sp/>is<sp/>ready<sp/>for<sp/>release,<sp/>simply<sp/>remove<sp/>the<sp/>statement<sp/>from<sp/>your<sp/>application,<sp/>or<sp/>replace<sp/>it<sp/>with:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;DEBUG&apos;,0);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">This<sp/>will<sp/>suppress<sp/>the<sp/>stack<sp/>trace<sp/>output<sp/>in<sp/>any<sp/>system-generated<sp/>HTML<sp/>error<sp/>page<sp/>(because<sp/>it&apos;s<sp/>not<sp/>meant<sp/>to<sp/>be<sp/>seen<sp/>by<sp/>your<sp/>site<sp/>visitors).</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`DEBUG`<sp/>can<sp/>have<sp/>values<sp/>ranging<sp/>from<sp/>0<sp/>(stack<sp/>trace<sp/>suppressed)<sp/>to<sp/>3<sp/>(most<sp/>verbose).</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">**Don&apos;t<sp/>forget!**<sp/>Stack<sp/>traces<sp/>may<sp/>contain<sp/>paths,<sp/>file<sp/>names,<sp/>database<sp/>commands,<sp/>user<sp/>names<sp/>and<sp/>passwords.<sp/>You<sp/>might<sp/>expose<sp/>your<sp/>Web<sp/>site<sp/>to<sp/>unnecessary<sp/>security<sp/>risks<sp/>if<sp/>you<sp/>fail<sp/>to<sp/>set<sp/>the<sp/>`DEBUG`<sp/>global<sp/>variable<sp/>to<sp/>0<sp/>in<sp/>a<sp/>production<sp/>environment.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Configuration<sp/>Files</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>your<sp/>application<sp/>needs<sp/>to<sp/>be<sp/>user-configurable,<sp/>F3<sp/>provides<sp/>a<sp/>handy<sp/>method<sp/>for<sp/>reading<sp/>configuration<sp/>files<sp/>to<sp/>set<sp/>up<sp/>your<sp/>application.<sp/>This<sp/>way,<sp/>you<sp/>and<sp/>your<sp/>users<sp/>can<sp/>tweak<sp/>the<sp/>application<sp/>without<sp/>altering<sp/>any<sp/>PHP<sp/>code.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Instead<sp/>of<sp/>creating<sp/>a<sp/>PHP<sp/>script<sp/>that<sp/>contains<sp/>the<sp/>following<sp/>sample<sp/>code:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;num&apos;,123);</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;str&apos;,&apos;abc&apos;);</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;hash&apos;,array(&apos;x&apos;=&gt;1,&apos;y&apos;=&gt;2,&apos;z&apos;=&gt;3));</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;items&apos;,array(7,8,9));</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;mix&apos;,array(&apos;this&apos;,123.45,FALSE));</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">You<sp/>can<sp/>construct<sp/>a<sp/>configuration<sp/>file<sp/>that<sp/>does<sp/>the<sp/>same<sp/>thing:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>ini</highlight></codeline>
<codeline><highlight class="normal">[globals]</highlight></codeline>
<codeline><highlight class="normal">num=123</highlight></codeline>
<codeline><highlight class="normal">;<sp/>this<sp/>is<sp/>a<sp/>regular<sp/>string</highlight></codeline>
<codeline><highlight class="normal">str=abc</highlight></codeline>
<codeline><highlight class="normal">;<sp/>another<sp/>way<sp/>of<sp/>assigning<sp/>strings</highlight></codeline>
<codeline><highlight class="normal">str=&quot;abc&quot;</highlight></codeline>
<codeline><highlight class="normal">;<sp/>this<sp/>is<sp/>an<sp/>array</highlight></codeline>
<codeline><highlight class="normal">hash[x]=1</highlight></codeline>
<codeline><highlight class="normal">hash[y]=2</highlight></codeline>
<codeline><highlight class="normal">hash[z]=3</highlight></codeline>
<codeline><highlight class="normal">;<sp/>dot-notation<sp/>is<sp/>recognized<sp/>too</highlight></codeline>
<codeline><highlight class="normal">hash.x=1</highlight></codeline>
<codeline><highlight class="normal">hash.y=2</highlight></codeline>
<codeline><highlight class="normal">hash.z=3</highlight></codeline>
<codeline><highlight class="normal">;<sp/>this<sp/>is<sp/>also<sp/>an<sp/>array</highlight></codeline>
<codeline><highlight class="normal">items=7,8,9</highlight></codeline>
<codeline><highlight class="normal">;<sp/>array<sp/>with<sp/>mixed<sp/>elements</highlight></codeline>
<codeline><highlight class="normal">mix=&quot;this&quot;,123.45,FALSE</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Instead<sp/>of<sp/>lengthy<sp/>`$f3-&gt;set()`<sp/>statements<sp/>in<sp/>your<sp/>code,<sp/>you<sp/>can<sp/>instruct<sp/>the<sp/>framework<sp/>to<sp/>load<sp/>a<sp/>configuration<sp/>file<sp/>as<sp/>code<sp/>substitute.<sp/>Let&apos;s<sp/>save<sp/>the<sp/>above<sp/>text<sp/>as<sp/>setup.cfg.<sp/>We<sp/>can<sp/>then<sp/>call<sp/>it<sp/>with<sp/>a<sp/>simple:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;config(&apos;setup.cfg&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">String<sp/>values<sp/>need<sp/>not<sp/>be<sp/>quoted,<sp/>unless<sp/>you<sp/>want<sp/>leading<sp/>or<sp/>trailing<sp/>spaces<sp/>included.<sp/>If<sp/>a<sp/>comma<sp/>should<sp/>be<sp/>treated<sp/>as<sp/>part<sp/>of<sp/>a<sp/>string,<sp/>enclose<sp/>the<sp/>string<sp/>using<sp/>double-quotes<sp/>-<sp/>otherwise,<sp/>the<sp/>value<sp/>will<sp/>be<sp/>treated<sp/>as<sp/>an<sp/>array<sp/>(the<sp/>comma<sp/>is<sp/>used<sp/>as<sp/>an<sp/>array<sp/>element<sp/>separator).<sp/>Strings<sp/>can<sp/>span<sp/>multiple<sp/>lines:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>ini</highlight></codeline>
<codeline><highlight class="normal">[globals]</highlight></codeline>
<codeline><highlight class="normal">str=&quot;this<sp/>is<sp/>a<sp/>\</highlight></codeline>
<codeline><highlight class="normal">very<sp/>long<sp/>\</highlight></codeline>
<codeline><highlight class="normal">string&quot;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3<sp/>also<sp/>gives<sp/>you<sp/>the<sp/>ability<sp/>to<sp/>define<sp/>HTTP<sp/>routes<sp/>in<sp/>configuration<sp/>files:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>ini</highlight></codeline>
<codeline><highlight class="normal">[routes]</highlight></codeline>
<codeline><highlight class="normal">GET<sp/>/=home</highlight></codeline>
<codeline><highlight class="normal">GET<sp/>/404=App-&gt;page404</highlight></codeline>
<codeline><highlight class="normal">GET<sp/>/page/@num=Page-&gt;@controller</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Route<sp/>maps<sp/>can<sp/>be<sp/>defined<sp/>in<sp/>configuration<sp/>files<sp/>too:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>ini</highlight></codeline>
<codeline><highlight class="normal">[maps]</highlight></codeline>
<codeline><highlight class="normal">/blog=Blog\Login</highlight></codeline>
<codeline><highlight class="normal">/blog/@controller=Blog\@controller</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>`[globals]`,<sp/>`[routes]`,<sp/>and<sp/>`[maps]`<sp/>section<sp/>headers<sp/>are<sp/>required.<sp/>You<sp/>can<sp/>combine<sp/>both<sp/>sections<sp/>in<sp/>a<sp/>single<sp/>configuration<sp/>file<sp/>-<sp/>although<sp/>having<sp/>`[routes]`<sp/>and<sp/>`[maps]`<sp/>in<sp/>a<sp/>separate<sp/>file<sp/>is<sp/>recommended.<sp/>This<sp/>way<sp/>you<sp/>can<sp/>allow<sp/>end-users<sp/>to<sp/>modify<sp/>some<sp/>application-specific<sp/>flags,<sp/>and<sp/>at<sp/>the<sp/>same<sp/>time<sp/>restrict<sp/>them<sp/>from<sp/>meddling<sp/>with<sp/>your<sp/>routing<sp/>logic.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>Views<sp/>and<sp/>Templates</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Separation<sp/>of<sp/>Concerns</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">A<sp/>user<sp/>interface<sp/>like<sp/>an<sp/>HTML<sp/>page<sp/>should<sp/>be<sp/>independent<sp/>of<sp/>the<sp/>underlying<sp/>PHP<sp/>code<sp/>related<sp/>to<sp/>routing<sp/>and<sp/>business<sp/>logic.<sp/>This<sp/>is<sp/>fundamental<sp/>to<sp/>the<sp/>MVC<sp/>paradigm.<sp/>A<sp/>basic<sp/>revision<sp/>like<sp/>converting<sp/>`&lt;h3&gt;`<sp/>to<sp/>`&lt;p&gt;`<sp/>should<sp/>not<sp/>demand<sp/>a<sp/>change<sp/>in<sp/>your<sp/>application<sp/>code.<sp/>In<sp/>the<sp/>same<sp/>manner,<sp/>transforming<sp/>a<sp/>simple<sp/>route<sp/>like<sp/>`GET<sp/>/about`<sp/>to<sp/>`GET<sp/>/about-us`<sp/>should<sp/>not<sp/>have<sp/>any<sp/>effect<sp/>on<sp/>your<sp/>user<sp/>interface<sp/>and<sp/>business<sp/>logic,<sp/>(the<sp/>view<sp/>and<sp/>model<sp/>in<sp/>MVC,<sp/>or<sp/>representation<sp/>and<sp/>method<sp/>in<sp/>RMR).</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Mixing<sp/>programming<sp/>constructs<sp/>and<sp/>user<sp/>interface<sp/>components<sp/>in<sp/>a<sp/>single<sp/>file,<sp/>like<sp/>spaghetti<sp/>coding,<sp/>makes<sp/>future<sp/>application<sp/>maintenance<sp/>a<sp/>nightmare.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>PHP<sp/>as<sp/>a<sp/>Template<sp/>Engine</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3<sp/>supports<sp/>PHP<sp/>as<sp/>a<sp/>template<sp/>engine.<sp/>Take<sp/>a<sp/>look<sp/>at<sp/>this<sp/>HTML<sp/>fragment<sp/>saved<sp/>as<sp/>`template.htm`:-.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">&lt;p&gt;Hello,<sp/>&lt;?php<sp/>echo<sp/>$name;<sp/>?&gt;!&lt;/p&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>short<sp/>tags<sp/>are<sp/>enabled<sp/>on<sp/>your<sp/>server,<sp/>this<sp/>should<sp/>work<sp/>too:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">&lt;p&gt;Hello,<sp/>&lt;?=<sp/>$name<sp/>?&gt;&lt;/p&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">To<sp/>display<sp/>this<sp/>template,<sp/>you<sp/>can<sp/>have<sp/>PHP<sp/>code<sp/>that<sp/>looks<sp/>like<sp/>this<sp/>(stored<sp/>in<sp/>a<sp/>file<sp/>separate<sp/>from<sp/>the<sp/>template):-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3=require(&apos;lib/base.php&apos;);</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET<sp/>/&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>function($f3)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$f3-&gt;set(&apos;name&apos;,&apos;world&apos;);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$view=new<sp/>View;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>echo<sp/>$view-&gt;render(&apos;template.htm&apos;);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Previous<sp/>two<sp/>lines<sp/>can<sp/>be<sp/>shortened<sp/>to:-</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>echo<sp/>View::instance()-&gt;render(&apos;template.htm&apos;);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;run();</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>only<sp/>issue<sp/>with<sp/>using<sp/>PHP<sp/>as<sp/>a<sp/>template<sp/>engine,<sp/>due<sp/>to<sp/>the<sp/>embedded<sp/>PHP<sp/>code<sp/>in<sp/>these<sp/>files,<sp/>is<sp/>the<sp/>conscious<sp/>effort<sp/>needed<sp/>to<sp/>stick<sp/>to<sp/>the<sp/>guidelines<sp/>on<sp/>separation<sp/>of<sp/>concerns<sp/>and<sp/>resist<sp/>the<sp/>temptation<sp/>of<sp/>mixing<sp/>business<sp/>logic<sp/>with<sp/>your<sp/>user<sp/>interface.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>A<sp/>Quick<sp/>Look<sp/>at<sp/>the<sp/>F3<sp/>Template<sp/>Language</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">As<sp/>an<sp/>alternative<sp/>to<sp/>PHP,<sp/>you<sp/>can<sp/>use<sp/>F3&apos;s<sp/>own<sp/>template<sp/>engine.<sp/>The<sp/>above<sp/>HTML<sp/>fragment<sp/>can<sp/>be<sp/>rewritten<sp/>as:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">&lt;p&gt;Hello,<sp/>{{<sp/>@name<sp/>}}!&lt;/p&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">and<sp/>the<sp/>code<sp/>needed<sp/>to<sp/>view<sp/>this<sp/>template:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3=require(&apos;lib/base.php&apos;);</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET<sp/>/&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>function($f3)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$f3-&gt;set(&apos;name&apos;,&apos;world&apos;);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$template=new<sp/>Template;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>echo<sp/>$template-&gt;render(&apos;template.htm&apos;);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Above<sp/>lines<sp/>can<sp/>be<sp/>written<sp/>as:-</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>echo<sp/>Template::instance()-&gt;render(&apos;template.htm&apos;);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;run();</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Like<sp/>routing<sp/>tokens<sp/>used<sp/>for<sp/>catching<sp/>variables<sp/>in<sp/>URLs<sp/>(still<sp/>remember<sp/>the<sp/>`GET<sp/>/brew/@count`<sp/>example<sp/>in<sp/>the<sp/>previous<sp/>section?),<sp/>F3<sp/>template<sp/>tokens<sp/>begin<sp/>with<sp/>the<sp/>`@`<sp/>symbol<sp/>followed<sp/>by<sp/>a<sp/>series<sp/>of<sp/>letters<sp/>and<sp/>digits<sp/>enclosed<sp/>in<sp/>curly<sp/>braces.<sp/>The<sp/>first<sp/>character<sp/>must<sp/>be<sp/>alpha.<sp/>Template<sp/>tokens<sp/>have<sp/>a<sp/>one-to-one<sp/>correspondence<sp/>with<sp/>framework<sp/>variables.<sp/>The<sp/>framework<sp/>automatically<sp/>replaces<sp/>a<sp/>token<sp/>with<sp/>the<sp/>value<sp/>stored<sp/>in<sp/>a<sp/>variable<sp/>of<sp/>the<sp/>same<sp/>name.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">In<sp/>our<sp/>example,<sp/>F3<sp/>replaces<sp/>the<sp/>`@name`<sp/>token<sp/>in<sp/>our<sp/>template<sp/>with<sp/>the<sp/>value<sp/>we<sp/>assigned<sp/>to<sp/>the<sp/>name<sp/>variable.<sp/>At<sp/>runtime,<sp/>the<sp/>output<sp/>of<sp/>the<sp/>above<sp/>code<sp/>will<sp/>be:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">&lt;p&gt;Hello,<sp/>world&lt;/p&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Worried<sp/>about<sp/>performance<sp/>of<sp/>F3<sp/>templates?<sp/>At<sp/>runtime,<sp/>the<sp/>framework<sp/>parses<sp/>and<sp/>compiles/converts<sp/>an<sp/>F3<sp/>template<sp/>to<sp/>PHP<sp/>code<sp/>the<sp/>first<sp/>time<sp/>it&apos;s<sp/>displayed<sp/>via<sp/>`$template-&gt;render()`.<sp/>The<sp/>framework<sp/>then<sp/>uses<sp/>this<sp/>compiled<sp/>code<sp/>in<sp/>all<sp/>subsequent<sp/>calls.<sp/>Hence,<sp/>performance<sp/>should<sp/>be<sp/>the<sp/>same<sp/>as<sp/>PHP<sp/>templates,<sp/>if<sp/>not<sp/>better<sp/>due<sp/>to<sp/>code<sp/>optimization<sp/>done<sp/>by<sp/>the<sp/>template<sp/>compiler<sp/>when<sp/>more<sp/>complex<sp/>templates<sp/>are<sp/>involved.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Whether<sp/>you<sp/>use<sp/>PHP&apos;s<sp/>template<sp/>engine<sp/>or<sp/>F3&apos;s<sp/>own,<sp/>template<sp/>rendering<sp/>can<sp/>be<sp/>significantly<sp/>faster<sp/>if<sp/>you<sp/>have<sp/>APC,<sp/>WinCache<sp/>or<sp/>XCache<sp/>available<sp/>on<sp/>your<sp/>server.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">As<sp/>mentioned<sp/>earlier,<sp/>framework<sp/>variables<sp/>can<sp/>hold<sp/>any<sp/>PHP<sp/>data<sp/>type.<sp/>However,<sp/>usage<sp/>of<sp/>non-scalar<sp/>data<sp/>types<sp/>in<sp/>F3<sp/>templates<sp/>may<sp/>produce<sp/>strange<sp/>results<sp/>if<sp/>you&apos;re<sp/>not<sp/>careful.<sp/>Expressions<sp/>in<sp/>curly<sp/>braces<sp/>will<sp/>always<sp/>be<sp/>evaluated<sp/>and<sp/>converted<sp/>to<sp/>string.<sp/>You<sp/>should<sp/>limit<sp/>your<sp/>user<sp/>interface<sp/>variables<sp/>to<sp/>simple<sp/>scalars:-<sp/>`string`,<sp/>`integer`,<sp/>`boolean`<sp/>or<sp/>`float`<sp/>data<sp/>types.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">But<sp/>what<sp/>about<sp/>arrays?<sp/>Fat-Free<sp/>recognizes<sp/>arrays<sp/>and<sp/>you<sp/>can<sp/>employ<sp/>them<sp/>in<sp/>your<sp/>templates.<sp/>You<sp/>can<sp/>have<sp/>something<sp/>like:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">&lt;p&gt;{{<sp/>@buddy[0]<sp/>}},<sp/>{{<sp/>@buddy[1]<sp/>}},<sp/>and<sp/>{{<sp/>@buddy[2]<sp/>}}&lt;/p&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">And<sp/>populate<sp/>the<sp/>`@buddy`<sp/>array<sp/>in<sp/>your<sp/>PHP<sp/>code<sp/>before<sp/>serving<sp/>the<sp/>template:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;buddy&apos;,array(&apos;Tom&apos;,&apos;Dick&apos;,&apos;Harry&apos;));</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">However,<sp/>if<sp/>you<sp/>simply<sp/>insert<sp/>`{{<sp/>@buddy<sp/>}}`<sp/>in<sp/>your<sp/>template,<sp/>PHP<sp/>5.3<sp/>will<sp/>replace<sp/>it<sp/>with<sp/>`&apos;Array&apos;`<sp/>because<sp/>it<sp/>converts<sp/>the<sp/>token<sp/>to<sp/>a<sp/>string.<sp/>PHP<sp/>5.4,<sp/>on<sp/>the<sp/>other<sp/>hand,<sp/>will<sp/>generate<sp/>an<sp/>`Array<sp/>to<sp/>string<sp/>conversion`<sp/>notice<sp/>at<sp/>runtime.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3<sp/>allows<sp/>you<sp/>to<sp/>embed<sp/>expressions<sp/>in<sp/>templates.<sp/>These<sp/>expressions<sp/>may<sp/>take<sp/>on<sp/>various<sp/>forms,<sp/>like<sp/>arithmetic<sp/>calculations,<sp/>boolean<sp/>expressions,<sp/>PHP<sp/>constants,<sp/>etc.<sp/>Here<sp/>are<sp/>a<sp/>few<sp/>examples:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">{{<sp/>2*(@page-1)<sp/>}}</highlight></codeline>
<codeline><highlight class="normal">{{<sp/>(int)765.29+1.2e3<sp/>}}</highlight></codeline>
<codeline><highlight class="normal">&lt;option<sp/>value=&quot;F&quot;<sp/>{{<sp/>@active?&apos;selected=&quot;selected&quot;&apos;:&apos;&apos;<sp/>}}&gt;Female&lt;/option&gt;</highlight></codeline>
<codeline><highlight class="normal">{{<sp/>var_dump(@xyz)<sp/>}}</highlight></codeline>
<codeline><highlight class="normal">&lt;p&gt;That<sp/>is<sp/>{{<sp/>preg_match(&apos;/Yes/i&apos;,@response)?&apos;correct&apos;:&apos;wrong&apos;<sp/>}}!&lt;/p&gt;</highlight></codeline>
<codeline><highlight class="normal">{{<sp/>@obj-&gt;property<sp/>}}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">An<sp/>additional<sp/>note<sp/>about<sp/>array<sp/>expressions:<sp/>Take<sp/>note<sp/>that<sp/>`@foo.@bar`<sp/>is<sp/>a<sp/>string<sp/>concatenation<sp/>`$foo.$bar`),<sp/>whereas<sp/>`@foo.bar`<sp/>translates<sp/>to<sp/>`$foo[&apos;bar&apos;]`.<sp/>If<sp/>`$foo[$bar]`<sp/>is<sp/>what<sp/>you<sp/>intended,<sp/>use<sp/>the<sp/>`@foo[@bar]`<sp/>regular<sp/>notation.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Framework<sp/>variables<sp/>may<sp/>also<sp/>contain<sp/>anonymous<sp/>functions:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;func&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>function($a,$b)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>$a.&apos;,<sp/>&apos;.$b;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>F3<sp/>template<sp/>engine<sp/>will<sp/>interpret<sp/>the<sp/>token<sp/>as<sp/>expected,<sp/>if<sp/>you<sp/>specify<sp/>the<sp/>following<sp/>expression:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">{{<sp/>@func(&apos;hello&apos;,&apos;world&apos;)<sp/>}}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Templates<sp/>Within<sp/>Templates</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Simple<sp/>variable<sp/>substitution<sp/>is<sp/>one<sp/>thing<sp/>all<sp/>template<sp/>engines<sp/>have.<sp/>Fat-Free<sp/>has<sp/>more<sp/>up<sp/>its<sp/>sleeves:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">&lt;include<sp/>href=&quot;header.htm&quot;<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>&lt;include&gt;<sp/>directive<sp/>will<sp/>embed<sp/>the<sp/>contents<sp/>of<sp/>the<sp/>header.htm<sp/>template<sp/>at<sp/>the<sp/>exact<sp/>position<sp/>where<sp/>the<sp/>directive<sp/>is<sp/>stated.<sp/>You<sp/>can<sp/>also<sp/>have<sp/>dynamic<sp/>content<sp/>in<sp/>the<sp/>form<sp/>of:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">&lt;include<sp/>href=&quot;{{<sp/>@content<sp/>}}&quot;<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">A<sp/>practical<sp/>use<sp/>for<sp/>such<sp/>template<sp/>directive<sp/>is<sp/>when<sp/>you<sp/>have<sp/>several<sp/>pages<sp/>with<sp/>a<sp/>common<sp/>HTML<sp/>layout<sp/>but<sp/>with<sp/>different<sp/>content.<sp/>Instructing<sp/>the<sp/>framework<sp/>to<sp/>insert<sp/>a<sp/>sub-template<sp/>into<sp/>your<sp/>main<sp/>template<sp/>is<sp/>as<sp/>simple<sp/>as<sp/>writing<sp/>the<sp/>following<sp/>PHP<sp/>code:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">//<sp/>switch<sp/>content<sp/>to<sp/>your<sp/>blog<sp/>sub-template</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;content&apos;,&apos;blog.htm&apos;);</highlight></codeline>
<codeline><highlight class="normal">//<sp/>in<sp/>another<sp/>route,<sp/>switch<sp/>content<sp/>to<sp/>the<sp/>wiki<sp/>sub-template</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;content&apos;,&apos;wiki.htm&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">A<sp/>sub-template<sp/>may<sp/>in<sp/>turn<sp/>contain<sp/>any<sp/>number<sp/>of<sp/>&lt;include&gt;<sp/>directives.<sp/>F3<sp/>allows<sp/>unlimited<sp/>nested<sp/>templates.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">You<sp/>can<sp/>specify<sp/>filenames<sp/>with<sp/>something<sp/>other<sp/>than<sp/>.htm<sp/>or<sp/>.html<sp/>file<sp/>extensions,<sp/>but<sp/>it&apos;s<sp/>easier<sp/>to<sp/>preview<sp/>them<sp/>in<sp/>your<sp/>Web<sp/>browser<sp/>during<sp/>the<sp/>development<sp/>and<sp/>debugging<sp/>phase.<sp/>The<sp/>template<sp/>engine<sp/>is<sp/>not<sp/>limited<sp/>to<sp/>rendering<sp/>HTML<sp/>files.<sp/>In<sp/>fact<sp/>you<sp/>can<sp/>use<sp/>the<sp/>template<sp/>engine<sp/>to<sp/>render<sp/>other<sp/>kinds<sp/>of<sp/>files.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>`&lt;include&gt;`<sp/>directive<sp/>also<sp/>has<sp/>an<sp/>optional<sp/>`if`<sp/>attribute<sp/>so<sp/>you<sp/>can<sp/>specify<sp/>a<sp/>condition<sp/>that<sp/>needs<sp/>to<sp/>be<sp/>satisfied<sp/>before<sp/>the<sp/>sub-template<sp/>is<sp/>inserted:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">&lt;include<sp/>if=&quot;{{<sp/>count(@items)<sp/>}}&quot;<sp/>href=&quot;items.htm&quot;<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Exclusion<sp/>of<sp/>Segments</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">During<sp/>the<sp/>course<sp/>of<sp/>writing/debugging<sp/>F3-powered<sp/>programs<sp/>and<sp/>designing<sp/>templates,<sp/>there<sp/>may<sp/>be<sp/>instances<sp/>when<sp/>disabling<sp/>the<sp/>display<sp/>of<sp/>a<sp/>block<sp/>of<sp/>HTML<sp/>may<sp/>be<sp/>handy.<sp/>You<sp/>can<sp/>use<sp/>the<sp/>`&lt;exclude&gt;`<sp/>directive<sp/>for<sp/>this<sp/>purpose:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">&lt;exclude&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;p&gt;A<sp/>chunk<sp/>of<sp/>HTML<sp/>we<sp/>don&apos;t<sp/>want<sp/>displayed<sp/>at<sp/>the<sp/>moment&lt;/p&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;/exclude&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">That&apos;s<sp/>like<sp/>the<sp/>`&lt;!--<sp/>comment<sp/>--&gt;`<sp/>HTML<sp/>comment<sp/>tag,<sp/>but<sp/>the<sp/>`&lt;exclude&gt;`<sp/>directive<sp/>makes<sp/>the<sp/>HTML<sp/>block<sp/>totally<sp/>invisible<sp/>once<sp/>the<sp/>template<sp/>is<sp/>rendered.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Here&apos;s<sp/>another<sp/>way<sp/>of<sp/>excluding<sp/>template<sp/>content<sp/>or<sp/>adding<sp/>comments:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">{*<sp/>&lt;p&gt;A<sp/>chunk<sp/>of<sp/>HTML<sp/>we<sp/>don&apos;t<sp/>want<sp/>displayed<sp/>at<sp/>the<sp/>moment&lt;/p&gt;<sp/>*}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Conditional<sp/>Segments</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Another<sp/>useful<sp/>template<sp/>feature<sp/>is<sp/>the<sp/>`&lt;check&gt;`<sp/>directive.<sp/>It<sp/>allows<sp/>you<sp/>to<sp/>embed<sp/>an<sp/>HTML<sp/>fragment<sp/>depending<sp/>on<sp/>the<sp/>evaluation<sp/>of<sp/>a<sp/>certain<sp/>condition.<sp/>Here<sp/>are<sp/>a<sp/>few<sp/>examples:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">&lt;check<sp/>if=&quot;{{<sp/>@page==&apos;Home&apos;<sp/>}}&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;false&gt;&lt;span&gt;Inserted<sp/>if<sp/>condition<sp/>is<sp/>false&lt;/span&gt;&lt;/false&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;/check&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;check<sp/>if=&quot;{{<sp/>@gender==&apos;M&apos;<sp/>}}&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;true&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;div&gt;Appears<sp/>when<sp/>condition<sp/>is<sp/>true&lt;/div&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;/true&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;false&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;div&gt;Appears<sp/>when<sp/>condition<sp/>is<sp/>false&lt;/div&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;/false&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;/check&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">You<sp/>can<sp/>have<sp/>as<sp/>many<sp/>nested<sp/>`&lt;check&gt;`<sp/>directives<sp/>as<sp/>you<sp/>need.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">An<sp/>F3<sp/>expression<sp/>inside<sp/>an<sp/>if<sp/>attribute<sp/>that<sp/>equates<sp/>to<sp/>`NULL`,<sp/>an<sp/>empty<sp/>string,<sp/>a<sp/>boolean<sp/>`FALSE`,<sp/>an<sp/>empty<sp/>array<sp/>or<sp/>zero,<sp/>automatically<sp/>invokes<sp/>`&lt;false&gt;`.<sp/>If<sp/>your<sp/>template<sp/>has<sp/>no<sp/>`&lt;false&gt;`<sp/>block,<sp/>then<sp/>the<sp/>`&lt;true&gt;`<sp/>opening<sp/>and<sp/>closing<sp/>tags<sp/>are<sp/>optional:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">&lt;check<sp/>if=&quot;{{<sp/>@loggedin<sp/>}}&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;p&gt;HTML<sp/>chunk<sp/>to<sp/>be<sp/>included<sp/>if<sp/>condition<sp/>is<sp/>true&lt;/p&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;/check&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Repeating<sp/>Segments</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Fat-Free<sp/>can<sp/>also<sp/>handle<sp/>repetitive<sp/>HTML<sp/>blocks:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">&lt;repeat<sp/>group=&quot;{{<sp/>@fruits<sp/>}}&quot;<sp/>value=&quot;{{<sp/>@fruit<sp/>}}&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;p&gt;{{<sp/>trim(@fruit)<sp/>}}&lt;/p&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;/repeat&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>`group`<sp/>attribute<sp/>`@fruits`<sp/>inside<sp/>the<sp/>`&lt;repeat&gt;`<sp/>directive<sp/>must<sp/>be<sp/>an<sp/>array<sp/>and<sp/>should<sp/>be<sp/>set<sp/>in<sp/>your<sp/>PHP<sp/>code<sp/>accordingly:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;fruits&apos;,array(&apos;apple&apos;,&apos;orange<sp/>&apos;,&apos;<sp/>banana&apos;));</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Nothing<sp/>is<sp/>gained<sp/>by<sp/>assigning<sp/>a<sp/>value<sp/>to<sp/>`@fruit`<sp/>in<sp/>your<sp/>application<sp/>code.<sp/>Fat-Free<sp/>ignores<sp/>any<sp/>preset<sp/>value<sp/>it<sp/>may<sp/>have<sp/>because<sp/>it<sp/>uses<sp/>the<sp/>variable<sp/>to<sp/>represent<sp/>the<sp/>current<sp/>item<sp/>during<sp/>iteration<sp/>over<sp/>the<sp/>group.<sp/>The<sp/>output<sp/>of<sp/>the<sp/>above<sp/>HTML<sp/>template<sp/>fragment<sp/>and<sp/>the<sp/>corresponding<sp/>PHP<sp/>code<sp/>becomes:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">&lt;p&gt;apple&lt;/p&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;p&gt;orange&lt;/p&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;p&gt;banana&lt;/p&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>framework<sp/>allows<sp/>unlimited<sp/>nesting<sp/>of<sp/>`&lt;repeat&gt;`<sp/>blocks:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">&lt;repeat<sp/>group=&quot;{{<sp/>@div<sp/>}}&quot;<sp/>key=&quot;{{<sp/>@ikey<sp/>}}&quot;<sp/>value=&quot;{{<sp/>@idiv<sp/>}}&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;div&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;p&gt;&lt;span&gt;&lt;b&gt;{{<sp/>@ikey<sp/>}}&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;p&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;repeat<sp/>group=&quot;{{<sp/>@idiv<sp/>}}&quot;<sp/>value=&quot;{{<sp/>@ispan<sp/>}}&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;span&gt;{{<sp/>@ispan<sp/>}}&lt;/span&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;/repeat&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;/p&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;/div&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;/repeat&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Apply<sp/>the<sp/>following<sp/>F3<sp/>command:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;div&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>array(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;coffee&apos;=&gt;array(&apos;arabica&apos;,&apos;barako&apos;,&apos;liberica&apos;,&apos;kopiluwak&apos;),</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;tea&apos;=&gt;array(&apos;darjeeling&apos;,&apos;pekoe&apos;,&apos;samovar&apos;)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">As<sp/>a<sp/>result,<sp/>you<sp/>get<sp/>the<sp/>following<sp/>HTML<sp/>fragment:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">&lt;div&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;p&gt;&lt;span&gt;&lt;b&gt;coffee&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;p&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;span&gt;arabica&lt;/span&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;span&gt;barako&lt;/span&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;span&gt;liberica&lt;/span&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;span&gt;kopiluwak&lt;/span&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;p&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;/div&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;div&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;p&gt;&lt;span&gt;&lt;b&gt;tea&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;p&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;span&gt;darjeeling&lt;/span&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;span&gt;pekoe&lt;/span&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;span&gt;samovar&lt;/span&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;/p&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;/div&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Amazing,<sp/>isn&apos;t<sp/>it?<sp/>And<sp/>the<sp/>only<sp/>thing<sp/>you<sp/>had<sp/>to<sp/>do<sp/>in<sp/>PHP<sp/>was<sp/>to<sp/>define<sp/>the<sp/>contents<sp/>of<sp/>a<sp/>single<sp/>F3<sp/>variable<sp/>`div`<sp/>to<sp/>replace<sp/>the<sp/>`@div`<sp/>token.<sp/>Fat-Free<sp/>makes<sp/>both<sp/>programming<sp/>and<sp/>Web<sp/>template<sp/>design<sp/>really<sp/>easy.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>`&lt;repeat&gt;`<sp/>template<sp/>directive&apos;s<sp/>`value`<sp/>attribute<sp/>returns<sp/>the<sp/>value<sp/>of<sp/>the<sp/>current<sp/>element<sp/>in<sp/>the<sp/>iteration.<sp/>If<sp/>you<sp/>need<sp/>to<sp/>get<sp/>the<sp/>array<sp/>key<sp/>of<sp/>the<sp/>current<sp/>element,<sp/>use<sp/>the<sp/>`key`<sp/>attribute<sp/>instead.<sp/>The<sp/>`key`<sp/>attribute<sp/>is<sp/>optional.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`&lt;repeat&gt;`<sp/>also<sp/>has<sp/>an<sp/>optional<sp/>counter<sp/>attribute<sp/>that<sp/>can<sp/>be<sp/>used<sp/>as<sp/>follows:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">&lt;repeat<sp/>group=&quot;{{<sp/>@fruits<sp/>}}&quot;<sp/>value=&quot;{{<sp/>@fruit<sp/>}}&quot;<sp/>counter=&quot;{{<sp/>@ctr<sp/>}}&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;p<sp/>class=&quot;{{<sp/>@ctr%2?&apos;odd&apos;:&apos;even&apos;<sp/>}}&quot;&gt;{{<sp/>trim(@fruit)<sp/>}}&lt;/p&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;/repeat&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Internally,<sp/>F3&apos;s<sp/>template<sp/>engine<sp/>records<sp/>the<sp/>number<sp/>of<sp/>loop<sp/>iterations<sp/>and<sp/>saves<sp/>that<sp/>value<sp/>in<sp/>the<sp/>variable/token<sp/>`@ctr`,<sp/>which<sp/>is<sp/>used<sp/>in<sp/>our<sp/>example<sp/>to<sp/>determine<sp/>the<sp/>odd/even<sp/>classification.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Embedding<sp/>Javascript<sp/>and<sp/>CSS</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>you<sp/>have<sp/>to<sp/>insert<sp/>F3<sp/>tokens<sp/>inside<sp/>a<sp/>`&lt;script&gt;`<sp/>or<sp/>`&lt;style&gt;`<sp/>section<sp/>of<sp/>your<sp/>template,<sp/>the<sp/>framework<sp/>will<sp/>still<sp/>replace<sp/>them<sp/>the<sp/>usual<sp/>way:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">&lt;script<sp/>type=&quot;text/javascript&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>function<sp/>notify()<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>alert(&apos;You<sp/>are<sp/>logged<sp/>in<sp/>as:<sp/>{{<sp/>@userID<sp/>}}&apos;);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">&lt;/script&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Embedding<sp/>template<sp/>directives<sp/>inside<sp/>your<sp/>`&lt;script&gt;`<sp/>or<sp/>`&lt;style&gt;`<sp/>tags<sp/>requires<sp/>no<sp/>special<sp/>handling:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">&lt;script<sp/>type=&quot;text/javascript&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>var<sp/>discounts=[];</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;repeat<sp/>group=&quot;{{<sp/>@rates<sp/>}}&quot;<sp/>value=&quot;{{<sp/>@rate<sp/>}}&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>whatever<sp/>you<sp/>want<sp/>to<sp/>repeat<sp/>in<sp/>Javascript,<sp/>e.g.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>discounts.push(&quot;{{<sp/>@rate<sp/>}}&quot;);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;/repeat&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;/script&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Document<sp/>Encoding</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">By<sp/>default,<sp/>Fat-Free<sp/>uses<sp/>the<sp/>UTF-8<sp/>character<sp/>set<sp/>unless<sp/>changed.<sp/>You<sp/>can<sp/>override<sp/>this<sp/>behavior<sp/>by<sp/>issuing<sp/>something<sp/>like:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;ENCODING&apos;,&apos;ISO-8859-1&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Once<sp/>you<sp/>inform<sp/>the<sp/>framework<sp/>of<sp/>the<sp/>desired<sp/>character<sp/>set,<sp/>F3<sp/>will<sp/>use<sp/>it<sp/>in<sp/>all<sp/>HTML<sp/>and<sp/>XML<sp/>templates<sp/>until<sp/>altered<sp/>again.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>All<sp/>Kinds<sp/>of<sp/>Templates</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">As<sp/>mentioned<sp/>earlier<sp/>in<sp/>this<sp/>section,<sp/>the<sp/>framework<sp/>isn&apos;t<sp/>limited<sp/>to<sp/>HTML<sp/>templates.<sp/>You<sp/>can<sp/>process<sp/>XML<sp/>templates<sp/>just<sp/>as<sp/>well.<sp/>The<sp/>mechanics<sp/>are<sp/>pretty<sp/>much<sp/>similar.<sp/>You<sp/>still<sp/>have<sp/>the<sp/>same<sp/>`{{<sp/>@variable<sp/>}}`<sp/>and<sp/>`{{<sp/>expression<sp/>}}`<sp/>tokens,<sp/>`&lt;repeat&gt;`,<sp/>`&lt;check&gt;`,<sp/>`&lt;include&gt;`,<sp/>and<sp/>`&lt;exclude&gt;`<sp/>directives<sp/>at<sp/>your<sp/>disposal.<sp/>Just<sp/>tell<sp/>F3<sp/>that<sp/>you&apos;re<sp/>passing<sp/>an<sp/>XML<sp/>file<sp/>instead<sp/>of<sp/>HTML:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">echo<sp/>Template::instance()-&gt;render(&apos;template.xml&apos;,&apos;application/xml&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>second<sp/>argument<sp/>represents<sp/>the<sp/>MIME<sp/>type<sp/>of<sp/>the<sp/>document<sp/>being<sp/>rendered.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>View<sp/>component<sp/>of<sp/>MVC<sp/>covers<sp/>everything<sp/>that<sp/>doesn&apos;t<sp/>fall<sp/>under<sp/>the<sp/>Model<sp/>and<sp/>Controller,<sp/>which<sp/>means<sp/>your<sp/>presentation<sp/>can<sp/>and<sp/>should<sp/>include<sp/>all<sp/>kinds<sp/>of<sp/>user<sp/>interfaces,<sp/>like<sp/>RSS,<sp/>e-mail,<sp/>RDF,<sp/>FOAF,<sp/>text<sp/>files,<sp/>etc.<sp/>The<sp/>example<sp/>below<sp/>shows<sp/>you<sp/>how<sp/>to<sp/>separate<sp/>your<sp/>e-mail<sp/>presentation<sp/>from<sp/>your<sp/>application&apos;s<sp/>business<sp/>logic:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">MIME-Version:<sp/>1.0</highlight></codeline>
<codeline><highlight class="normal">Content-type:<sp/>text/html;<sp/>charset={{<sp/>@ENCODING<sp/>}}</highlight></codeline>
<codeline><highlight class="normal">From:<sp/>{{<sp/>@from<sp/>}}</highlight></codeline>
<codeline><highlight class="normal">To:<sp/>{{<sp/>@to<sp/>}}</highlight></codeline>
<codeline><highlight class="normal">Subject:<sp/>{{<sp/>@subject<sp/>}}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">&lt;p&gt;Welcome,<sp/>and<sp/>thanks<sp/>for<sp/>joining<sp/>{{<sp/>@site<sp/>}}!&lt;/p&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Save<sp/>the<sp/>above<sp/>e-mail<sp/>template<sp/>as<sp/>welcome.txt.<sp/>The<sp/>associated<sp/>F3<sp/>code<sp/>would<sp/>be:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;from&apos;,&apos;&lt;no-reply@mysite.com&gt;&apos;);</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;to&apos;,&apos;&lt;slasher@throats.com&gt;&apos;);</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;subject&apos;,&apos;Welcome&apos;);</highlight></codeline>
<codeline><highlight class="normal">ini_set(&apos;sendmail_from&apos;,$f3-&gt;get(&apos;from&apos;));</highlight></codeline>
<codeline><highlight class="normal">mail(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>$f3-&gt;get(&apos;to&apos;),</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>$f3-&gt;get(&apos;subject&apos;),</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>Template::instance()-&gt;render(&apos;email.txt&apos;,&apos;text/html&apos;)</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Tip:<sp/>Replace<sp/>the<sp/>SMTP<sp/>mail()<sp/>function<sp/>with<sp/>imap_mail()<sp/>if<sp/>your<sp/>script<sp/>communicates<sp/>with<sp/>an<sp/>IMAP<sp/>server.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Now<sp/>isn&apos;t<sp/>that<sp/>something?<sp/>Of<sp/>course,<sp/>if<sp/>you<sp/>have<sp/>a<sp/>bundle<sp/>of<sp/>e-mail<sp/>recipients,<sp/>you&apos;d<sp/>be<sp/>using<sp/>a<sp/>database<sp/>to<sp/>populate<sp/>the<sp/>firstName,<sp/>lastName,<sp/>and<sp/>email<sp/>tokens.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Here&apos;s<sp/>an<sp/>alternative<sp/>solution<sp/>using<sp/>the<sp/>F3&apos;s<sp/>SMTP<sp/>plug-in:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$mail=new<sp/>SMTP(&apos;smtp.gmail.com&apos;,465,&apos;SSL&apos;,&apos;account@gmail.com&apos;,&apos;secret&apos;);</highlight></codeline>
<codeline><highlight class="normal">$mail-&gt;set(&apos;from&apos;,&apos;&lt;no-reply@mysite.com&gt;&apos;);</highlight></codeline>
<codeline><highlight class="normal">$mail-&gt;set(&apos;to&apos;,&apos;&quot;Slasher&quot;<sp/>&lt;slasher@throats.com&gt;&apos;);</highlight></codeline>
<codeline><highlight class="normal">$mail-&gt;set(&apos;subject&apos;,&apos;Welcome&apos;);</highlight></codeline>
<codeline><highlight class="normal">$mail-&gt;send(Template::instance()-&gt;render(&apos;email.txt&apos;));</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Multilingual<sp/>Support</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3<sp/>supports<sp/>multiple<sp/>languages<sp/>right<sp/>out<sp/>of<sp/>the<sp/>box.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">First,<sp/>create<sp/>a<sp/>dictionary<sp/>file<sp/>with<sp/>the<sp/>following<sp/>structure<sp/>(one<sp/>file<sp/>per<sp/>language):-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">&lt;?php</highlight></codeline>
<codeline><highlight class="normal">return<sp/>array(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;love&apos;=&gt;&apos;I<sp/>love<sp/>F3&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;today&apos;=&gt;&apos;Today<sp/>is<sp/>{0,date}&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;pi&apos;=&gt;&apos;{0,number}&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;money&apos;=&gt;&apos;Amount<sp/>remaining:<sp/>{0,number,currency}&apos;</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Save<sp/>it<sp/>as<sp/>`dict/en.php`.<sp/>Let&apos;s<sp/>create<sp/>another<sp/>dictionary,<sp/>this<sp/>time<sp/>for<sp/>German.<sp/>Save<sp/>the<sp/>file<sp/>as<sp/>`dict/de.php`:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">&lt;?php</highlight></codeline>
<codeline><highlight class="normal">return<sp/>array(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;love&apos;=&gt;&apos;Ich<sp/>liebe<sp/>F3&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;today&apos;=&gt;&apos;Heute<sp/>ist<sp/>{0,date}&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;money&apos;=&gt;&apos;Restbetrag:<sp/>{0,number,currency}&apos;</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Dictionaries<sp/>are<sp/>nothing<sp/>more<sp/>than<sp/>key-value<sp/>pairs.<sp/>F3<sp/>automatically<sp/>instantiates<sp/>framework<sp/>variables<sp/>based<sp/>on<sp/>the<sp/>keys<sp/>in<sp/>the<sp/>language<sp/>files.<sp/>As<sp/>such,<sp/>it&apos;s<sp/>easy<sp/>to<sp/>embed<sp/>these<sp/>variables<sp/>as<sp/>tokens<sp/>in<sp/>your<sp/>templates.<sp/>Using<sp/>the<sp/>F3<sp/>template<sp/>engine:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">&lt;h1&gt;{{<sp/>@love<sp/>}}&lt;/h1&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;p&gt;</highlight></codeline>
<codeline><highlight class="normal">{{<sp/>@today,time()<sp/>|<sp/>format<sp/>}}.&lt;br<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal">{{<sp/>@money,365.25<sp/>|<sp/>format<sp/>}}&lt;br<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal">{{<sp/>@pi<sp/>}}</highlight></codeline>
<codeline><highlight class="normal">&lt;/p&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">And<sp/>the<sp/>longer<sp/>version<sp/>that<sp/>utilizes<sp/>PHP<sp/>as<sp/>a<sp/>template<sp/>engine:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">&lt;?php<sp/>$f3=Base::instance();<sp/>?&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;h1&gt;&lt;?php<sp/>echo<sp/>$f3-&gt;get(&apos;love&apos;);<sp/>?&gt;&lt;/h1&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;p&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;?php<sp/>echo<sp/>$f3-&gt;get(&apos;today&apos;,time());<sp/>?&gt;.&lt;br<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;?php<sp/>echo<sp/>$f3-&gt;get(&apos;money&apos;,365.25);<sp/>?&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;?php<sp/>echo<sp/>$f3-&gt;get(&apos;pi&apos;);<sp/>?&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;/p&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Next,<sp/>we<sp/>instruct<sp/>F3<sp/>to<sp/>look<sp/>for<sp/>dictionaries<sp/>in<sp/>the<sp/>`dict/`<sp/>folder:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;LOCALES&apos;,&apos;dict/&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">But<sp/>how<sp/>does<sp/>the<sp/>framework<sp/>determine<sp/>which<sp/>language<sp/>to<sp/>use?<sp/>F3<sp/>will<sp/>detect<sp/>it<sp/>automatically<sp/>by<sp/>looking<sp/>at<sp/>the<sp/>HTTP<sp/>request<sp/>headers<sp/>first,<sp/>specifically<sp/>the<sp/>`Accept-Language`<sp/>header<sp/>sent<sp/>by<sp/>the<sp/>browser.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">To<sp/>override<sp/>this<sp/>behavior,<sp/>you<sp/>can<sp/>trigger<sp/>F3<sp/>to<sp/>use<sp/>a<sp/>language<sp/>specified<sp/>by<sp/>the<sp/>user<sp/>or<sp/>application:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;LANGUAGE&apos;,&apos;de&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">**Note:**<sp/>In<sp/>the<sp/>above<sp/>example,<sp/>the<sp/>key<sp/>pi<sp/>exists<sp/>only<sp/>in<sp/>the<sp/>English<sp/>dictionary.<sp/>The<sp/>framework<sp/>will<sp/>always<sp/>use<sp/>English<sp/>(`en`)<sp/>as<sp/>a<sp/>fallback<sp/>to<sp/>populate<sp/>keys<sp/>that<sp/>are<sp/>not<sp/>present<sp/>in<sp/>the<sp/>specified<sp/>(or<sp/>detected)<sp/>language.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">You<sp/>may<sp/>also<sp/>create<sp/>dictionary<sp/>files<sp/>for<sp/>language<sp/>variants<sp/>like<sp/>`en-US`,<sp/>`es-AR`,<sp/>etc.<sp/>In<sp/>this<sp/>case,<sp/>F3<sp/>will<sp/>use<sp/>the<sp/>language<sp/>variant<sp/>first<sp/>(like<sp/>`es-AR`).<sp/>If<sp/>there<sp/>are<sp/>keys<sp/>that<sp/>do<sp/>not<sp/>exist<sp/>in<sp/>the<sp/>variant,<sp/>the<sp/>framework<sp/>will<sp/>look<sp/>up<sp/>the<sp/>key<sp/>in<sp/>the<sp/>root<sp/>language<sp/>(`es`),<sp/>then<sp/>use<sp/>the<sp/>`en`<sp/>language<sp/>file<sp/>as<sp/>the<sp/>final<sp/>fallback.</highlight></codeline>
<codeline><highlight class="normal">Dictionary<sp/>key-value<sp/>pairs<sp/>become<sp/>F3<sp/>variables<sp/>once<sp/>referenced.<sp/>Make<sp/>sure<sp/>the<sp/>keys<sp/>do<sp/>not<sp/>conflict<sp/>with<sp/>any<sp/>framework<sp/>variable<sp/>instantiated<sp/>via<sp/>`$f3-&gt;set()`,<sp/>`$f3-&gt;mset()`,<sp/>or<sp/>`$f3-&gt;config()`.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Did<sp/>you<sp/>notice<sp/>the<sp/>peculiar<sp/>`&apos;Today<sp/>is<sp/>{0,date}&apos;`<sp/>pattern<sp/>in<sp/>our<sp/>previous<sp/>example?<sp/>F3&apos;s<sp/>multilingual<sp/>capability<sp/>hinges<sp/>on<sp/>string/message<sp/>formatting<sp/>rules<sp/>of<sp/>the<sp/>ICU<sp/>project.<sp/>The<sp/>framework<sp/>uses<sp/>its<sp/>own<sp/>subset<sp/>of<sp/>the<sp/>ICU<sp/>string<sp/>formatting<sp/>implementation.<sp/>There<sp/>is<sp/>no<sp/>need<sp/>for<sp/>PHP&apos;s<sp/>`intl`<sp/>extension<sp/>to<sp/>be<sp/>activated<sp/>on<sp/>the<sp/>server.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">One<sp/>more<sp/>thing:<sp/>F3<sp/>can<sp/>also<sp/>load<sp/>.ini-style<sp/>formatted<sp/>files<sp/>as<sp/>dictionaries:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>ini</highlight></codeline>
<codeline><highlight class="normal">love=&quot;I<sp/>love<sp/>F3&quot;</highlight></codeline>
<codeline><highlight class="normal">today=&quot;Today<sp/>is<sp/>{0,date}&quot;</highlight></codeline>
<codeline><highlight class="normal">pi=&quot;{0,number}&quot;</highlight></codeline>
<codeline><highlight class="normal">money=&quot;Amount<sp/>remaining:<sp/>{0,number,currency}&quot;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Save<sp/>it<sp/>as<sp/>`dict/en.ini`<sp/>so<sp/>the<sp/>framework<sp/>can<sp/>load<sp/>it<sp/>automatically.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Data<sp/>Sanitation</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">By<sp/>default,<sp/>both<sp/>view<sp/>handler<sp/>and<sp/>template<sp/>engine<sp/>escapes<sp/>all<sp/>rendered<sp/>variables,<sp/>i.e.<sp/>converted<sp/>to<sp/>HTML<sp/>entities<sp/>to<sp/>protect<sp/>you<sp/>from<sp/>possible<sp/>XSS<sp/>and<sp/>code<sp/>injection<sp/>attacks.<sp/>On<sp/>the<sp/>other<sp/>hand,<sp/>if<sp/>you<sp/>wish<sp/>to<sp/>pass<sp/>valid<sp/>HTML<sp/>fragments<sp/>from<sp/>your<sp/>application<sp/>code<sp/>to<sp/>your<sp/>template:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;ESCAPE&apos;,FALSE);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">This<sp/>may<sp/>have<sp/>undesirable<sp/>effects.<sp/>You<sp/>might<sp/>not<sp/>want<sp/>all<sp/>variables<sp/>to<sp/>pass<sp/>through<sp/>unescaped.<sp/>Fat-Free<sp/>allows<sp/>you<sp/>to<sp/>unescape<sp/>variables<sp/>individually.<sp/>For<sp/>F3<sp/>templates:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">{{<sp/>@html_content<sp/>|<sp/>raw<sp/>}}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">In<sp/>the<sp/>case<sp/>of<sp/>PHP<sp/>templates:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">&lt;?php<sp/>echo<sp/>View::instance()-&gt;raw($html_content);<sp/>?&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">As<sp/>an<sp/>addition<sp/>to<sp/>auto-escaping<sp/>of<sp/>F3<sp/>variables,<sp/>the<sp/>framework<sp/>also<sp/>gives<sp/>you<sp/>a<sp/>free<sp/>hand<sp/>at<sp/>sanitizing<sp/>user<sp/>input<sp/>from<sp/>HTML<sp/>forms:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;scrub($_GET,&apos;p;<sp/>br;<sp/>span;<sp/>div;<sp/>a&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">This<sp/>command<sp/>will<sp/>strip<sp/>all<sp/>tags<sp/>(except<sp/>those<sp/>specified<sp/>in<sp/>the<sp/>second<sp/>argument)<sp/>and<sp/>unsafe<sp/>characters<sp/>from<sp/>the<sp/>specified<sp/>variable.<sp/>If<sp/>the<sp/>variable<sp/>contains<sp/>an<sp/>array,<sp/>each<sp/>element<sp/>in<sp/>the<sp/>array<sp/>is<sp/>sanitized<sp/>recursively.<sp/>If<sp/>an<sp/>asterisk<sp/>(*)<sp/>is<sp/>passed<sp/>as<sp/>the<sp/>second<sp/>argument,<sp/>`$f3-&gt;scrub()`<sp/>permits<sp/>all<sp/>HTML<sp/>tags<sp/>to<sp/>pass<sp/>through<sp/>untouched<sp/>and<sp/>simply<sp/>remove<sp/>unsafe<sp/>control<sp/>characters.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>Databases</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Connecting<sp/>to<sp/>a<sp/>Database<sp/>Engine</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Fat-Free<sp/>is<sp/>designed<sp/>to<sp/>make<sp/>the<sp/>job<sp/>of<sp/>interfacing<sp/>with<sp/>SQL<sp/>databases<sp/>a<sp/>breeze.<sp/>If<sp/>you&apos;re<sp/>not<sp/>the<sp/>type<sp/>to<sp/>immerse<sp/>yourself<sp/>in<sp/>details<sp/>about<sp/>SQL,<sp/>but<sp/>lean<sp/>more<sp/>towards<sp/>object-oriented<sp/>data<sp/>handling,<sp/>you<sp/>can<sp/>go<sp/>directly<sp/>to<sp/>the<sp/>next<sp/>section<sp/>of<sp/>this<sp/>tutorial.<sp/>However,<sp/>if<sp/>you<sp/>need<sp/>to<sp/>do<sp/>some<sp/>complex<sp/>data-handling<sp/>and<sp/>database<sp/>performance<sp/>optimization<sp/>tasks,<sp/>SQL<sp/>is<sp/>the<sp/>way<sp/>to<sp/>go.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Establishing<sp/>communication<sp/>with<sp/>a<sp/>SQL<sp/>engine<sp/>like<sp/>MySQL,<sp/>SQLite,<sp/>SQL<sp/>Server,<sp/>Sybase,<sp/>and<sp/>Oracle<sp/>is<sp/>done<sp/>using<sp/>the<sp/>familiar<sp/>`$f3-&gt;set()`<sp/>command.<sp/>Connecting<sp/>to<sp/>a<sp/>SQLite<sp/>database<sp/>would<sp/>be:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$db=new<sp/>DB\SQL(&apos;sqlite:/absolute/path/to/your/database.sqlite&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Another<sp/>example,<sp/>this<sp/>time<sp/>with<sp/>MySQL:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$db=new<sp/>DB\SQL(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;mysql:host=localhost;port=3306;dbname=mysqldb&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;admin&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;p455w0rD&apos;</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Querying<sp/>the<sp/>Database</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">OK.<sp/>That<sp/>was<sp/>easy,<sp/>wasn&apos;t<sp/>it?<sp/>That&apos;s<sp/>pretty<sp/>much<sp/>how<sp/>you<sp/>would<sp/>do<sp/>the<sp/>same<sp/>thing<sp/>in<sp/>ordinary<sp/>PHP.<sp/>You<sp/>just<sp/>need<sp/>to<sp/>know<sp/>the<sp/>DSN<sp/>format<sp/>of<sp/>the<sp/>database<sp/>you&apos;re<sp/>connecting<sp/>to.<sp/>See<sp/>the<sp/>PDO<sp/>section<sp/>of<sp/>the<sp/>PHP<sp/>manual.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Let&apos;s<sp/>continue<sp/>our<sp/>PHP<sp/>code:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;result&apos;,$db-&gt;exec(&apos;SELECT<sp/>brandName<sp/>FROM<sp/>wherever&apos;));</highlight></codeline>
<codeline><highlight class="normal">echo<sp/>Template::instance()-&gt;render(&apos;abc.htm&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Huh,<sp/>what&apos;s<sp/>going<sp/>on<sp/>here?<sp/>Shouldn&apos;t<sp/>we<sp/>be<sp/>setting<sp/>up<sp/>things<sp/>like<sp/>PDOs,<sp/>statements,<sp/>cursors,<sp/>etc.?<sp/>The<sp/>simple<sp/>answer<sp/>is:<sp/>you<sp/>don&apos;t<sp/>have<sp/>to.<sp/>F3<sp/>simplifies<sp/>everything<sp/>by<sp/>taking<sp/>care<sp/>of<sp/>all<sp/>the<sp/>hard<sp/>work<sp/>in<sp/>the<sp/>backend.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">This<sp/>time<sp/>we<sp/>create<sp/>an<sp/>HTML<sp/>template<sp/>like<sp/>`abc.htm`<sp/>that<sp/>has<sp/>at<sp/>a<sp/>minimum<sp/>the<sp/>following:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">&lt;repeat<sp/>group=&quot;{{<sp/>@result<sp/>}}&quot;<sp/>value=&quot;{{<sp/>@item<sp/>}}&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;span&gt;{{<sp/>@item.brandName<sp/><sp/>}}&lt;/span&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;/repeat&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">In<sp/>most<sp/>instances,<sp/>the<sp/>SQL<sp/>command<sp/>set<sp/>should<sp/>be<sp/>enough<sp/>to<sp/>generate<sp/>a<sp/>Web-ready<sp/>result<sp/>so<sp/>you<sp/>can<sp/>use<sp/>the<sp/>`result`<sp/>array<sp/>variable<sp/>in<sp/>your<sp/>template<sp/>directly.<sp/>Be<sp/>that<sp/>as<sp/>it<sp/>may,<sp/>Fat-Free<sp/>will<sp/>not<sp/>stop<sp/>you<sp/>from<sp/>getting<sp/>into<sp/>its<sp/>SQL<sp/>handler<sp/>internals.<sp/>In<sp/>fact,<sp/>F3&apos;s<sp/>`DB\SQL`<sp/>class<sp/>derives<sp/>directly<sp/>from<sp/>PHP&apos;s<sp/>`PDO`<sp/>class,<sp/>so<sp/>you<sp/>still<sp/>have<sp/>access<sp/>to<sp/>the<sp/>underlying<sp/>PDO<sp/>components<sp/>and<sp/>primitives<sp/>involved<sp/>in<sp/>each<sp/>process,<sp/>if<sp/>you<sp/>need<sp/>some<sp/>fine-grain<sp/>control.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Transactions</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Here&apos;s<sp/>another<sp/>example.<sp/>Instead<sp/>of<sp/>a<sp/>single<sp/>statement<sp/>provided<sp/>as<sp/>an<sp/>argument<sp/>to<sp/>the<sp/>`$db-&gt;exec()`<sp/>command,<sp/>you<sp/>can<sp/>also<sp/>pass<sp/>an<sp/>array<sp/>of<sp/>SQL<sp/>statements:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$db-&gt;exec(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>array(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;DELETE<sp/>FROM<sp/>diet<sp/>WHERE<sp/>food=&quot;cola&quot;&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;INSERT<sp/>INTO<sp/>diet<sp/>(food)<sp/>VALUES<sp/>(&quot;carrot&quot;)&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;SELECT<sp/>*<sp/>FROM<sp/>diet&apos;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3<sp/>is<sp/>smart<sp/>enough<sp/>to<sp/>know<sp/>that<sp/>if<sp/>you&apos;re<sp/>passing<sp/>an<sp/>array<sp/>of<sp/>SQL<sp/>instructions,<sp/>this<sp/>indicates<sp/>a<sp/>SQL<sp/>batch<sp/>transaction.<sp/>You<sp/>don&apos;t<sp/>have<sp/>to<sp/>worry<sp/>about<sp/>SQL<sp/>rollbacks<sp/>and<sp/>commits<sp/>because<sp/>the<sp/>framework<sp/>will<sp/>automatically<sp/>revert<sp/>to<sp/>the<sp/>initial<sp/>state<sp/>of<sp/>the<sp/>database<sp/>if<sp/>any<sp/>error<sp/>occurs<sp/>during<sp/>the<sp/>transaction.<sp/>If<sp/>successful,<sp/>F3<sp/>commits<sp/>all<sp/>changes<sp/>made<sp/>to<sp/>the<sp/>database.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">You<sp/>can<sp/>also<sp/>start<sp/>and<sp/>end<sp/>a<sp/>transaction<sp/>programmatically:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$db-&gt;begin();</highlight></codeline>
<codeline><highlight class="normal">$db-&gt;exec(&apos;DELETE<sp/>FROM<sp/>diet<sp/>WHERE<sp/>food=&quot;cola&quot;&apos;);</highlight></codeline>
<codeline><highlight class="normal">$db-&gt;exec(&apos;INSERT<sp/>INTO<sp/>diet<sp/>(food)<sp/>VALUES<sp/>(&quot;carrot&quot;)&apos;);</highlight></codeline>
<codeline><highlight class="normal">$db-&gt;exec(&apos;SELECT<sp/>*<sp/>FROM<sp/>diet&apos;);</highlight></codeline>
<codeline><highlight class="normal">$db-&gt;commit();</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">A<sp/>rollback<sp/>will<sp/>occur<sp/>if<sp/>any<sp/>of<sp/>the<sp/>statements<sp/>encounter<sp/>an<sp/>error.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">To<sp/>get<sp/>a<sp/>list<sp/>of<sp/>all<sp/>database<sp/>instructions<sp/>issued:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">echo<sp/>$db-&gt;log();</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Parameterized<sp/>Queries</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Passing<sp/>string<sp/>arguments<sp/>to<sp/>SQL<sp/>statements<sp/>is<sp/>fraught<sp/>with<sp/>danger.<sp/>Consider<sp/>this:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$db-&gt;exec(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;SELECT<sp/>*<sp/>FROM<sp/>users<sp/>&apos;.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;WHERE<sp/>username=&quot;&apos;.$f3-&gt;get(&apos;POST.userID&apos;.&apos;&quot;&apos;)</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>the<sp/>`POST`<sp/>variable<sp/>`userID`<sp/>does<sp/>not<sp/>go<sp/>through<sp/>any<sp/>data<sp/>sanitation<sp/>process,<sp/>a<sp/>malicious<sp/>user<sp/>can<sp/>pass<sp/>the<sp/>following<sp/>string<sp/>and<sp/>damage<sp/>your<sp/>database<sp/>irreversibly:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>sql</highlight></codeline>
<codeline><highlight class="normal">admin&quot;;<sp/>DELETE<sp/>FROM<sp/>users;<sp/>SELECT<sp/>&quot;1</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Luckily,<sp/>parameterized<sp/>queries<sp/>help<sp/>you<sp/>mitigate<sp/>these<sp/>risks:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$db-&gt;exec(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;SELECT<sp/>*<sp/>FROM<sp/>users<sp/>WHERE<sp/>userID=?&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>$f3-&gt;get(&apos;POST.userID&apos;)</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>F3<sp/>detects<sp/>that<sp/>the<sp/>value<sp/>of<sp/>the<sp/>query<sp/>parameter/token<sp/>is<sp/>a<sp/>string,<sp/>the<sp/>underlying<sp/>data<sp/>access<sp/>layer<sp/>escapes<sp/>the<sp/>string<sp/>and<sp/>adds<sp/>quotes<sp/>as<sp/>necessary.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Our<sp/>example<sp/>in<sp/>the<sp/>previous<sp/>section<sp/>will<sp/>be<sp/>a<sp/>lot<sp/>safer<sp/>from<sp/>SQL<sp/>injection<sp/>if<sp/>written<sp/>this<sp/>way:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$db-&gt;exec(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>array(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;DELETE<sp/>FROM<sp/>diet<sp/>WHERE<sp/>food=:name&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;INSERT<sp/>INTO<sp/>diet<sp/>(food)<sp/>VALUES<sp/>(?)&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;SELECT<sp/>*<sp/>FROM<sp/>diet&apos;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>),</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>array(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>array(&apos;:name&apos;=&gt;&apos;cola&apos;),</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>array(1=&gt;&apos;carrot&apos;),</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>NULL</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>CRUD<sp/>(But<sp/>With<sp/>a<sp/>Lot<sp/>of<sp/>Style)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3<sp/>is<sp/>packed<sp/>with<sp/>easy-to-use<sp/>object-relational<sp/>mappers<sp/>(ORMs)<sp/>that<sp/>sit<sp/>between<sp/>your<sp/>application<sp/>and<sp/>your<sp/>data<sp/>-<sp/>making<sp/>it<sp/>a<sp/>lot<sp/>easier<sp/>and<sp/>faster<sp/>for<sp/>you<sp/>to<sp/>write<sp/>programs<sp/>that<sp/>handle<sp/>common<sp/>data<sp/>operations<sp/>-<sp/>like<sp/>creating,<sp/>retrieving,<sp/>updating,<sp/>and<sp/>deleting<sp/>(CRUD)<sp/>information<sp/>from<sp/>SQL<sp/>and<sp/>NoSQL<sp/>databases.<sp/>Data<sp/>mappers<sp/>do<sp/>most<sp/>of<sp/>the<sp/>work<sp/>by<sp/>mapping<sp/>PHP<sp/>object<sp/>interactions<sp/>to<sp/>the<sp/>corresponding<sp/>backend<sp/>queries.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Suppose<sp/>you<sp/>have<sp/>an<sp/>existing<sp/>MySQL<sp/>database<sp/>containing<sp/>a<sp/>table<sp/>of<sp/>users<sp/>of<sp/>your<sp/>application.<sp/>(SQLite,<sp/>PostgreSQL,<sp/>SQL<sp/>Server,<sp/>Sybase<sp/>will<sp/>do<sp/>just<sp/>as<sp/>well.)<sp/>It<sp/>would<sp/>have<sp/>been<sp/>created<sp/>using<sp/>the<sp/>following<sp/>SQL<sp/>command:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>sql</highlight></codeline>
<codeline><highlight class="normal">CREATE<sp/>TABLE<sp/>users<sp/>(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>userID<sp/>VARCHAR(30),</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>password<sp/>VARCHAR(30),</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>visits<sp/>INT,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>PRIMARY<sp/>KEY(userID)</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">**Note:**<sp/>MongoDB<sp/>is<sp/>a<sp/>NoSQL<sp/>database<sp/>engine<sp/>and<sp/>inherently<sp/>schema-less.<sp/>F3<sp/>has<sp/>its<sp/>own<sp/>fast<sp/>and<sp/>lightweight<sp/>NoSQL<sp/>implementation<sp/>called<sp/>Jig,<sp/>which<sp/>uses<sp/>PHP-serialized<sp/>or<sp/>JSON-encoded<sp/>flat<sp/>files.<sp/>These<sp/>abstraction<sp/>layers<sp/>require<sp/>no<sp/>rigid<sp/>data<sp/>structures.<sp/>Fields<sp/>may<sp/>vary<sp/>from<sp/>one<sp/>record<sp/>to<sp/>another.<sp/>They<sp/>can<sp/>also<sp/>be<sp/>defined<sp/>or<sp/>dropped<sp/>on<sp/>the<sp/>fly.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Now<sp/>back<sp/>to<sp/>SQL.<sp/>First,<sp/>we<sp/>establish<sp/>communication<sp/>with<sp/>our<sp/>database.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$db=new<sp/>DB\SQL(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;mysql:host=localhost;port=3306;dbname=mysqldb&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;admin&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;wh4t3v3r&apos;</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">To<sp/>retrieve<sp/>a<sp/>record<sp/>from<sp/>our<sp/>table:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$user=new<sp/>DB\SQL\Mapper($db,&apos;users&apos;);</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;load(array(&apos;userID=?&apos;,&apos;tarzan&apos;));</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>first<sp/>line<sp/>instantiates<sp/>a<sp/>data<sp/>mapper<sp/>object<sp/>that<sp/>interacts<sp/>with<sp/>the<sp/>`users`<sp/>table<sp/>in<sp/>our<sp/>database.<sp/>Behind<sp/>the<sp/>scene,<sp/>F3<sp/>retrieves<sp/>the<sp/>structure<sp/>of<sp/>the<sp/>`users`<sp/>table<sp/>and<sp/>determines<sp/>which<sp/>field(s)<sp/>are<sp/>defined<sp/>as<sp/>primary<sp/>key(s).<sp/>At<sp/>this<sp/>point,<sp/>the<sp/>mapper<sp/>object<sp/>contains<sp/>no<sp/>data<sp/>yet<sp/>(dry<sp/>state)<sp/>so<sp/>`$user`<sp/>is<sp/>nothing<sp/>more<sp/>than<sp/>a<sp/>structured<sp/>object<sp/>-<sp/>but<sp/>it<sp/>contains<sp/>the<sp/>methods<sp/>it<sp/>needs<sp/>to<sp/>perform<sp/>the<sp/>basic<sp/>CRUD<sp/>operations<sp/>and<sp/>some<sp/>extras.<sp/>To<sp/>retrieve<sp/>a<sp/>record<sp/>from<sp/>our<sp/>users<sp/>table<sp/>with<sp/>a<sp/>`userID`<sp/>field<sp/>containing<sp/>the<sp/>string<sp/>value<sp/>`tarzan`,<sp/>we<sp/>use<sp/>the<sp/>`load()<sp/>method`.<sp/>This<sp/>process<sp/>is<sp/>called<sp/>&quot;auto-hydrating&quot;<sp/>the<sp/>data<sp/>mapper<sp/>object.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Easy,<sp/>wasn&apos;t<sp/>it?<sp/>F3<sp/>understands<sp/>that<sp/>a<sp/>SQL<sp/>table<sp/>already<sp/>has<sp/>a<sp/>structural<sp/>definition<sp/>existing<sp/>within<sp/>the<sp/>database<sp/>engine<sp/>itself.<sp/>Unlike<sp/>other<sp/>frameworks,<sp/>F3<sp/>requires<sp/>no<sp/>extra<sp/>class<sp/>declarations<sp/>(unless<sp/>you<sp/>want<sp/>to<sp/>extend<sp/>the<sp/>data<sp/>mappers<sp/>to<sp/>fit<sp/>complex<sp/>objects),<sp/>no<sp/>redundant<sp/>PHP<sp/>array/object<sp/>property-to-field<sp/>mappings<sp/>(duplication<sp/>of<sp/>efforts),<sp/>no<sp/>code<sp/>generators<sp/>(which<sp/>require<sp/>code<sp/>regeneration<sp/>if<sp/>the<sp/>database<sp/>structure<sp/>changes),<sp/>no<sp/>stupid<sp/>XML/YAML<sp/>files<sp/>to<sp/>configure<sp/>your<sp/>models,<sp/>no<sp/>superfluous<sp/>commands<sp/>just<sp/>to<sp/>retrieve<sp/>a<sp/>single<sp/>record.<sp/>With<sp/>F3,<sp/>a<sp/>simple<sp/>resizing<sp/>of<sp/>a<sp/>`varchar`<sp/>field<sp/>in<sp/>MySQL<sp/>does<sp/>not<sp/>demand<sp/>a<sp/>change<sp/>in<sp/>your<sp/>application<sp/>code.<sp/>Consistent<sp/>with<sp/>MVC<sp/>and<sp/>&quot;separation<sp/>of<sp/>concerns&quot;,<sp/>the<sp/>database<sp/>admin<sp/>has<sp/>as<sp/>much<sp/>control<sp/>over<sp/>the<sp/>data<sp/>(and<sp/>the<sp/>structures)<sp/>as<sp/>a<sp/>template<sp/>designer<sp/>has<sp/>over<sp/>HTML/XML<sp/>templates.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>you<sp/>prefer<sp/>working<sp/>with<sp/>NoSQL<sp/>databases,<sp/>the<sp/>similarities<sp/>in<sp/>query<sp/>syntax<sp/>are<sp/>superficial.<sp/>In<sp/>the<sp/>case<sp/>of<sp/>the<sp/>MongoDB<sp/>data<sp/>mapper,<sp/>the<sp/>equivalent<sp/>code<sp/>would<sp/>be:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$db=new<sp/>DB\Mongo(&apos;mongodb://localhost:27017&apos;,&apos;testdb&apos;);</highlight></codeline>
<codeline><highlight class="normal">$user=new<sp/>DB\Mongo\Mapper($db,&apos;users&apos;);</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;load(array(&apos;userID&apos;=&gt;&apos;tarzan&apos;));</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">With<sp/>Jig,<sp/>the<sp/>syntax<sp/>is<sp/>similar<sp/>to<sp/>F3&apos;s<sp/>template<sp/>engine:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$db=new<sp/>DB\Jig(&apos;db/data/&apos;,DB\Jig::FORMAT_JSON);</highlight></codeline>
<codeline><highlight class="normal">$user=new<sp/>DB\Jig\Mapper($db,&apos;users&apos;);</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;load(array(&apos;@userID=?&apos;,&apos;tarzan&apos;));</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>The<sp/>Smart<sp/>SQL<sp/>ORM</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>framework<sp/>automatically<sp/>maps<sp/>the<sp/>field<sp/>`visits`<sp/>in<sp/>our<sp/>table<sp/>to<sp/>a<sp/>data<sp/>mapper<sp/>property<sp/>during<sp/>object<sp/>instantiation,<sp/>i.e.<sp/>`$user=new<sp/>DB\SQL\Mapper($db,&apos;users&apos;);`.<sp/>Once<sp/>the<sp/>object<sp/>is<sp/>created,<sp/>`$user-&gt;password`<sp/>and<sp/>`$user-&gt;userID`<sp/>would<sp/>map<sp/>to<sp/>the<sp/>`password`<sp/>and<sp/>`userID`<sp/>fields<sp/>in<sp/>our<sp/>table,<sp/>respectively.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">You<sp/>can&apos;t<sp/>add<sp/>or<sp/>delete<sp/>a<sp/>mapped<sp/>field,<sp/>or<sp/>change<sp/>a<sp/>table&apos;s<sp/>structure<sp/>using<sp/>the<sp/>ORM.<sp/>You<sp/>must<sp/>do<sp/>this<sp/>in<sp/>MySQL,<sp/>or<sp/>whatever<sp/>database<sp/>engine<sp/>you&apos;re<sp/>using.<sp/>After<sp/>you<sp/>make<sp/>the<sp/>changes<sp/>in<sp/>your<sp/>database<sp/>engine,<sp/>Fat-Free<sp/>will<sp/>automatically<sp/>synchronize<sp/>the<sp/>new<sp/>table<sp/>structure<sp/>with<sp/>your<sp/>data<sp/>mapper<sp/>object<sp/>when<sp/>you<sp/>run<sp/>your<sp/>application.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3<sp/>derives<sp/>the<sp/>data<sp/>mapper<sp/>structure<sp/>directly<sp/>from<sp/>the<sp/>database<sp/>schema.<sp/>No<sp/>guesswork<sp/>involved.<sp/>It<sp/>understands<sp/>the<sp/>differences<sp/>between<sp/>MySQL,<sp/>SQLite,<sp/>MSSQL,<sp/>Sybase,<sp/>and<sp/>PostgreSQL<sp/>database<sp/>engines.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">SQL<sp/>identifiers<sp/>should<sp/>not<sp/>use<sp/>reserved<sp/>words,<sp/>and<sp/>should<sp/>be<sp/>limited<sp/>to<sp/>alphanumeric<sp/>characters<sp/>`A-Z`,<sp/>`0-9`,<sp/>and<sp/>the<sp/>underscore<sp/>symbol<sp/>(`_`).<sp/>Column<sp/>names<sp/>containing<sp/>spaces<sp/>(or<sp/>special<sp/>characters)<sp/>and<sp/>surrounded<sp/>by<sp/>quotes<sp/>in<sp/>the<sp/>data<sp/>definition<sp/>are<sp/>not<sp/>compatible<sp/>with<sp/>the<sp/>ORM.<sp/>They<sp/>cannot<sp/>be<sp/>represented<sp/>properly<sp/>as<sp/>PHP<sp/>object<sp/>properties.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Let&apos;s<sp/>say<sp/>we<sp/>want<sp/>to<sp/>increment<sp/>the<sp/>user&apos;s<sp/>number<sp/>of<sp/>visits<sp/>and<sp/>update<sp/>the<sp/>corresponding<sp/>record<sp/>in<sp/>our<sp/>users<sp/>table,<sp/>we<sp/>can<sp/>add<sp/>the<sp/>following<sp/>code:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;visits++;</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;save();</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>we<sp/>wanted<sp/>to<sp/>insert<sp/>a<sp/>record,<sp/>we<sp/>follow<sp/>this<sp/>process:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$user=new<sp/>DB\SQL\Mapper($db,&apos;users&apos;);</highlight></codeline>
<codeline><highlight class="normal">//<sp/>or<sp/>$user=new<sp/>DB\Mongo\Mapper($db,&apos;users&apos;);</highlight></codeline>
<codeline><highlight class="normal">//<sp/>or<sp/>$user=new<sp/>DB\Jig\Mapper($db,&apos;users&apos;);</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;userID=&apos;jane&apos;;</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;password=md5(&apos;secret&apos;);</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;visits=0;</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;save();</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">We<sp/>still<sp/>use<sp/>the<sp/>same<sp/>`save()`<sp/>method.<sp/>But<sp/>how<sp/>does<sp/>F3<sp/>know<sp/>when<sp/>a<sp/>record<sp/>should<sp/>be<sp/>inserted<sp/>or<sp/>updated?<sp/>At<sp/>the<sp/>time<sp/>a<sp/>data<sp/>mapper<sp/>object<sp/>is<sp/>auto-hydrated<sp/>by<sp/>a<sp/>record<sp/>retrieval,<sp/>the<sp/>framework<sp/>keeps<sp/>track<sp/>of<sp/>the<sp/>record&apos;s<sp/>primary<sp/>keys<sp/>(or<sp/>`_id`,<sp/>in<sp/>the<sp/>case<sp/>of<sp/>MongoDB<sp/>and<sp/>Jig)<sp/>-<sp/>so<sp/>it<sp/>knows<sp/>which<sp/>record<sp/>should<sp/>be<sp/>updated<sp/>or<sp/>deleted<sp/>-<sp/>even<sp/>when<sp/>the<sp/>values<sp/>of<sp/>the<sp/>primary<sp/>keys<sp/>are<sp/>changed.<sp/>A<sp/>programmatically-hydrated<sp/>data<sp/>mapper<sp/>-<sp/>the<sp/>values<sp/>of<sp/>which<sp/>were<sp/>not<sp/>retrieved<sp/>from<sp/>the<sp/>database,<sp/>but<sp/>populated<sp/>by<sp/>the<sp/>application<sp/>-<sp/>will<sp/>not<sp/>have<sp/>any<sp/>memory<sp/>of<sp/>previous<sp/>values<sp/>in<sp/>its<sp/>primary<sp/>keys.<sp/>The<sp/>same<sp/>applies<sp/>to<sp/>MongoDB<sp/>and<sp/>Jig,<sp/>but<sp/>using<sp/>object<sp/>`_id`<sp/>as<sp/>reference.<sp/>So,<sp/>when<sp/>we<sp/>instantiated<sp/>the<sp/>`$user`<sp/>object<sp/>above<sp/>and<sp/>populated<sp/>its<sp/>properties<sp/>with<sp/>values<sp/>from<sp/>our<sp/>program<sp/>-<sp/>without<sp/>at<sp/>all<sp/>retrieving<sp/>a<sp/>record<sp/>from<sp/>the<sp/>user<sp/>table,<sp/>F3<sp/>knows<sp/>that<sp/>it<sp/>should<sp/>insert<sp/>this<sp/>record.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">A<sp/>mapper<sp/>object<sp/>will<sp/>not<sp/>be<sp/>empty<sp/>after<sp/>a<sp/>`save()`.<sp/>If<sp/>you<sp/>wish<sp/>to<sp/>add<sp/>a<sp/>new<sp/>record<sp/>to<sp/>your<sp/>database,<sp/>you<sp/>must<sp/>first<sp/>dehydrate<sp/>the<sp/>mapper:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;reset();</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;userID=&apos;cheetah&apos;;</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;password=md5(&apos;unknown&apos;);</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;save();</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Calling<sp/>`save()`<sp/>a<sp/>second<sp/>time<sp/>without<sp/>invoking<sp/>`reset()`<sp/>will<sp/>simply<sp/>update<sp/>the<sp/>record<sp/>currently<sp/>pointed<sp/>to<sp/>by<sp/>the<sp/>mapper.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Caveat<sp/>for<sp/>SQL<sp/>Tables</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Although<sp/>the<sp/>issue<sp/>of<sp/>having<sp/>primary<sp/>keys<sp/>in<sp/>all<sp/>tables<sp/>in<sp/>your<sp/>database<sp/>is<sp/>argumentative,<sp/>F3<sp/>does<sp/>not<sp/>stop<sp/>you<sp/>from<sp/>creating<sp/>a<sp/>data<sp/>mapper<sp/>object<sp/>that<sp/>communicates<sp/>with<sp/>a<sp/>table<sp/>containing<sp/>no<sp/>primary<sp/>keys.<sp/>The<sp/>only<sp/>drawback<sp/>is:<sp/>you<sp/>can&apos;t<sp/>delete<sp/>or<sp/>update<sp/>a<sp/>mapped<sp/>record<sp/>because<sp/>there&apos;s<sp/>absolutely<sp/>no<sp/>way<sp/>for<sp/>F3<sp/>to<sp/>determine<sp/>which<sp/>record<sp/>you&apos;re<sp/>referring<sp/>to<sp/>plus<sp/>the<sp/>fact<sp/>that<sp/>positional<sp/>references<sp/>are<sp/>not<sp/>reliable.<sp/>Row<sp/>IDs<sp/>are<sp/>not<sp/>portable<sp/>across<sp/>different<sp/>SQL<sp/>engines<sp/>and<sp/>may<sp/>not<sp/>be<sp/>returned<sp/>by<sp/>the<sp/>PHP<sp/>database<sp/>driver.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">To<sp/>remove<sp/>a<sp/>mapped<sp/>record<sp/>from<sp/>our<sp/>table,<sp/>invoke<sp/>the<sp/>`erase()`<sp/>method<sp/>on<sp/>an<sp/>auto-hydrated<sp/>data<sp/>mapper.<sp/>For<sp/>example:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$user=new<sp/>DB\SQL\Mapper($db,&apos;users&apos;);</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;load(array(&apos;userID=?<sp/>AND<sp/>password=?&apos;,&apos;cheetah&apos;,&apos;ch1mp&apos;));</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;erase();</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Jig&apos;s<sp/>query<sp/>syntax<sp/>would<sp/>be<sp/>slightly<sp/>similar:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$user=new<sp/>DB\Jig\Mapper($db,&apos;users&apos;);</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;load(array(&apos;@userID=?<sp/>AND<sp/>@password=?&apos;,&apos;cheetah&apos;,&apos;chimp&apos;));</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;erase();</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">And<sp/>the<sp/>MongoDB<sp/>equivalent<sp/>would<sp/>be:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$user=new<sp/>DB\Mongo\Mapper($db,&apos;users&apos;);</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;load(array(&apos;userID&apos;=&gt;&apos;cheetah&apos;,&apos;password&apos;=&gt;&apos;chimp&apos;));</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;erase();</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>The<sp/>Weather<sp/>Report</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">To<sp/>find<sp/>out<sp/>whether<sp/>our<sp/>data<sp/>mapper<sp/>was<sp/>hydrated<sp/>or<sp/>not:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">if<sp/>($user-&gt;dry())</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>echo<sp/>&apos;No<sp/>record<sp/>matching<sp/>criteria&apos;;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Beyond<sp/>CRUD</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">We&apos;ve<sp/>covered<sp/>the<sp/>CRUD<sp/>handlers.<sp/>There<sp/>are<sp/>some<sp/>extra<sp/>methods<sp/>that<sp/>you<sp/>might<sp/>find<sp/>useful:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;user&apos;,new<sp/>DB\SQL\Mapper($db,&apos;users&apos;));</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;get(&apos;user&apos;)-&gt;copyFrom(&apos;POST&apos;);</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;get(&apos;user&apos;)-&gt;save();</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Notice<sp/>that<sp/>we<sp/>can<sp/>also<sp/>use<sp/>Fat-Free<sp/>variables<sp/>as<sp/>containers<sp/>for<sp/>mapper<sp/>objects.</highlight></codeline>
<codeline><highlight class="normal">The<sp/>`copyFrom()`<sp/>method<sp/>hydrates<sp/>the<sp/>mapper<sp/>object<sp/>with<sp/>elements<sp/>from<sp/>a<sp/>framework<sp/>array<sp/>variable,<sp/>the<sp/>array<sp/>keys<sp/>of<sp/>which<sp/>must<sp/>have<sp/>names<sp/>identical<sp/>to<sp/>the<sp/>mapper<sp/>object<sp/>properties,<sp/>which<sp/>in<sp/>turn<sp/>correspond<sp/>to<sp/>the<sp/>record&apos;s<sp/>field<sp/>names.<sp/>So,<sp/>when<sp/>a<sp/>Web<sp/>form<sp/>is<sp/>submitted<sp/>(assuming<sp/>the<sp/>HTML<sp/>name<sp/>attribute<sp/>is<sp/>set<sp/>to<sp/>`userID`),<sp/>the<sp/>contents<sp/>of<sp/>that<sp/>input<sp/>field<sp/>is<sp/>transferred<sp/>to<sp/>`$_POST[&apos;userID&apos;]`,<sp/>duplicated<sp/>by<sp/>F3<sp/>in<sp/>its<sp/>`POST.userID`<sp/>variable,<sp/>and<sp/>saved<sp/>to<sp/>the<sp/>mapped<sp/>field<sp/>`$user-&gt;userID`<sp/>in<sp/>the<sp/>database.<sp/>The<sp/>process<sp/>becomes<sp/>very<sp/>simple<sp/>if<sp/>they<sp/>all<sp/>have<sp/>identically-named<sp/>elements.<sp/>Consistency<sp/>in<sp/>array<sp/>keys,<sp/>i.e.<sp/>template<sp/>token<sp/>names,<sp/>framework<sp/>variable<sp/>names<sp/>and<sp/>field<sp/>names<sp/>is<sp/>key<sp/>:)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">On<sp/>the<sp/>other<sp/>hand,<sp/>if<sp/>we<sp/>wanted<sp/>to<sp/>retrieve<sp/>a<sp/>record<sp/>and<sp/>copy<sp/>the<sp/>field<sp/>values<sp/>to<sp/>a<sp/>framework<sp/>variable<sp/>for<sp/>later<sp/>use,<sp/>like<sp/>template<sp/>rendering:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;user&apos;,new<sp/>DB\SQL\Mapper($db,&apos;users&apos;));</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;get(&apos;user&apos;)-&gt;load(array(&apos;userID=?&apos;,&apos;jane&apos;));</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;get(&apos;user&apos;)-&gt;copyTo(&apos;POST&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">We<sp/>can<sp/>then<sp/>assign<sp/>{{<sp/>@POST.userID<sp/>}}<sp/>to<sp/>the<sp/>same<sp/>input<sp/>field&apos;s<sp/>value<sp/>attribute.<sp/>To<sp/>sum<sp/>up,<sp/>the<sp/>HTML<sp/>input<sp/>field<sp/>will<sp/>look<sp/>like<sp/>this:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">&lt;input<sp/>type=&quot;text&quot;<sp/>name=&quot;userID&quot;<sp/>value=&quot;{{<sp/>@POST.userID<sp/>}}&quot;/&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>`save()`,<sp/>`update()`,<sp/>`copyFrom()`<sp/>data<sp/>mapper<sp/>methods<sp/>and<sp/>the<sp/>parameterized<sp/>variants<sp/>of<sp/>`load()`<sp/>and<sp/>`erase()`<sp/>are<sp/>safe<sp/>from<sp/>SQL<sp/>injection.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Navigation<sp/>and<sp/>Pagination</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">By<sp/>default,<sp/>a<sp/>data<sp/>mapper&apos;s<sp/>`load()`<sp/>method<sp/>retrieves<sp/>only<sp/>the<sp/>first<sp/>record<sp/>that<sp/>matches<sp/>the<sp/>specified<sp/>criteria.<sp/>If<sp/>you<sp/>have<sp/>more<sp/>than<sp/>one<sp/>that<sp/>meets<sp/>the<sp/>same<sp/>condition<sp/>as<sp/>the<sp/>first<sp/>record<sp/>loaded,<sp/>you<sp/>can<sp/>use<sp/>the<sp/>`skip()`<sp/>method<sp/>for<sp/>navigation:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$user=new<sp/>DB\SQL\Mapper($db,&apos;users&apos;);</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;load(&apos;visits&gt;3&apos;);</highlight></codeline>
<codeline><highlight class="normal">//<sp/>Rewritten<sp/>as<sp/>a<sp/>parameterized<sp/>query</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;load(array(&apos;visits&gt;?&apos;,3));</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">//<sp/>For<sp/>MongoDB<sp/>users:-</highlight></codeline>
<codeline><highlight class="normal">//<sp/>$user=new<sp/>DB\Mongo\Mapper($db,&apos;users&apos;);</highlight></codeline>
<codeline><highlight class="normal">//<sp/>$user-&gt;load(array(&apos;visits&apos;=&gt;array(&apos;$gt&apos;=&gt;3)));</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">//<sp/>If<sp/>you<sp/>prefer<sp/>Jig:-</highlight></codeline>
<codeline><highlight class="normal">//<sp/>$user=new<sp/>DB\Jig\Mapper($db,&apos;users&apos;);</highlight></codeline>
<codeline><highlight class="normal">//<sp/>$user-&gt;load(&apos;@visits&gt;?&apos;,3);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">//<sp/>Display<sp/>the<sp/>userID<sp/>of<sp/>the<sp/>first<sp/>record<sp/>that<sp/>matches<sp/>the<sp/>criteria</highlight></codeline>
<codeline><highlight class="normal">echo<sp/>$user-&gt;userID;</highlight></codeline>
<codeline><highlight class="normal">//<sp/>Go<sp/>to<sp/>the<sp/>next<sp/>record<sp/>that<sp/>matches<sp/>the<sp/>same<sp/>criteria</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;skip();<sp/>//<sp/>Same<sp/>as<sp/>$user-&gt;skip(1);</highlight></codeline>
<codeline><highlight class="normal">//<sp/>Back<sp/>to<sp/>the<sp/>first<sp/>record</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;skip(-1);</highlight></codeline>
<codeline><highlight class="normal">//<sp/>Move<sp/>three<sp/>records<sp/>forward</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;skip(3);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">You<sp/>may<sp/>use<sp/>`$user-&gt;next()`<sp/>as<sp/>a<sp/>substitute<sp/>for<sp/>`$user-&gt;skip()`,<sp/>and<sp/>`$user-&gt;prev()`<sp/>if<sp/>you<sp/>think<sp/>it<sp/>gives<sp/>more<sp/>meaning<sp/>to<sp/>`$user-&gt;skip(-1)`.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Use<sp/>the<sp/>`dry()`<sp/>method<sp/>to<sp/>check<sp/>if<sp/>you&apos;ve<sp/>maneuvered<sp/>beyond<sp/>the<sp/>limits<sp/>of<sp/>the<sp/>result<sp/>set.<sp/>`dry()`<sp/>will<sp/>return<sp/>TRUE<sp/>if<sp/>you<sp/>try<sp/>`skip(-1)`<sp/>on<sp/>the<sp/>first<sp/>record.<sp/>It<sp/>will<sp/>also<sp/>return<sp/>TRUE<sp/>if<sp/>you<sp/>`skip(1)`<sp/>on<sp/>the<sp/>last<sp/>record<sp/>that<sp/>meets<sp/>the<sp/>retrieval<sp/>criteria.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>`load()`<sp/>method<sp/>accepts<sp/>a<sp/>second<sp/>argument:<sp/>an<sp/>array<sp/>of<sp/>options<sp/>containing<sp/>key-value<sp/>pairs<sp/>such<sp/>as:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$user-&gt;load(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>array(&apos;visits&gt;?&apos;,3),</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>array(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;order&apos;=&gt;&apos;userID<sp/>DESC&apos;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;offset&apos;=&gt;5,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;limit&apos;=&gt;3</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>you&apos;re<sp/>using<sp/>MySQL,<sp/>the<sp/>query<sp/>translates<sp/>to:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>mysql</highlight></codeline>
<codeline><highlight class="normal">SELECT<sp/>*<sp/>FROM<sp/>users</highlight></codeline>
<codeline><highlight class="normal">WHERE<sp/>visits&gt;3</highlight></codeline>
<codeline><highlight class="normal">ORDER<sp/>BY<sp/>userID<sp/>DESC</highlight></codeline>
<codeline><highlight class="normal">LIMIT<sp/>3<sp/>OFFSET<sp/>5;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">This<sp/>is<sp/>one<sp/>way<sp/>of<sp/>presenting<sp/>data<sp/>in<sp/>small<sp/>chunks.<sp/>Here&apos;s<sp/>another<sp/>way<sp/>of<sp/>paginating<sp/>results:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$page=$user-&gt;paginate(2,5,array(&apos;visits&gt;?&apos;,3));</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">In<sp/>the<sp/>above<sp/>scenario,<sp/>F3<sp/>will<sp/>retrieve<sp/>records<sp/>that<sp/>match<sp/>the<sp/>criteria<sp/>`&apos;visits&gt;3&apos;`.<sp/>It<sp/>will<sp/>then<sp/>limit<sp/>the<sp/>results<sp/>to<sp/>5<sp/>records<sp/>(per<sp/>page)<sp/>starting<sp/>at<sp/>page<sp/>offset<sp/>2<sp/>(0-based).<sp/>The<sp/>framework<sp/>will<sp/>return<sp/>an<sp/>array<sp/>consisting<sp/>of<sp/>the<sp/>following<sp/>elements:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">[subset]<sp/>array<sp/>of<sp/>mapper<sp/>objects<sp/>that<sp/>match<sp/>the<sp/>criteria</highlight></codeline>
<codeline><highlight class="normal">[count]<sp/>number<sp/>of<sp/>subsets<sp/>available</highlight></codeline>
<codeline><highlight class="normal">[pos]<sp/>actual<sp/>subset<sp/>position</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>actual<sp/>subset<sp/>position<sp/>returned<sp/>will<sp/>be<sp/>NULL<sp/>if<sp/>the<sp/>first<sp/>argument<sp/>of<sp/>`paginate()`<sp/>is<sp/>a<sp/>negative<sp/>number<sp/>or<sp/>exceeds<sp/>the<sp/>number<sp/>of<sp/>subsets<sp/>found.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Virtual<sp/>Fields</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">There<sp/>are<sp/>instances<sp/>when<sp/>you<sp/>need<sp/>to<sp/>retrieve<sp/>a<sp/>computed<sp/>value<sp/>of<sp/>a<sp/>field,<sp/>or<sp/>a<sp/>cross-referenced<sp/>value<sp/>from<sp/>another<sp/>table.<sp/>Enter<sp/>virtual<sp/>fields.<sp/>The<sp/>SQL<sp/>mini-ORM<sp/>allows<sp/>you<sp/>to<sp/>work<sp/>on<sp/>data<sp/>derived<sp/>from<sp/>existing<sp/>fields.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Suppose<sp/>we<sp/>have<sp/>the<sp/>following<sp/>table<sp/>defined<sp/>as:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>sql</highlight></codeline>
<codeline><highlight class="normal">CREATE<sp/>TABLE<sp/>products</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>productID<sp/>VARCHAR(30),</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>description<sp/>VARCHAR(255),</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>supplierID<sp/>VARCHAR(30),</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>unitprice<sp/>DECIMAL(10,2),</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>quantity<sp/>INT,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>PRIMARY<sp/>KEY(productID)</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">No<sp/>`totalprice`<sp/>field<sp/>exists,<sp/>so<sp/>we<sp/>can<sp/>tell<sp/>the<sp/>framework<sp/>to<sp/>request<sp/>from<sp/>the<sp/>database<sp/>engine<sp/>the<sp/>arithmetic<sp/>product<sp/>of<sp/>the<sp/>two<sp/>fields:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$item=new<sp/>DB\SQL\Mapper($db,&apos;products&apos;);</highlight></codeline>
<codeline><highlight class="normal">$item-&gt;totalprice=&apos;unitprice*quantity&apos;;</highlight></codeline>
<codeline><highlight class="normal">$item-&gt;load(array(&apos;productID=:pid&apos;,&apos;:pid&apos;=&gt;&apos;apple&apos;));</highlight></codeline>
<codeline><highlight class="normal">echo<sp/>$item-&gt;totalprice;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>above<sp/>code<sp/>snippet<sp/>defines<sp/>a<sp/>virtual<sp/>field<sp/>called<sp/>`totalprice`<sp/>which<sp/>is<sp/>computed<sp/>by<sp/>multiplying<sp/>`unitprice`<sp/>by<sp/>the<sp/>`quantity`.<sp/>The<sp/>SQL<sp/>mapper<sp/>saves<sp/>that<sp/>rule/formula,<sp/>so<sp/>when<sp/>the<sp/>time<sp/>comes<sp/>to<sp/>retrieve<sp/>the<sp/>record<sp/>from<sp/>the<sp/>database,<sp/>we<sp/>can<sp/>use<sp/>the<sp/>virtual<sp/>field<sp/>like<sp/>a<sp/>regular<sp/>mapped<sp/>field.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">You<sp/>can<sp/>have<sp/>more<sp/>complex<sp/>virtual<sp/>fields:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$item-&gt;mostNumber=&apos;MAX(quantity)&apos;;</highlight></codeline>
<codeline><highlight class="normal">$item-&gt;load();</highlight></codeline>
<codeline><highlight class="normal">echo<sp/>$item-&gt;mostNumber;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">This<sp/>time<sp/>the<sp/>framework<sp/>retrieves<sp/>the<sp/>product<sp/>with<sp/>the<sp/>highest<sp/>quantity<sp/>(notice<sp/>the<sp/>`load()`<sp/>method<sp/>does<sp/>not<sp/>define<sp/>any<sp/>criteria,<sp/>so<sp/>all<sp/>records<sp/>in<sp/>the<sp/>table<sp/>will<sp/>be<sp/>processed).<sp/>Of<sp/>course,<sp/>the<sp/>virtual<sp/>field<sp/>`mostNumber`<sp/>will<sp/>still<sp/>give<sp/>you<sp/>the<sp/>right<sp/>figure<sp/>if<sp/>you<sp/>wish<sp/>to<sp/>limit<sp/>the<sp/>expression<sp/>to<sp/>a<sp/>specific<sp/>group<sp/>of<sp/>records<sp/>that<sp/>match<sp/>a<sp/>specified<sp/>criteria.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">You<sp/>can<sp/>also<sp/>derive<sp/>a<sp/>value<sp/>from<sp/>another<sp/>table:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$item-&gt;supplierName=</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;SELECT<sp/>name<sp/>FROM<sp/>suppliers<sp/>&apos;.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;WHERE<sp/>products.supplierID=suppliers.supplierID&apos;;</highlight></codeline>
<codeline><highlight class="normal">$item-&gt;load();</highlight></codeline>
<codeline><highlight class="normal">echo<sp/>$item-&gt;supplierName;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Every<sp/>time<sp/>you<sp/>load<sp/>a<sp/>record<sp/>from<sp/>the<sp/>products<sp/>table,<sp/>the<sp/>ORM<sp/>cross-references<sp/>the<sp/>`supplerID`<sp/>in<sp/>the<sp/>`products`<sp/>table<sp/>with<sp/>the<sp/>`supplierID`<sp/>in<sp/>the<sp/>`suppliers`<sp/>table.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">To<sp/>destroy<sp/>a<sp/>virtual<sp/>field,<sp/>use<sp/>`unset($item-&gt;totalPrice);`.<sp/>The<sp/>`isset($item-&gt;totalPrice)`<sp/>expression<sp/>returns<sp/>TRUE<sp/>if<sp/>the<sp/>`totalPrice`<sp/>virtual<sp/>field<sp/>was<sp/>defined,<sp/>or<sp/>FALSE<sp/>if<sp/>otherwise.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Remember<sp/>that<sp/>a<sp/>virtual<sp/>field<sp/>must<sp/>be<sp/>defined<sp/>prior<sp/>to<sp/>data<sp/>retrieval.<sp/>The<sp/>ORM<sp/>does<sp/>not<sp/>perform<sp/>the<sp/>actual<sp/>computation,<sp/>nor<sp/>the<sp/>derivation<sp/>of<sp/>results<sp/>from<sp/>another<sp/>table.<sp/>It<sp/>is<sp/>the<sp/>database<sp/>engine<sp/>that<sp/>does<sp/>all<sp/>the<sp/>hard<sp/>work.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Seek<sp/>and<sp/>You<sp/>Shall<sp/>Find</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>you<sp/>have<sp/>no<sp/>need<sp/>for<sp/>record-by-record<sp/>navigation,<sp/>you<sp/>can<sp/>retrieve<sp/>an<sp/>entire<sp/>batch<sp/>of<sp/>records<sp/>in<sp/>one<sp/>shot:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$frequentUsers=$user-&gt;find(array(&apos;visits&gt;?&apos;,3),array(&apos;order&apos;=&gt;&apos;userID&apos;));</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Jig<sp/>mapper&apos;s<sp/>query<sp/>syntax<sp/>has<sp/>a<sp/>slight<sp/>resemblance:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$frequentUsers=$user-&gt;find(array(&apos;@visits&gt;?&apos;,3),array(&apos;order&apos;=&gt;&apos;userID&apos;));</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>equivalent<sp/>code<sp/>using<sp/>the<sp/>MongoDB<sp/>mapper:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$frequentUsers=$user-&gt;find(array(&apos;visits&apos;=&gt;array(&apos;$gt&apos;=&gt;3)),array(&apos;userID&apos;=&gt;1));</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>`find()`<sp/>method<sp/>searches<sp/>the<sp/>`users`<sp/>table<sp/>for<sp/>records<sp/>that<sp/>match<sp/>the<sp/>criteria,<sp/>sorts<sp/>the<sp/>result<sp/>by<sp/>`userID`<sp/>and<sp/>returns<sp/>the<sp/>result<sp/>as<sp/>an<sp/>array<sp/>of<sp/>mapper<sp/>objects.<sp/>`find(&apos;visits&gt;3&apos;)`<sp/>is<sp/>different<sp/>from<sp/>`load(&apos;visits&gt;3&apos;)`.<sp/>The<sp/>latter<sp/>refers<sp/>to<sp/>the<sp/>current<sp/>`$user`<sp/>object.<sp/>`find()`<sp/>does<sp/>not<sp/>have<sp/>any<sp/>effect<sp/>on<sp/>`skip()`.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">**Important:**<sp/>Declaring<sp/>an<sp/>empty<sp/>condition,<sp/>NULL,<sp/>or<sp/>a<sp/>zero-length<sp/>string<sp/>as<sp/>the<sp/>first<sp/>argument<sp/>of<sp/>`find()`<sp/>or<sp/>`load()`<sp/>will<sp/>retrieve<sp/>all<sp/>records.<sp/>Be<sp/>sure<sp/>you<sp/>know<sp/>what<sp/>you&apos;re<sp/>doing<sp/>-<sp/>you<sp/>might<sp/>exceed<sp/>PHP&apos;s<sp/>memory_limit<sp/>on<sp/>large<sp/>tables<sp/>or<sp/>collections.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>`find()`<sp/>method<sp/>has<sp/>the<sp/>following<sp/>syntax:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">find(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>$criteria,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>array(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;group&apos;=&gt;&apos;foo&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;order&apos;=&gt;&apos;foo,bar&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;limit&apos;=&gt;5,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;offset&apos;=&gt;0</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">find()<sp/>returns<sp/>an<sp/>array<sp/>of<sp/>objects.<sp/>Each<sp/>object<sp/>is<sp/>a<sp/>mapper<sp/>to<sp/>a<sp/>record<sp/>that<sp/>matches<sp/>the<sp/>specified<sp/>criteria.:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$place=new<sp/>DB\SQL\Mapper($db,&apos;places&apos;);</highlight></codeline>
<codeline><highlight class="normal">$list=$place-&gt;find(&apos;state=&quot;New<sp/>York&quot;&apos;);</highlight></codeline>
<codeline><highlight class="normal">foreach<sp/>($list<sp/>as<sp/>$obj)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>echo<sp/>$obj-&gt;city.&apos;,<sp/>&apos;.$obj-&gt;country;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>you<sp/>need<sp/>to<sp/>convert<sp/>a<sp/>mapper<sp/>object<sp/>to<sp/>an<sp/>associative<sp/>array,<sp/>use<sp/>the<sp/>`cast()`<sp/>method:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$array=$place-&gt;cast();</highlight></codeline>
<codeline><highlight class="normal">echo<sp/>$array[&apos;city&apos;].&apos;,<sp/>&apos;.$array[&apos;country&apos;];</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">To<sp/>retrieve<sp/>the<sp/>number<sp/>of<sp/>records<sp/>in<sp/>a<sp/>table<sp/>that<sp/>match<sp/>a<sp/>certain<sp/>condition,<sp/>use<sp/>the<sp/>`count()`<sp/>method.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">if<sp/>(!$user-&gt;count(array(&apos;visits&gt;?&apos;,10)))</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>echo<sp/>&apos;We<sp/>need<sp/>a<sp/>better<sp/>ad<sp/>campaign!&apos;;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">There&apos;s<sp/>also<sp/>a<sp/>`select()`<sp/>method<sp/>that&apos;s<sp/>similar<sp/>to<sp/>`find()`<sp/>but<sp/>provides<sp/>more<sp/>fine-grained<sp/>control<sp/>over<sp/>fields<sp/>returned.<sp/>It<sp/>has<sp/>a<sp/>SQL-like<sp/>syntax:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">select(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;foo,<sp/>bar,<sp/>MIN(baz)<sp/>AS<sp/>lowest&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;foo<sp/>&gt;<sp/>?&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>array(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;group&apos;=&gt;&apos;foo,<sp/>bar&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;order&apos;=&gt;&apos;baz<sp/>ASC&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;limit&apos;=&gt;5,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;offset&apos;=&gt;3</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Much<sp/>like<sp/>the<sp/>`find()`<sp/>method,<sp/>`select()`<sp/>does<sp/>not<sp/>alter<sp/>the<sp/>mapper<sp/>object&apos;s<sp/>contents.<sp/>It<sp/>only<sp/>serves<sp/>as<sp/>a<sp/>convenience<sp/>method<sp/>for<sp/>querying<sp/>a<sp/>mapped<sp/>table.<sp/>The<sp/>return<sp/>value<sp/>of<sp/>both<sp/>methods<sp/>is<sp/>an<sp/>array<sp/>of<sp/>mapper<sp/>objects.<sp/>Using<sp/>`dry()`<sp/>to<sp/>determine<sp/>whether<sp/>a<sp/>record<sp/>was<sp/>found<sp/>by<sp/>an<sp/>of<sp/>these<sp/>methods<sp/>is<sp/>inappropriate.<sp/>If<sp/>no<sp/>records<sp/>match<sp/>the<sp/>`find()`<sp/>or<sp/>`select()`<sp/>criteria,<sp/>the<sp/>return<sp/>value<sp/>is<sp/>an<sp/>empty<sp/>array.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Profiling</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>you<sp/>ever<sp/>want<sp/>to<sp/>find<sp/>out<sp/>which<sp/>SQL<sp/>statements<sp/>issued<sp/>directly<sp/>by<sp/>your<sp/>application<sp/>(or<sp/>indirectly<sp/>thru<sp/>mapper<sp/>objects)<sp/>are<sp/>causing<sp/>performance<sp/>bottlenecks,<sp/>you<sp/>can<sp/>do<sp/>so<sp/>with<sp/>a<sp/>simple:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">echo<sp/>$db-&gt;log();</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3<sp/>keeps<sp/>track<sp/>of<sp/>all<sp/>commands<sp/>issued<sp/>to<sp/>the<sp/>underlying<sp/>SQL<sp/>database<sp/>driver,<sp/>as<sp/>well<sp/>as<sp/>the<sp/>time<sp/>it<sp/>takes<sp/>for<sp/>each<sp/>statement<sp/>to<sp/>complete<sp/>-<sp/>just<sp/>the<sp/>right<sp/>information<sp/>you<sp/>need<sp/>to<sp/>tweak<sp/>application<sp/>performance.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Sometimes<sp/>It<sp/>Just<sp/>Ain&apos;t<sp/>Enough</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">In<sp/>most<sp/>cases,<sp/>you<sp/>can<sp/>live<sp/>by<sp/>the<sp/>comforts<sp/>given<sp/>by<sp/>the<sp/>data<sp/>mapper<sp/>methods<sp/>we&apos;ve<sp/>discussed<sp/>so<sp/>far.<sp/>If<sp/>you<sp/>need<sp/>the<sp/>framework<sp/>to<sp/>do<sp/>some<sp/>heavy-duty<sp/>work,<sp/>you<sp/>can<sp/>extend<sp/>the<sp/>SQL<sp/>mapper<sp/>by<sp/>declaring<sp/>your<sp/>own<sp/>classes<sp/>with<sp/>custom<sp/>methods<sp/>-<sp/>but<sp/>you<sp/>can&apos;t<sp/>avoid<sp/>getting<sp/>your<sp/>hands<sp/>greasy<sp/>on<sp/>some<sp/>hardcore<sp/>SQL:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">class<sp/>Vendor<sp/>extends<sp/>DB\SQL\Mapper<sp/>{</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>Instantiate<sp/>mapper</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>function<sp/>__construct(DB\SQL<sp/>$db)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>This<sp/>is<sp/>where<sp/>the<sp/>mapper<sp/>and<sp/>DB<sp/>structure<sp/>synchronization<sp/>occurs</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>parent::__construct($db,&apos;vendors&apos;);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>Specialized<sp/>query</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>function<sp/>listByCity()<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>$this-&gt;select(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;vendorID,name,city&apos;,array(&apos;order&apos;=&gt;&apos;city<sp/>DESC&apos;));</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>/*</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>We<sp/>could<sp/>have<sp/>done<sp/>the<sp/>the<sp/>same<sp/>thing<sp/>with<sp/>plain<sp/>vanilla<sp/>SQL:-</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>$this-&gt;db-&gt;exec(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;SELECT<sp/>vendorID,name,city<sp/>FROM<sp/>vendors<sp/>&apos;.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;ORDER<sp/>BY<sp/>city<sp/>DESC;&apos;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">$vendor=new<sp/>Vendor;</highlight></codeline>
<codeline><highlight class="normal">$vendor-&gt;listByCity();</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Extending<sp/>the<sp/>data<sp/>mappers<sp/>in<sp/>this<sp/>fashion<sp/>is<sp/>an<sp/>easy<sp/>way<sp/>to<sp/>construct<sp/>your<sp/>application&apos;s<sp/>DB-related<sp/>models.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Pros<sp/>and<sp/>Cons</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>you&apos;re<sp/>handy<sp/>with<sp/>SQL,<sp/>you&apos;d<sp/>probably<sp/>say:<sp/>everything<sp/>in<sp/>the<sp/>ORM<sp/>can<sp/>be<sp/>handled<sp/>with<sp/>old-school<sp/>SQL<sp/>queries.<sp/>Indeed.<sp/>We<sp/>can<sp/>do<sp/>without<sp/>the<sp/>additional<sp/>event<sp/>listeners<sp/>by<sp/>using<sp/>database<sp/>triggers<sp/>and<sp/>stored<sp/>procedures.<sp/>We<sp/>can<sp/>accomplish<sp/>relational<sp/>queries<sp/>with<sp/>joined<sp/>tables.<sp/>The<sp/>ORM<sp/>is<sp/>just<sp/>unnecessary<sp/>overhead.<sp/>But<sp/>the<sp/>point<sp/>is<sp/>-<sp/>data<sp/>mappers<sp/>give<sp/>you<sp/>the<sp/>added<sp/>functionality<sp/>of<sp/>using<sp/>objects<sp/>to<sp/>represent<sp/>database<sp/>entities.<sp/>As<sp/>a<sp/>developer,<sp/>you<sp/>can<sp/>write<sp/>code<sp/>faster<sp/>and<sp/>be<sp/>more<sp/>productive.<sp/>The<sp/>resulting<sp/>program<sp/>will<sp/>be<sp/>cleaner,<sp/>if<sp/>not<sp/>shorter.<sp/>But<sp/>you&apos;ll<sp/>have<sp/>to<sp/>weigh<sp/>the<sp/>benefits<sp/>against<sp/>the<sp/>compromise<sp/>in<sp/>speed<sp/>-<sp/>specially<sp/>when<sp/>handling<sp/>large<sp/>and<sp/>complex<sp/>data<sp/>stores.<sp/>Remember,<sp/>all<sp/>ORMS<sp/>-<sp/>no<sp/>matter<sp/>how<sp/>thin<sp/>they<sp/>are<sp/>-<sp/>will<sp/>always<sp/>be<sp/>just<sp/>another<sp/>abstraction<sp/>layer.<sp/>They<sp/>still<sp/>have<sp/>to<sp/>pass<sp/>the<sp/>work<sp/>to<sp/>the<sp/>underlying<sp/>SQL<sp/>engines.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">By<sp/>design,<sp/>F3&apos;s<sp/>ORMs<sp/>do<sp/>not<sp/>provide<sp/>methods<sp/>for<sp/>directly<sp/>connecting<sp/>objects<sp/>to<sp/>each<sp/>other,<sp/>i.e.<sp/>SQL<sp/>joins<sp/>-<sp/>because<sp/>this<sp/>opens<sp/>up<sp/>a<sp/>can<sp/>of<sp/>worms.<sp/>It<sp/>makes<sp/>your<sp/>application<sp/>more<sp/>complex<sp/>than<sp/>it<sp/>should<sp/>be,<sp/>and<sp/>there&apos;s<sp/>the<sp/>tendency<sp/>of<sp/>objects<sp/>thru<sp/>eager<sp/>or<sp/>lazy<sp/>fetching<sp/>techniques<sp/>to<sp/>be<sp/>deadlocked<sp/>and<sp/>even<sp/>out<sp/>of<sp/>sync<sp/>due<sp/>to<sp/>object<sp/>inheritance<sp/>and<sp/>polymorphism<sp/>(impedance<sp/>mismatch)<sp/>with<sp/>the<sp/>database<sp/>entities<sp/>they&apos;re<sp/>mapped<sp/>to.<sp/>There<sp/>are<sp/>indirect<sp/>ways<sp/>of<sp/>doing<sp/>it<sp/>in<sp/>the<sp/>SQL<sp/>mapper,<sp/>using<sp/>virtual<sp/>fields<sp/>-<sp/>but<sp/>you&apos;ll<sp/>have<sp/>to<sp/>do<sp/>this<sp/>programmatically<sp/>and<sp/>at<sp/>your<sp/>own<sp/>risk.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>you<sp/>are<sp/>tempted<sp/>to<sp/>apply<sp/>&quot;pure&quot;<sp/>OOP<sp/>concepts<sp/>in<sp/>your<sp/>application<sp/>to<sp/>represent<sp/>all<sp/>your<sp/>data<sp/>(because<sp/>&quot;everything<sp/>is<sp/>an<sp/>object&quot;),<sp/>keep<sp/>in<sp/>mind<sp/>that<sp/>data<sp/>almost<sp/>always<sp/>lives<sp/>longer<sp/>than<sp/>the<sp/>application.<sp/>Your<sp/>program<sp/>may<sp/>already<sp/>be<sp/>outdated<sp/>long<sp/>before<sp/>the<sp/>data<sp/>has<sp/>lost<sp/>its<sp/>value.<sp/>Don&apos;t<sp/>add<sp/>another<sp/>layer<sp/>of<sp/>complexity<sp/>in<sp/>your<sp/>program<sp/>by<sp/>using<sp/>intertwined<sp/>objects<sp/>and<sp/>classes<sp/>that<sp/>deviate<sp/>too<sp/>much<sp/>from<sp/>the<sp/>schema<sp/>and<sp/>physical<sp/>structure<sp/>of<sp/>the<sp/>data.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Before<sp/>you<sp/>weave<sp/>multiple<sp/>objects<sp/>together<sp/>in<sp/>your<sp/>application<sp/>to<sp/>manipulate<sp/>the<sp/>underlying<sp/>tables<sp/>in<sp/>your<sp/>database,<sp/>think<sp/>about<sp/>this:<sp/>creating<sp/>views<sp/>to<sp/>represent<sp/>relationships<sp/>and<sp/>triggers<sp/>to<sp/>define<sp/>object<sp/>behavior<sp/>in<sp/>the<sp/>database<sp/>engine<sp/>are<sp/>more<sp/>efficient.<sp/>Relational<sp/>database<sp/>engines<sp/>are<sp/>designed<sp/>to<sp/>handle<sp/>views,<sp/>joined<sp/>tables<sp/>and<sp/>triggers.<sp/>They<sp/>are<sp/>not<sp/>dumb<sp/>data<sp/>stores.<sp/>Tables<sp/>joined<sp/>in<sp/>a<sp/>view<sp/>will<sp/>appear<sp/>as<sp/>a<sp/>single<sp/>table,<sp/>and<sp/>Fat-Free<sp/>can<sp/>auto-map<sp/>a<sp/>view<sp/>just<sp/>as<sp/>well<sp/>as<sp/>a<sp/>regular<sp/>table.<sp/>Replicating<sp/>JOINs<sp/>as<sp/>relational<sp/>objects<sp/>in<sp/>PHP<sp/>is<sp/>slower<sp/>compared<sp/>to<sp/>the<sp/>database<sp/>engine&apos;s<sp/>machine<sp/>code,<sp/>relational<sp/>algebra<sp/>and<sp/>optimization<sp/>logic.<sp/>Besides,<sp/>joining<sp/>tables<sp/>repeatedly<sp/>in<sp/>our<sp/>application<sp/>is<sp/>a<sp/>sure<sp/>sign<sp/>that<sp/>the<sp/>database<sp/>design<sp/>needs<sp/>to<sp/>be<sp/>audited,<sp/>and<sp/>views<sp/>considered<sp/>an<sp/>integral<sp/>part<sp/>of<sp/>data<sp/>retrieval.<sp/>If<sp/>a<sp/>table<sp/>cross-references<sp/>data<sp/>from<sp/>another<sp/>table<sp/>frequently,<sp/>consider<sp/>normalizing<sp/>your<sp/>structures<sp/>or<sp/>creating<sp/>a<sp/>view<sp/>instead.<sp/>Then<sp/>create<sp/>a<sp/>mapper<sp/>object<sp/>to<sp/>auto-map<sp/>that<sp/>view.<sp/>It&apos;s<sp/>faster<sp/>and<sp/>requires<sp/>less<sp/>effort.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Consider<sp/>this<sp/>SQL<sp/>view<sp/>created<sp/>inside<sp/>your<sp/>database<sp/>engine:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>sql</highlight></codeline>
<codeline><highlight class="normal">CREATE<sp/>VIEW<sp/>combined<sp/>AS</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>SELECT</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>projects.project_id<sp/>AS<sp/>project,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>users.name<sp/>AS<sp/>name</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>FROM<sp/>projects</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>LEFT<sp/>OUTER<sp/>JOIN<sp/>users<sp/>ON</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>projects.project_id=users.project_id<sp/>AND</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>projects.user_id=users.user_id;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Your<sp/>application<sp/>code<sp/>becomes<sp/>simple<sp/>because<sp/>it<sp/>does<sp/>not<sp/>have<sp/>to<sp/>maintain<sp/>two<sp/>mapper<sp/>objects<sp/>(one<sp/>for<sp/>the<sp/>projects<sp/>table<sp/>and<sp/>another<sp/>for<sp/>users)<sp/>just<sp/>to<sp/>retrieve<sp/>data<sp/>from<sp/>two<sp/>joined<sp/>tables:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$combined=new<sp/>DB\SQL\Mapper($db,&apos;combined&apos;);</highlight></codeline>
<codeline><highlight class="normal">$combined-&gt;load(array(&apos;project=?&apos;,123));</highlight></codeline>
<codeline><highlight class="normal">echo<sp/>$combined-&gt;name;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Tip:Use<sp/>the<sp/>tools<sp/>as<sp/>they&apos;re<sp/>designed<sp/>for.<sp/>Fat-Free<sp/>already<sp/>has<sp/>an<sp/>easy-to-use<sp/>SQL<sp/>helper.<sp/>Use<sp/>it<sp/>if<sp/>you<sp/>need<sp/>a<sp/>bigger<sp/>hammer<sp/>:)<sp/>Try<sp/>to<sp/>seek<sp/>a<sp/>balance<sp/>between<sp/>convenience<sp/>and<sp/>performance.<sp/>SQL<sp/>will<sp/>always<sp/>be<sp/>your<sp/>fallback<sp/>if<sp/>you&apos;re<sp/>working<sp/>on<sp/>complex<sp/>and<sp/>legacy<sp/>data<sp/>structures.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>Plug-Ins</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>About<sp/>F3<sp/>Plug-ins</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Plug-ins<sp/>are<sp/>nothing<sp/>more<sp/>than<sp/>autoloaded<sp/>classes<sp/>that<sp/>use<sp/>framework<sp/>built-ins<sp/>to<sp/>extend<sp/>F3&apos;s<sp/>features<sp/>and<sp/>functionality.<sp/>If<sp/>you&apos;d<sp/>like<sp/>to<sp/>contribute,<sp/>leave<sp/>a<sp/>note<sp/>at<sp/>the<sp/>Fat-Free<sp/>Discussion<sp/>Area<sp/>hosted<sp/>by<sp/>Google<sp/>Groups<sp/>or<sp/>tell<sp/>us<sp/>about<sp/>it<sp/>in<sp/>the<sp/>FreeNode<sp/>`#fatfree`<sp/>IRC<sp/>channel.<sp/>Someone<sp/>else<sp/>might<sp/>be<sp/>involved<sp/>in<sp/>a<sp/>similar<sp/>project.<sp/>The<sp/>framework<sp/>community<sp/>will<sp/>appreciate<sp/>it<sp/>a<sp/>lot<sp/>if<sp/>we<sp/>unify<sp/>our<sp/>efforts.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>CAPTCHA<sp/>Images</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">There<sp/>might<sp/>be<sp/>instances<sp/>when<sp/>you<sp/>want<sp/>to<sp/>make<sp/>your<sp/>forms<sp/>more<sp/>secure<sp/>against<sp/>spam<sp/>bots<sp/>and<sp/>malicious<sp/>automated<sp/>scripts.<sp/>F3<sp/>provides<sp/>a<sp/>`captcha()`<sp/>method<sp/>to<sp/>generate<sp/>images<sp/>with<sp/>random<sp/>text<sp/>that<sp/>are<sp/>designed<sp/>to<sp/>be<sp/>recognizable<sp/>only<sp/>by<sp/>humans.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$img<sp/>=<sp/>new<sp/>Image();</highlight></codeline>
<codeline><highlight class="normal">$img-&gt;captcha(&apos;fonts/CoolFont.ttf&apos;,16,5,&apos;SESSION.captcha_code&apos;);</highlight></codeline>
<codeline><highlight class="normal">$img-&gt;render();</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">This<sp/>example<sp/>generates<sp/>an<sp/>random<sp/>image<sp/>based<sp/>on<sp/>your<sp/>desired<sp/>TrueType<sp/>font.<sp/>The<sp/>`fonts/`<sp/>folder<sp/>is<sp/>a<sp/>subfolder<sp/>within<sp/>application&apos;s<sp/>`UI`<sp/>path.<sp/>The<sp/>second<sp/>parameter<sp/>indicates<sp/>the<sp/>font<sp/>size,<sp/>and<sp/>the<sp/>third<sp/>argument<sp/>defines<sp/>the<sp/>number<sp/>of<sp/>hexadecimal<sp/>characters<sp/>to<sp/>generate.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>last<sp/>argument<sp/>represents<sp/>an<sp/>F3<sp/>variable<sp/>name.<sp/>This<sp/>is<sp/>where<sp/>F3<sp/>will<sp/>store<sp/>the<sp/>string<sp/>equivalent<sp/>of<sp/>the<sp/>CAPTCHA<sp/>image.<sp/>To<sp/>make<sp/>the<sp/>string<sp/>reload-safe,<sp/>we<sp/>specified<sp/>a<sp/>session<sp/>variable:-<sp/>`SESSION.captcha_code`<sp/>which<sp/>maps<sp/>to<sp/>`$_SESSION[&apos;captcha_code&apos;]`,<sp/>which<sp/>you<sp/>can<sp/>use<sp/>later<sp/>to<sp/>verify<sp/>whether<sp/>the<sp/>input<sp/>element<sp/>in<sp/>the<sp/>form<sp/>submitted<sp/>matches<sp/>this<sp/>string.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Grabbing<sp/>Data<sp/>from<sp/>Another<sp/>Site</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">We&apos;ve<sp/>covered<sp/>almost<sp/>every<sp/>feature<sp/>available<sp/>in<sp/>the<sp/>framework<sp/>to<sp/>run<sp/>a<sp/>stand-alone<sp/>Web<sp/>server.<sp/>For<sp/>most<sp/>applications,<sp/>these<sp/>features<sp/>will<sp/>serve<sp/>you<sp/>quite<sp/>well.<sp/>But<sp/>what<sp/>do<sp/>you<sp/>do<sp/>if<sp/>your<sp/>application<sp/>needs<sp/>data<sp/>from<sp/>another<sp/>Web<sp/>server<sp/>on<sp/>the<sp/>network?<sp/>F3<sp/>has<sp/>the<sp/>Web<sp/>plugin<sp/>to<sp/>help<sp/>you<sp/>in<sp/>this<sp/>situation:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$web=new<sp/>Web;</highlight></codeline>
<codeline><highlight class="normal">$request=$web-&gt;request(&apos;http://www.google.com/&apos;);</highlight></codeline>
<codeline><highlight class="normal">//<sp/>another<sp/>way<sp/>to<sp/>do<sp/>it:-</highlight></codeline>
<codeline><highlight class="normal">$request=Web::instance()-&gt;request(&apos;http://www.google.com/&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">This<sp/>simple<sp/>example<sp/>sends<sp/>an<sp/>HTTP<sp/>request<sp/>to<sp/>the<sp/>page<sp/>located<sp/>at<sp/>www.google.com<sp/>and<sp/>stores<sp/>it<sp/>in<sp/>the<sp/>`$request`<sp/>PHP<sp/>variable.<sp/>The<sp/>`request()`<sp/>method<sp/>returns<sp/>an<sp/>array<sp/>containing<sp/>the<sp/>HTTP<sp/>response<sp/>such<sp/>that<sp/>`$request[&apos;headers&apos;]`<sp/>and<sp/>`$request[&apos;body&apos;]`<sp/>represent<sp/>the<sp/>response<sp/>headers<sp/>and<sp/>body,<sp/>respectively.<sp/>We<sp/>could<sp/>have<sp/>saved<sp/>the<sp/>contents<sp/>using<sp/>the<sp/>F3::set<sp/>command,<sp/>or<sp/>echo&apos;ed<sp/>the<sp/>output<sp/>directly<sp/>to<sp/>our<sp/>browser.<sp/>Retrieving<sp/>another<sp/>HTML<sp/>page<sp/>on<sp/>the<sp/>net<sp/>may<sp/>not<sp/>have<sp/>any<sp/>practical<sp/>purpose.<sp/>But<sp/>it<sp/>can<sp/>be<sp/>particularly<sp/>useful<sp/>in<sp/>ReSTful<sp/>applications,<sp/>like<sp/>querying<sp/>a<sp/>CouchDB<sp/>server.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$host=&apos;localhost:5984&apos;;</highlight></codeline>
<codeline><highlight class="normal">$web-&gt;request($host.&apos;/_all_dbs&apos;),</highlight></codeline>
<codeline><highlight class="normal">$web-&gt;request($host.&apos;/testdb/&apos;,array(&apos;method&apos;=&gt;&apos;PUT&apos;));</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">You<sp/>may<sp/>have<sp/>noticed<sp/>that<sp/>you<sp/>can<sp/>pass<sp/>an<sp/>array<sp/>of<sp/>additional<sp/>options<sp/>to<sp/>the<sp/>`request()`<sp/>method:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$web-&gt;request(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;https://www.example.com:443?&apos;.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>http_build_query(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>array(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;key1&apos;=&gt;&apos;value1&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;key2&apos;=&gt;&apos;value2&apos;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>),</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>array(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;headers&apos;=&gt;array(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;Accept:<sp/>text/html,application/xhtml+xml,application/xml&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;Accept-Language:<sp/>en-us&apos;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>),</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;follow_location&apos;=&gt;FALSE,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;max_redirects&apos;=&gt;30,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;ignore_errors&apos;=&gt;TRUE</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>the<sp/>framework<sp/>variable<sp/>`CACHE`<sp/>is<sp/>enabled,<sp/>and<sp/>if<sp/>the<sp/>remote<sp/>server<sp/>instructs<sp/>your<sp/>application<sp/>to<sp/>cache<sp/>the<sp/>response<sp/>to<sp/>the<sp/>HTTP<sp/>request,<sp/>F3<sp/>will<sp/>comply<sp/>with<sp/>the<sp/>request<sp/>and<sp/>retrieve<sp/>the<sp/>cached<sp/>response<sp/>each<sp/>time<sp/>the<sp/>framework<sp/>receives<sp/>a<sp/>similar<sp/>request<sp/>from<sp/>your<sp/>application,<sp/>thus<sp/>behaving<sp/>like<sp/>a<sp/>browser.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Fat-Free<sp/>will<sp/>use<sp/>whatever<sp/>means<sp/>are<sp/>available<sp/>on<sp/>your<sp/>Web<sp/>server<sp/>for<sp/>the<sp/>`request()`<sp/>method<sp/>to<sp/>run:<sp/>PHP<sp/>stream<sp/>wrappers<sp/>(`allow_url_fopen`),<sp/>cURL<sp/>module,<sp/>or<sp/>low-level<sp/>sockets.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Handling<sp/>File<sp/>Downloads</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3<sp/>has<sp/>a<sp/>utility<sp/>for<sp/>sending<sp/>files<sp/>to<sp/>an<sp/>HTTP<sp/>client,<sp/>i.e.<sp/>fulfilling<sp/>download<sp/>requests.<sp/>You<sp/>can<sp/>use<sp/>it<sp/>to<sp/>hide<sp/>the<sp/>real<sp/>path<sp/>to<sp/>your<sp/>download<sp/>files.<sp/>This<sp/>adds<sp/>some<sp/>layer<sp/>of<sp/>security<sp/>because<sp/>users<sp/>won&apos;t<sp/>be<sp/>able<sp/>to<sp/>download<sp/>files<sp/>if<sp/>they<sp/>don&apos;t<sp/>know<sp/>the<sp/>file<sp/>names<sp/>and<sp/>their<sp/>locations.<sp/>Here&apos;s<sp/>how<sp/>it&apos;s<sp/>done:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET<sp/>/downloads/@filename&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>function($f3,$args)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>send()<sp/>method<sp/>returns<sp/>FALSE<sp/>if<sp/>file<sp/>doesn&apos;t<sp/>exist</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(!Web::instance()-&gt;send(&apos;/real/path/&apos;.$args[&apos;filename&apos;]))</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Generate<sp/>an<sp/>HTTP<sp/>404</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$f3-&gt;error(404);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Remoting<sp/>and<sp/>Distributed<sp/>Applications</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>`request()`<sp/>method<sp/>can<sp/>also<sp/>be<sp/>used<sp/>in<sp/>complex<sp/>SOAP<sp/>or<sp/>XML-RPC<sp/>applications,<sp/>if<sp/>you<sp/>find<sp/>the<sp/>need<sp/>for<sp/>another<sp/>Web<sp/>server<sp/>to<sp/>process<sp/>data<sp/>on<sp/>your<sp/>computer&apos;s<sp/>behalf<sp/>-<sp/>thus<sp/>harnessing<sp/>the<sp/>power<sp/>of<sp/>distributing<sp/>computing.<sp/>W3Schools.com<sp/>has<sp/>an<sp/>excellent<sp/>tutorial<sp/>on<sp/>SOAP.<sp/>On<sp/>the<sp/>other<sp/>hand,<sp/>TutorialsPoint.com<sp/>gives<sp/>a<sp/>nice<sp/>overview<sp/>of<sp/>XML-RPC.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>Optimization</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Cache<sp/>Engine</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Caching<sp/>static<sp/>Web<sp/>pages<sp/>-<sp/>so<sp/>the<sp/>code<sp/>in<sp/>some<sp/>route<sp/>handlers<sp/>can<sp/>be<sp/>skipped<sp/>and<sp/>templates<sp/>don&apos;t<sp/>have<sp/>to<sp/>be<sp/>reprocessed<sp/>-<sp/>is<sp/>one<sp/>way<sp/>of<sp/>reducing<sp/>your<sp/>Web<sp/>server&apos;s<sp/>work<sp/>load<sp/>so<sp/>it<sp/>can<sp/>focus<sp/>on<sp/>other<sp/>tasks.<sp/>You<sp/>can<sp/>activate<sp/>the<sp/>framework&apos;s<sp/>cache<sp/>engine<sp/>by<sp/>providing<sp/>a<sp/>third<sp/>argument<sp/>to<sp/>the<sp/>`$f3-&gt;route()`<sp/>method.<sp/>Just<sp/>specify<sp/>the<sp/>number<sp/>of<sp/>seconds<sp/>before<sp/>a<sp/>cached<sp/>Web<sp/>page<sp/>expires:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET<sp/>/my_page&apos;,&apos;App-&gt;method&apos;,60);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Here&apos;s<sp/>how<sp/>it<sp/>works.<sp/>In<sp/>this<sp/>example,<sp/>when<sp/>F3<sp/>detects<sp/>that<sp/>the<sp/>URL<sp/>`/my_page`<sp/>is<sp/>accessed<sp/>for<sp/>the<sp/>first<sp/>time,<sp/>it<sp/>executes<sp/>the<sp/>route<sp/>handler<sp/>represented<sp/>by<sp/>the<sp/>second<sp/>argument<sp/>and<sp/>saves<sp/>all<sp/>browser<sp/>output<sp/>to<sp/>the<sp/>framework&apos;s<sp/>built-in<sp/>cache<sp/>(server-side).<sp/>A<sp/>similar<sp/>instruction<sp/>is<sp/>automatically<sp/>sent<sp/>to<sp/>the<sp/>user&apos;s<sp/>Web<sp/>browser<sp/>(client-side),<sp/>so<sp/>that<sp/>instead<sp/>of<sp/>sending<sp/>an<sp/>identical<sp/>request<sp/>to<sp/>the<sp/>server<sp/>within<sp/>the<sp/>60-second<sp/>period,<sp/>the<sp/>browser<sp/>can<sp/>just<sp/>retrieve<sp/>the<sp/>page<sp/>locally.<sp/>The<sp/>framework<sp/>uses<sp/>the<sp/>cache<sp/>for<sp/>an<sp/>entirely<sp/>different<sp/>purpose<sp/>-<sp/>serving<sp/>framework-cached<sp/>data<sp/>to<sp/>other<sp/>users<sp/>asking<sp/>for<sp/>the<sp/>same<sp/>Web<sp/>page<sp/>within<sp/>the<sp/>60-second<sp/>time<sp/>frame.<sp/>It<sp/>skips<sp/>execution<sp/>of<sp/>the<sp/>route<sp/>handler<sp/>and<sp/>serves<sp/>the<sp/>previously-saved<sp/>page<sp/>directly<sp/>from<sp/>disk.<sp/>When<sp/>someone<sp/>tries<sp/>to<sp/>access<sp/>the<sp/>same<sp/>URL<sp/>after<sp/>the<sp/>60-second<sp/>timer<sp/>has<sp/>lapsed,<sp/>F3<sp/>will<sp/>refresh<sp/>the<sp/>cache<sp/>with<sp/>a<sp/>new<sp/>copy.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Web<sp/>pages<sp/>with<sp/>static<sp/>data<sp/>are<sp/>the<sp/>most<sp/>likely<sp/>candidates<sp/>for<sp/>caching.<sp/>Fat-Free<sp/>will<sp/>not<sp/>cache<sp/>a<sp/>Web<sp/>page<sp/>at<sp/>a<sp/>specified<sp/>URL<sp/>if<sp/>the<sp/>third<sp/>argument<sp/>in<sp/>the<sp/>`$f3-&gt;route()`<sp/>method<sp/>is<sp/>zero<sp/>or<sp/>unspecified.<sp/>F3<sp/>conforms<sp/>to<sp/>the<sp/>HTTP<sp/>specifications:<sp/>only<sp/>GET<sp/>and<sp/>HEAD<sp/>requests<sp/>can<sp/>be<sp/>cached.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Here&apos;s<sp/>an<sp/>important<sp/>point<sp/>to<sp/>consider<sp/>when<sp/>designing<sp/>your<sp/>application.<sp/>Don&apos;t<sp/>cache<sp/>Web<sp/>pages<sp/>unless<sp/>you<sp/>understand<sp/>the<sp/>possible<sp/>unwanted<sp/>side-effects<sp/>of<sp/>the<sp/>cache<sp/>at<sp/>the<sp/>client-side.<sp/>Make<sp/>sure<sp/>that<sp/>you<sp/>activate<sp/>caching<sp/>on<sp/>Web<sp/>pages<sp/>that<sp/>have<sp/>nothing<sp/>to<sp/>do<sp/>with<sp/>the<sp/>user&apos;s<sp/>session<sp/>state.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">For<sp/>example,<sp/>you<sp/>designed<sp/>your<sp/>site<sp/>in<sp/>such<sp/>a<sp/>way<sp/>that<sp/>all<sp/>your<sp/>Web<sp/>pages<sp/>have<sp/>the<sp/>menu<sp/>options:<sp/>`&quot;Home&quot;`,<sp/>`&quot;About<sp/>Us&quot;`,<sp/>and<sp/>`&quot;Login&quot;`,<sp/>displayed<sp/>when<sp/>a<sp/>user<sp/>is<sp/>not<sp/>logged<sp/>into<sp/>your<sp/>application.<sp/>You<sp/>also<sp/>want<sp/>the<sp/>menu<sp/>options<sp/>to<sp/>change<sp/>to:<sp/>`&quot;Home&quot;`,<sp/>`&quot;About<sp/>Us&quot;`,<sp/>and<sp/>`&quot;Logout&quot;`,<sp/>once<sp/>the<sp/>user<sp/>has<sp/>logged<sp/>in.<sp/>If<sp/>you<sp/>instructed<sp/>Fat-Free<sp/>to<sp/>cache<sp/>the<sp/>contents<sp/>of<sp/>`&quot;About<sp/>Us&quot;`<sp/>page<sp/>(which<sp/>includes<sp/>the<sp/>menu<sp/>options),<sp/>it<sp/>does<sp/>so<sp/>and<sp/>also<sp/>sends<sp/>the<sp/>same<sp/>instruction<sp/>to<sp/>the<sp/>HTTP<sp/>client.<sp/>Regardless<sp/>of<sp/>the<sp/>user&apos;s<sp/>session<sp/>state,<sp/>i.e.<sp/>logged<sp/>in<sp/>or<sp/>logged<sp/>out,<sp/>the<sp/>user&apos;s<sp/>browser<sp/>will<sp/>take<sp/>a<sp/>snapshot<sp/>of<sp/>the<sp/>page<sp/>at<sp/>the<sp/>session<sp/>state<sp/>it<sp/>was<sp/>in.<sp/>Future<sp/>requests<sp/>by<sp/>the<sp/>user<sp/>for<sp/>the<sp/>`&quot;About<sp/>Us&quot;`<sp/>page<sp/>before<sp/>the<sp/>cache<sp/>timeout<sp/>expires<sp/>will<sp/>display<sp/>the<sp/>same<sp/>menu<sp/>options<sp/>available<sp/>at<sp/>that<sp/>time<sp/>the<sp/>page<sp/>was<sp/>initially<sp/>saved.<sp/>Now,<sp/>a<sp/>user<sp/>may<sp/>have<sp/>already<sp/>logged<sp/>in,<sp/>but<sp/>the<sp/>menu<sp/>options<sp/>are<sp/>still<sp/>the<sp/>same<sp/>as<sp/>if<sp/>no<sp/>such<sp/>event<sp/>occurred.<sp/>That&apos;s<sp/>not<sp/>the<sp/>kind<sp/>of<sp/>behavior<sp/>we<sp/>want<sp/>from<sp/>our<sp/>application.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Some<sp/>pointers:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Don&apos;t<sp/>cache<sp/>dynamic<sp/>pages.<sp/>It&apos;s<sp/>quite<sp/>obvious<sp/>you<sp/>don&apos;t<sp/>want<sp/>to<sp/>cache<sp/>data<sp/>that<sp/>changes<sp/>frequently.<sp/>You<sp/>can,<sp/>however,<sp/>activate<sp/>caching<sp/>on<sp/>pages<sp/>that<sp/>contain<sp/>data<sp/>updated<sp/>on<sp/>an<sp/>hourly,<sp/>daily<sp/>or<sp/>even<sp/>yearly<sp/>basis.For<sp/>security<sp/>reasons,<sp/>the<sp/>framework<sp/>restricts<sp/>cache<sp/>engine<sp/>usage<sp/>to<sp/>HTTP<sp/>`GET`<sp/>routes<sp/>only.<sp/>It<sp/>will<sp/>not<sp/>cache<sp/>submitted<sp/>forms!Don&apos;t<sp/>activate<sp/>the<sp/>cache<sp/>on<sp/>Web<sp/>pages<sp/>that<sp/>at<sp/>first<sp/>glance<sp/>look<sp/>static.<sp/>In<sp/>our<sp/>example,<sp/>the<sp/>&quot;About<sp/>Us&quot;<sp/>content<sp/>may<sp/>be<sp/>static,<sp/>but<sp/>the<sp/>menu<sp/>isn&apos;t.</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Activate<sp/>caching<sp/>on<sp/>pages<sp/>that<sp/>are<sp/>available<sp/>only<sp/>in<sp/>ONE<sp/>session<sp/>state.<sp/>If<sp/>you<sp/>want<sp/>to<sp/>cache<sp/>the<sp/>`&quot;About<sp/>Us&quot;`<sp/>page,<sp/>make<sp/>sure<sp/>it&apos;s<sp/>available<sp/>only<sp/>when<sp/>a<sp/>user<sp/>is<sp/>not<sp/>logged<sp/>in.</highlight></codeline>
<codeline><highlight class="normal">*<sp/>If<sp/>you<sp/>have<sp/>a<sp/>RAMdisk<sp/>or<sp/>fast<sp/>solid-state<sp/>drive,<sp/>configure<sp/>the<sp/>`CACHE`<sp/>global<sp/>variable<sp/>so<sp/>it<sp/>points<sp/>to<sp/>that<sp/>drive.<sp/>This<sp/>will<sp/>make<sp/>your<sp/>application<sp/>run<sp/>like<sp/>a<sp/>Formula<sp/>1<sp/>race<sp/>car.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">**Note:**<sp/>Don&apos;t<sp/>set<sp/>the<sp/>timeout<sp/>value<sp/>to<sp/>a<sp/>very<sp/>long<sp/>period<sp/>until<sp/>you&apos;re<sp/>ready<sp/>to<sp/>roll<sp/>out<sp/>your<sp/>application,<sp/>i.e.<sp/>the<sp/>release<sp/>or<sp/>production<sp/>state.<sp/>Changes<sp/>you<sp/>make<sp/>to<sp/>any<sp/>of<sp/>your<sp/>PHP<sp/>scripts<sp/>may<sp/>not<sp/>have<sp/>the<sp/>expected<sp/>effect<sp/>on<sp/>the<sp/>displayed<sp/>output<sp/>if<sp/>the<sp/>page<sp/>exists<sp/>in<sp/>the<sp/>framework<sp/>cache<sp/>and<sp/>the<sp/>expiration<sp/>period<sp/>has<sp/>not<sp/>lapsed.<sp/>If<sp/>you<sp/>do<sp/>alter<sp/>a<sp/>program<sp/>that<sp/>generates<sp/>a<sp/>page<sp/>affected<sp/>by<sp/>the<sp/>cache<sp/>timer<sp/>and<sp/>you<sp/>want<sp/>these<sp/>changes<sp/>to<sp/>take<sp/>effect<sp/>immediately,<sp/>you<sp/>should<sp/>clear<sp/>the<sp/>cache<sp/>by<sp/>erasing<sp/>the<sp/>files<sp/>in<sp/>the<sp/>cache/<sp/>directory<sp/>(or<sp/>whatever<sp/>path<sp/>the<sp/>`CACHE`<sp/>global<sp/>variable<sp/>points<sp/>to).<sp/>F3<sp/>will<sp/>automatically<sp/>refresh<sp/>the<sp/>cache<sp/>if<sp/>necessary.<sp/>At<sp/>the<sp/>client-side,<sp/>there&apos;s<sp/>little<sp/>you<sp/>can<sp/>do<sp/>but<sp/>instruct<sp/>the<sp/>user<sp/>to<sp/>clear<sp/>the<sp/>browser&apos;s<sp/>cache<sp/>or<sp/>wait<sp/>for<sp/>the<sp/>cache<sp/>period<sp/>to<sp/>expire.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">PHP<sp/>needs<sp/>to<sp/>be<sp/>set<sp/>up<sp/>correctly<sp/>for<sp/>the<sp/>F3<sp/>cache<sp/>engine<sp/>to<sp/>work<sp/>properly.<sp/>Your<sp/>operating<sp/>system<sp/>timezone<sp/>should<sp/>be<sp/>synchronized<sp/>with<sp/>the<sp/>date.timezone<sp/>setting<sp/>in<sp/>the<sp/>`php.ini`<sp/>file.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Similar<sp/>to<sp/>routes,<sp/>Fat-Free<sp/>also<sp/>allows<sp/>you<sp/>to<sp/>cache<sp/>database<sp/>queries.<sp/>Speed<sp/>gains<sp/>can<sp/>be<sp/>quite<sp/>significant,<sp/>specially<sp/>when<sp/>used<sp/>on<sp/>complex<sp/>SQL<sp/>statements<sp/>that<sp/>involve<sp/>look-up<sp/>of<sp/>static<sp/>data<sp/>or<sp/>database<sp/>content<sp/>that<sp/>rarely<sp/>changes.<sp/>Activating<sp/>the<sp/>database<sp/>query<sp/>cache<sp/>so<sp/>the<sp/>framework<sp/>doesn&apos;t<sp/>have<sp/>to<sp/>re-execute<sp/>the<sp/>SQL<sp/>statements<sp/>every<sp/>time<sp/>is<sp/>as<sp/>simple<sp/>as<sp/>adding<sp/>a<sp/>3rd<sp/>argument<sp/>to<sp/>the<sp/>F3::sql<sp/>command<sp/>-<sp/>the<sp/>cache<sp/>timeout.<sp/>For<sp/>example:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$db-&gt;exec(&apos;SELECT<sp/>*<sp/>from<sp/>sizes;&apos;,NULL,86400);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>we<sp/>expect<sp/>the<sp/>result<sp/>of<sp/>this<sp/>database<sp/>query<sp/>to<sp/>always<sp/>be<sp/>`Small`,<sp/>`Medium`,<sp/>and<sp/>`Large`<sp/>within<sp/>a<sp/>24-hour<sp/>period,<sp/>we<sp/>specify<sp/>`86400`<sp/>seconds<sp/>as<sp/>the<sp/>2nd<sp/>argument<sp/>so<sp/>Fat-Free<sp/>doesn&apos;t<sp/>have<sp/>to<sp/>execute<sp/>the<sp/>query<sp/>more<sp/>than<sp/>once<sp/>a<sp/>day.<sp/>Instead,<sp/>the<sp/>framework<sp/>will<sp/>store<sp/>the<sp/>result<sp/>in<sp/>the<sp/>cache,<sp/>retrieve<sp/>it<sp/>from<sp/>the<sp/>cache<sp/>every<sp/>time<sp/>a<sp/>request<sp/>comes<sp/>in<sp/>during<sp/>the<sp/>specified<sp/>24-hour<sp/>time<sp/>frame,<sp/>and<sp/>re-execute<sp/>the<sp/>query<sp/>when<sp/>the<sp/>timer<sp/>lapses.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>SQL<sp/>data<sp/>mapper<sp/>also<sp/>uses<sp/>the<sp/>cache<sp/>engine<sp/>to<sp/>optimize<sp/>synchronization<sp/>of<sp/>table<sp/>structures<sp/>with<sp/>the<sp/>objects<sp/>that<sp/>represent<sp/>them.<sp/>The<sp/>default<sp/>is<sp/>`60`<sp/>seconds.<sp/>If<sp/>you<sp/>make<sp/>any<sp/>changes<sp/>to<sp/>a<sp/>table&apos;s<sp/>structure<sp/>in<sp/>your<sp/>database<sp/>engine,<sp/>you&apos;ll<sp/>have<sp/>to<sp/>wait<sp/>for<sp/>the<sp/>cache<sp/>timer<sp/>to<sp/>expire<sp/>before<sp/>seeing<sp/>the<sp/>effect<sp/>in<sp/>your<sp/>application.<sp/>You<sp/>can<sp/>change<sp/>this<sp/>behavior<sp/>by<sp/>specifying<sp/>a<sp/>third<sp/>argument<sp/>to<sp/>the<sp/>data<sp/>mapper<sp/>constructor.<sp/>Set<sp/>it<sp/>to<sp/>a<sp/>high<sp/>value<sp/>if<sp/>you<sp/>don&apos;t<sp/>expect<sp/>to<sp/>make<sp/>any<sp/>further<sp/>changes<sp/>to<sp/>your<sp/>table<sp/>structure.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$user=new<sp/>DB\SQL\Mapper($db,&apos;users&apos;,86400);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">By<sp/>default,<sp/>Fat-Free&apos;s<sp/>cache<sp/>engine<sp/>is<sp/>disabled.<sp/>You<sp/>can<sp/>enable<sp/>it<sp/>and<sp/>allow<sp/>it<sp/>to<sp/>auto-detect<sp/>APC,<sp/>WinCache<sp/>or<sp/>XCache.<sp/>If<sp/>it<sp/>cannot<sp/>find<sp/>an<sp/>appropriate<sp/>backend,<sp/>F3<sp/>will<sp/>use<sp/>the<sp/>filesystem,<sp/>i.e.<sp/>the<sp/>`tmp/cache/`<sp/>folder:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;CACHE&apos;,TRUE);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Disabling<sp/>the<sp/>cache<sp/>is<sp/>as<sp/>simple<sp/>as:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;CACHE&apos;,FALSE);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>you<sp/>wish<sp/>to<sp/>override<sp/>the<sp/>auto-detection<sp/>feature,<sp/>you<sp/>can<sp/>do<sp/>so<sp/>-<sp/>as<sp/>in<sp/>the<sp/>case<sp/>of<sp/>a<sp/>Memcached<sp/>back-end<sp/>which<sp/>F3<sp/>also<sp/>supports:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;CACHE&apos;,&apos;memcache=localhost:11211&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">You<sp/>can<sp/>also<sp/>use<sp/>the<sp/>cache<sp/>engine<sp/>to<sp/>store<sp/>your<sp/>own<sp/>variables.<sp/>These<sp/>variables<sp/>will<sp/>persist<sp/>between<sp/>HTTP<sp/>requests<sp/>and<sp/>remain<sp/>in<sp/>cache<sp/>until<sp/>the<sp/>engine<sp/>receives<sp/>instructions<sp/>to<sp/>delete<sp/>them.<sp/>To<sp/>save<sp/>a<sp/>value<sp/>in<sp/>the<sp/>cache:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;set(&apos;var&apos;,&apos;I<sp/>want<sp/>this<sp/>value<sp/>saved&apos;,90);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`$f3-&gt;set()`<sp/>method&apos;s<sp/>third<sp/>argument<sp/>instructs<sp/>the<sp/>framework<sp/>to<sp/>save<sp/>the<sp/>variable<sp/>in<sp/>the<sp/>cache<sp/>for<sp/>a<sp/>90-second<sp/>duration.<sp/>If<sp/>your<sp/>application<sp/>issues<sp/>a<sp/>`$f3-&gt;get(&apos;var&apos;)`<sp/>within<sp/>this<sp/>period,<sp/>F3<sp/>will<sp/>automatically<sp/>retrieve<sp/>the<sp/>value<sp/>from<sp/>cache.<sp/>In<sp/>like<sp/>manner,<sp/>`$f3-&gt;clear(&apos;var&apos;)`<sp/>will<sp/>purge<sp/>the<sp/>value<sp/>from<sp/>both<sp/>cache<sp/>and<sp/>RAM.<sp/>If<sp/>you<sp/>want<sp/>to<sp/>determine<sp/>if<sp/>a<sp/>variable<sp/>exists<sp/>in<sp/>cache,<sp/>`$f3-&gt;exists(&apos;var&apos;));<sp/>returns<sp/>one<sp/>of<sp/>two<sp/>possible<sp/>values:<sp/>FALSE<sp/>if<sp/>the<sp/>framework<sp/>variable<sp/>passed<sp/>does<sp/>not<sp/>exist<sp/>in<sp/>cache,<sp/>or<sp/>an<sp/>integer<sp/>representing<sp/>the<sp/>time<sp/>the<sp/>variable<sp/>was<sp/>saved<sp/>(Un*x<sp/>time<sp/>in<sp/>seconds,<sp/>with<sp/>microsecond<sp/>precision).</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Keeping<sp/>Javascript<sp/>and<sp/>CSS<sp/>on<sp/>a<sp/>Healthy<sp/>Diet</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Fat-Free<sp/>also<sp/>has<sp/>a<sp/>Javascript<sp/>and<sp/>CSS<sp/>compressor<sp/>available<sp/>in<sp/>the<sp/>Web<sp/>plug-in.<sp/>It<sp/>can<sp/>combine<sp/>all<sp/>your<sp/>CSS<sp/>files<sp/>into<sp/>one<sp/>stylesheet<sp/>(or<sp/>Javascript<sp/>files<sp/>into<sp/>a<sp/>single<sp/>script)<sp/>so<sp/>the<sp/>number<sp/>of<sp/>components<sp/>on<sp/>a<sp/>Web<sp/>page<sp/>are<sp/>decreased.<sp/>Reducing<sp/>the<sp/>number<sp/>of<sp/>HTTP<sp/>requests<sp/>to<sp/>your<sp/>Web<sp/>server<sp/>results<sp/>in<sp/>faster<sp/>page<sp/>loading.<sp/>First<sp/>you<sp/>need<sp/>to<sp/>prepare<sp/>your<sp/>HTML<sp/>template<sp/>so<sp/>it<sp/>can<sp/>take<sp/>advantage<sp/>of<sp/>this<sp/>feature.<sp/>Something<sp/>like:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">&lt;link<sp/>rel=&quot;stylesheet&quot;<sp/>type=&quot;text/css&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>href=&quot;/minify/css?files=typo.css,grid.css&quot;<sp/>/&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Do<sp/>the<sp/>same<sp/>with<sp/>your<sp/>Javascript<sp/>files:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>html</highlight></codeline>
<codeline><highlight class="normal">&lt;script<sp/>type=&quot;text/javascript&quot;<sp/>src=&quot;/minify/js?&amp;files=underscore.js&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;/script&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Of<sp/>course<sp/>we<sp/>need<sp/>to<sp/>set<sp/>up<sp/>a<sp/>route<sp/>so<sp/>your<sp/>application<sp/>can<sp/>handle<sp/>the<sp/>necessary<sp/>call<sp/>to<sp/>the<sp/>Fat-Free<sp/>CSS/Javascript<sp/>compressor:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;GET<sp/>/minify/@type&apos;,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>function($f3,$args)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$f3-&gt;set(&apos;UI&apos;,$args[&apos;type&apos;].&apos;/&apos;);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>echo<sp/>Web::instance()-&gt;minify($_GET[&apos;files&apos;]);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>},</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>3600</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">And<sp/>that&apos;s<sp/>all<sp/>there<sp/>is<sp/>to<sp/>it!<sp/>`minify()`<sp/>reads<sp/>each<sp/>file<sp/>(`typo.css`<sp/>and<sp/>`grid.css`<sp/>in<sp/>our<sp/>CSS<sp/>example,<sp/>`underscore.js`<sp/>in<sp/>our<sp/>Javascript<sp/>example),<sp/>strips<sp/>off<sp/>all<sp/>unnecessary<sp/>whitespaces<sp/>and<sp/>comments,<sp/>combines<sp/>all<sp/>of<sp/>the<sp/>related<sp/>items<sp/>as<sp/>a<sp/>single<sp/>Web<sp/>page<sp/>component,<sp/>and<sp/>attaches<sp/>a<sp/>far-future<sp/>expiry<sp/>date<sp/>so<sp/>the<sp/>user&apos;s<sp/>Web<sp/>browser<sp/>can<sp/>cache<sp/>the<sp/>data.<sp/>It&apos;s<sp/>important<sp/>that<sp/>the<sp/>`PARAMS.type`<sp/>variable<sp/>base<sp/>points<sp/>to<sp/>the<sp/>correct<sp/>path.<sp/>Otherwise,<sp/>the<sp/>URL<sp/>rewriting<sp/>mechanism<sp/>inside<sp/>the<sp/>compressor<sp/>won&apos;t<sp/>find<sp/>the<sp/>CSS/Javascript<sp/>files.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Client-Side<sp/>Caching</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">In<sp/>our<sp/>examples,<sp/>the<sp/>framework<sp/>sends<sp/>a<sp/>far-future<sp/>expiry<sp/>date<sp/>to<sp/>the<sp/>client&apos;s<sp/>Web<sp/>browser<sp/>so<sp/>any<sp/>request<sp/>for<sp/>the<sp/>same<sp/>CSS<sp/>or<sp/>Javascript<sp/>block<sp/>will<sp/>come<sp/>from<sp/>the<sp/>user&apos;s<sp/>hard<sp/>drive.<sp/>On<sp/>the<sp/>server<sp/>side,<sp/>F3<sp/>will<sp/>check<sp/>each<sp/>request<sp/>and<sp/>see<sp/>if<sp/>the<sp/>CSS<sp/>or<sp/>Javascript<sp/>blocks<sp/>have<sp/>already<sp/>been<sp/>cached.<sp/>The<sp/>route<sp/>we<sp/>specified<sp/>has<sp/>a<sp/>cache<sp/>refresh<sp/>period<sp/>of<sp/>`3600`<sp/>seconds.<sp/>Additionally,<sp/>if<sp/>the<sp/>Web<sp/>browser<sp/>sends<sp/>an<sp/>`If-Modified-Since`<sp/>request<sp/>header<sp/>and<sp/>the<sp/>framework<sp/>sees<sp/>the<sp/>cache<sp/>hasn&apos;t<sp/>changed,<sp/>F3<sp/>just<sp/>sends<sp/>an<sp/>`HTTP<sp/>304<sp/>Not<sp/>Modified`<sp/>response<sp/>so<sp/>no<sp/>content<sp/>is<sp/>actually<sp/>delivered.<sp/>Without<sp/>the<sp/>`If-Modified-Since`<sp/>header,<sp/>Fat-Free<sp/>renders<sp/>the<sp/>output<sp/>from<sp/>the<sp/>cached<sp/>file<sp/>if<sp/>available.<sp/>Otherwise,<sp/>the<sp/>relevant<sp/>code<sp/>is<sp/>executed.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Tip:<sp/>If<sp/>you&apos;re<sp/>not<sp/>modifying<sp/>your<sp/>Javascript/CSS<sp/>files<sp/>frequently<sp/>(as<sp/>it<sp/>would<sp/>be<sp/>if<sp/>you&apos;re<sp/>using<sp/>a<sp/>Javascript<sp/>library<sp/>like<sp/>jQuery,<sp/>MooTools,<sp/>Dojo,<sp/>etc.),<sp/>consider<sp/>adding<sp/>a<sp/>cache<sp/>timer<sp/>to<sp/>the<sp/>route<sp/>leading<sp/>to<sp/>your<sp/>Javascript/CSS<sp/>minify<sp/>handler<sp/>(3rd<sp/>argument<sp/>of<sp/>F3::route())<sp/>so<sp/>Fat-Free<sp/>doesn&apos;t<sp/>have<sp/>compress<sp/>and<sp/>combine<sp/>these<sp/>files<sp/>each<sp/>time<sp/>such<sp/>a<sp/>request<sp/>is<sp/>received.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>PHP<sp/>Code<sp/>Acceleration</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Want<sp/>to<sp/>make<sp/>your<sp/>site<sp/>run<sp/>even<sp/>faster?<sp/>Fat-Free<sp/>works<sp/>best<sp/>with<sp/>either<sp/>Alternative<sp/>PHP<sp/>Cache<sp/>(APC),<sp/>XCache,<sp/>or<sp/>WinCache.<sp/>These<sp/>PHP<sp/>extensions<sp/>boost<sp/>performance<sp/>of<sp/>your<sp/>application<sp/>by<sp/>optimizing<sp/>your<sp/>PHP<sp/>scripts<sp/>(including<sp/>the<sp/>framework<sp/>code).</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Bandwidth<sp/>Throttling</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">A<sp/>fast<sp/>application<sp/>that<sp/>processes<sp/>all<sp/>HTTP<sp/>requests<sp/>and<sp/>responds<sp/>to<sp/>them<sp/>at<sp/>the<sp/>shortest<sp/>time<sp/>possible<sp/>is<sp/>not<sp/>always<sp/>a<sp/>good<sp/>idea<sp/>-<sp/>specially<sp/>if<sp/>your<sp/>bandwidth<sp/>is<sp/>limited<sp/>or<sp/>traffic<sp/>on<sp/>your<sp/>Web<sp/>site<sp/>is<sp/>particularly<sp/>heavy.<sp/>Serving<sp/>pages<sp/>ASAP<sp/>also<sp/>makes<sp/>your<sp/>application<sp/>vulnerable<sp/>to<sp/>Denial-of-Service<sp/>(DOS)<sp/>attacks.<sp/>F3<sp/>has<sp/>a<sp/>bandwidth<sp/>throttling<sp/>feature<sp/>that<sp/>allows<sp/>you<sp/>to<sp/>control<sp/>how<sp/>fast<sp/>your<sp/>Web<sp/>pages<sp/>are<sp/>served.<sp/>You<sp/>can<sp/>specify<sp/>how<sp/>much<sp/>time<sp/>it<sp/>should<sp/>take<sp/>to<sp/>process<sp/>a<sp/>request:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;route(&apos;/throttledpage&apos;,&apos;MyApp-&gt;handler&apos;,0,128);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">In<sp/>this<sp/>example,<sp/>the<sp/>framework<sp/>will<sp/>serve<sp/>the<sp/>Web<sp/>page<sp/>at<sp/>a<sp/>rate<sp/>of<sp/>128KiBps.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Bandwidth<sp/>throttling<sp/>at<sp/>the<sp/>application<sp/>level<sp/>can<sp/>be<sp/>particularly<sp/>useful<sp/>for<sp/>login<sp/>pages.<sp/>Slow<sp/>responses<sp/>to<sp/>dictionary<sp/>attacks<sp/>is<sp/>a<sp/>good<sp/>way<sp/>of<sp/>mitigating<sp/>this<sp/>kind<sp/>of<sp/>security<sp/>risk.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>Unit<sp/>Testing</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Bullet-Proof<sp/>Code</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Robust<sp/>applications<sp/>are<sp/>the<sp/>result<sp/>of<sp/>comprehensive<sp/>testing.<sp/>Verifying<sp/>that<sp/>each<sp/>part<sp/>of<sp/>your<sp/>program<sp/>conforms<sp/>to<sp/>the<sp/>specifications<sp/>and<sp/>lives<sp/>up<sp/>to<sp/>the<sp/>expectations<sp/>of<sp/>the<sp/>end-user<sp/>means<sp/>finding<sp/>bugs<sp/>and<sp/>fixing<sp/>them<sp/>as<sp/>early<sp/>as<sp/>possible<sp/>in<sp/>the<sp/>application<sp/>development<sp/>cycle.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>you<sp/>know<sp/>little<sp/>or<sp/>nothing<sp/>about<sp/>unit<sp/>testing<sp/>methodologies,<sp/>you&apos;re<sp/>probably<sp/>embedding<sp/>pieces<sp/>of<sp/>code<sp/>directly<sp/>in<sp/>your<sp/>existing<sp/>program<sp/>to<sp/>help<sp/>you<sp/>with<sp/>debugging.<sp/>That<sp/>of<sp/>course<sp/>means<sp/>you<sp/>have<sp/>to<sp/>remove<sp/>them<sp/>once<sp/>the<sp/>program<sp/>is<sp/>running.<sp/>Leftover<sp/>code<sp/>fragments,<sp/>poor<sp/>design<sp/>and<sp/>faulty<sp/>implementation<sp/>can<sp/>creep<sp/>up<sp/>as<sp/>bugs<sp/>when<sp/>you<sp/>roll<sp/>out<sp/>your<sp/>application<sp/>later.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3<sp/>makes<sp/>it<sp/>easy<sp/>for<sp/>you<sp/>to<sp/>debug<sp/>programs<sp/>-<sp/>without<sp/>getting<sp/>in<sp/>the<sp/>way<sp/>of<sp/>your<sp/>regular<sp/>thought<sp/>processes.<sp/>The<sp/>framework<sp/>does<sp/>not<sp/>require<sp/>you<sp/>to<sp/>build<sp/>complex<sp/>OOP<sp/>classes,<sp/>heavy<sp/>test<sp/>structures,<sp/>and<sp/>obtrusive<sp/>procedures.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">A<sp/>unit<sp/>(or<sp/>test<sp/>fixture)<sp/>can<sp/>be<sp/>a<sp/>function/method<sp/>or<sp/>a<sp/>class.<sp/>Let&apos;s<sp/>have<sp/>a<sp/>simple<sp/>example:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">function<sp/>hello()<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>return<sp/>&apos;Hello,<sp/>World&apos;;</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Save<sp/>it<sp/>in<sp/>a<sp/>file<sp/>called<sp/>`hello.php`.<sp/>Now<sp/>how<sp/>do<sp/>we<sp/>know<sp/>it<sp/>really<sp/>runs<sp/>as<sp/>expected?<sp/>Let&apos;s<sp/>create<sp/>our<sp/>test<sp/>procedure:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3=require(&apos;lib/base.php&apos;);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">//<sp/>Set<sp/>up</highlight></codeline>
<codeline><highlight class="normal">$test=new<sp/>Test;</highlight></codeline>
<codeline><highlight class="normal">include(&apos;hello.php&apos;);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">//<sp/>This<sp/>is<sp/>where<sp/>the<sp/>tests<sp/>begin</highlight></codeline>
<codeline><highlight class="normal">$test-&gt;expect(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>is_callable(&apos;hello&apos;),</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;hello()<sp/>is<sp/>a<sp/>function&apos;</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">//<sp/>Another<sp/>test</highlight></codeline>
<codeline><highlight class="normal">$hello=hello();</highlight></codeline>
<codeline><highlight class="normal">$test-&gt;expect(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>!empty($hello),</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;Something<sp/>was<sp/>returned&apos;</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">//<sp/>This<sp/>test<sp/>should<sp/>succeed</highlight></codeline>
<codeline><highlight class="normal">$test-&gt;expect</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>is_string($hello),</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;Return<sp/>value<sp/>is<sp/>a<sp/>string&apos;</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">//<sp/>This<sp/>test<sp/>is<sp/>bound<sp/>to<sp/>fail</highlight></codeline>
<codeline><highlight class="normal">$test-&gt;expect(</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>strlen($hello)==13,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&apos;String<sp/>length<sp/>is<sp/>13&apos;</highlight></codeline>
<codeline><highlight class="normal">);</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">//<sp/>Display<sp/>the<sp/>results;<sp/>not<sp/>MVC<sp/>but<sp/>let&apos;s<sp/>keep<sp/>it<sp/>simple</highlight></codeline>
<codeline><highlight class="normal">foreach<sp/>($test-&gt;results()<sp/>as<sp/>$result)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>echo<sp/>$result[&apos;text&apos;].&apos;&lt;br<sp/>/&gt;&apos;;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>if<sp/>($result[&apos;status&apos;])</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>echo<sp/>&apos;Pass&apos;;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>else</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>echo<sp/>&apos;Fail<sp/>(&apos;.$result[&apos;source&apos;].&apos;)&apos;;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>echo<sp/>&apos;&lt;br<sp/>/&gt;&apos;;</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Save<sp/>it<sp/>in<sp/>a<sp/>file<sp/>called<sp/>`test.php`.<sp/>This<sp/>way<sp/>we<sp/>can<sp/>preserve<sp/>the<sp/>integrity<sp/>of<sp/>`hello.php`.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Now<sp/>here&apos;s<sp/>the<sp/>meat<sp/>of<sp/>our<sp/>unit<sp/>testing<sp/>process.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3&apos;s<sp/>built-in<sp/>`Test`<sp/>class<sp/>keeps<sp/>track<sp/>of<sp/>the<sp/>result<sp/>of<sp/>each<sp/>`expect()`<sp/>call.<sp/>The<sp/>output<sp/>of<sp/>`$test-&gt;results()`<sp/>is<sp/>an<sp/>array<sp/>of<sp/>arrays<sp/>with<sp/>the<sp/>keys<sp/>`text`<sp/>(mirroring<sp/>argument<sp/>2<sp/>of<sp/>`expect()`),<sp/>`status`<sp/>(boolean<sp/>representing<sp/>the<sp/>result<sp/>of<sp/>a<sp/>test),<sp/>and<sp/>`source`<sp/>(file<sp/>name/line<sp/>number<sp/>of<sp/>the<sp/>specific<sp/>test)<sp/>to<sp/>aid<sp/>in<sp/>debugging.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Fat-Free<sp/>gives<sp/>you<sp/>the<sp/>freedom<sp/>to<sp/>display<sp/>test<sp/>results<sp/>in<sp/>any<sp/>way<sp/>you<sp/>want.<sp/>You<sp/>can<sp/>have<sp/>the<sp/>output<sp/>in<sp/>plain<sp/>text<sp/>or<sp/>even<sp/>a<sp/>nice-looking<sp/>HTML<sp/>template.<sp/>So<sp/>how<sp/>do<sp/>we<sp/>run<sp/>our<sp/>unit<sp/>test?<sp/>If<sp/>you<sp/>saved<sp/>`test.php`<sp/>in<sp/>the<sp/>document<sp/>root<sp/>folder,<sp/>you<sp/>can<sp/>just<sp/>open<sp/>your<sp/>browser<sp/>and<sp/>specify<sp/>the<sp/>address<sp/>`http://localhost/test.php`.<sp/>That&apos;s<sp/>all<sp/>there<sp/>is<sp/>to<sp/>it.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Mocking<sp/>HTTP<sp/>Requests</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3<sp/>gives<sp/>you<sp/>the<sp/>ability<sp/>to<sp/>simulate<sp/>HTTP<sp/>requests<sp/>from<sp/>within<sp/>your<sp/>PHP<sp/>program<sp/>so<sp/>you<sp/>can<sp/>test<sp/>the<sp/>behavior<sp/>of<sp/>a<sp/>particular<sp/>route.<sp/>Here&apos;s<sp/>a<sp/>simple<sp/>mock<sp/>request:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;mock(&apos;GET<sp/>/test?foo=bar&apos;);</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">To<sp/>mock<sp/>a<sp/>POST<sp/>request<sp/>and<sp/>submit<sp/>a<sp/>simulated<sp/>HTML<sp/>form:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>php</highlight></codeline>
<codeline><highlight class="normal">$f3-&gt;mock(&apos;POST<sp/>/test&apos;,array(&apos;foo&apos;=&gt;&apos;bar&apos;));</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Expecting<sp/>the<sp/>Worst<sp/>that<sp/>can<sp/>Happen</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Once<sp/>you<sp/>get<sp/>the<sp/>hang<sp/>of<sp/>testing<sp/>the<sp/>smallest<sp/>units<sp/>of<sp/>your<sp/>application,<sp/>you<sp/>can<sp/>then<sp/>move<sp/>on<sp/>to<sp/>the<sp/>bigger<sp/>components,<sp/>modules,<sp/>and<sp/>subsystems<sp/>-<sp/>checking<sp/>along<sp/>the<sp/>way<sp/>if<sp/>the<sp/>parts<sp/>are<sp/>correctly<sp/>communicating<sp/>with<sp/>each<sp/>other.<sp/>Testing<sp/>manageable<sp/>chunks<sp/>of<sp/>code<sp/>leads<sp/>to<sp/>more<sp/>reliable<sp/>programs<sp/>that<sp/>work<sp/>as<sp/>you<sp/>expect,<sp/>and<sp/>weaves<sp/>the<sp/>testing<sp/>process<sp/>into<sp/>the<sp/>fabric<sp/>of<sp/>your<sp/>development<sp/>cycle.<sp/>The<sp/>question<sp/>to<sp/>ask<sp/>yourself<sp/>is:-<sp/>Have<sp/>I<sp/>tested<sp/>all<sp/>possible<sp/>scenarios?<sp/>More<sp/>often<sp/>than<sp/>not,<sp/>those<sp/>situations<sp/>that<sp/>have<sp/>not<sp/>been<sp/>taken<sp/>into<sp/>consideration<sp/>are<sp/>the<sp/>likely<sp/>causes<sp/>of<sp/>bugs.<sp/>Unit<sp/>testing<sp/>helps<sp/>a<sp/>lot<sp/>in<sp/>minimizing<sp/>these<sp/>occurrences.<sp/>Even<sp/>a<sp/>few<sp/>tests<sp/>on<sp/>each<sp/>fixture<sp/>can<sp/>greatly<sp/>reduce<sp/>headaches.<sp/>On<sp/>the<sp/>other<sp/>hand,<sp/>writing<sp/>applications<sp/>without<sp/>unit<sp/>testing<sp/>at<sp/>all<sp/>invites<sp/>trouble.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>Quick<sp/>Reference</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>System<sp/>Variables</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>AGENT`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Auto-detected<sp/>HTTP<sp/>user<sp/>agent,<sp/>e.g.<sp/>`Mozilla/5.0<sp/>(Linux;<sp/>Android<sp/>4.2.2;<sp/>Nexus<sp/>7)<sp/>AppleWebKit/537.31`.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`bool<sp/>AJAX`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>`TRUE`<sp/>if<sp/>an<sp/>XML<sp/>HTTP<sp/>request<sp/>is<sp/>detected,<sp/>`FALSE`<sp/>otherwise.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>AUTOLOAD`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Search<sp/>path<sp/>for<sp/>user-defined<sp/>PHP<sp/>classes<sp/>that<sp/>the<sp/>framework<sp/>will<sp/>attempt<sp/>to<sp/>autoload<sp/>at<sp/>runtime.<sp/>Accepts<sp/>a<sp/>pipe<sp/>(`|`),<sp/>comma<sp/>(`,`),<sp/>or<sp/>semi-colon<sp/>(`;`)<sp/>as<sp/>path<sp/>separator.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>BASE`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Path<sp/>to<sp/>the<sp/>`index.php`<sp/>main/front<sp/>controller.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>BODY`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>HTTP<sp/>request<sp/>body<sp/>for<sp/>ReSTful<sp/>post-processing.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`bool/string<sp/>CACHE`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Cache<sp/>backend.<sp/>Unless<sp/>assigned<sp/>a<sp/>value<sp/>like<sp/>`&apos;memcache=localhost&apos;`<sp/>(and<sp/>the<sp/>PHP<sp/>memcache<sp/>module<sp/>is<sp/>present),<sp/>F3<sp/>auto-detects<sp/>the<sp/>presence<sp/>of<sp/>APC,<sp/>WinCache<sp/>and<sp/>XCache<sp/>and<sp/>uses<sp/>the<sp/>first<sp/>available<sp/>PHP<sp/>module<sp/>if<sp/>set<sp/>to<sp/>TRUE.<sp/>If<sp/>none<sp/>of<sp/>these<sp/>PHP<sp/>modules<sp/>are<sp/>available,<sp/>a<sp/>filesystem-based<sp/>backend<sp/>is<sp/>used<sp/>(default<sp/>directory:<sp/>`tmp/cache`).<sp/>The<sp/>framework<sp/>disables<sp/>the<sp/>cache<sp/>engine<sp/>if<sp/>assigned<sp/>a<sp/>`FALSE`<sp/>value.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`bool<sp/>CASELESS`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Pattern<sp/>matching<sp/>of<sp/>routes<sp/>against<sp/>incoming<sp/>URIs<sp/>is<sp/>case-insensitive<sp/>by<sp/>default.<sp/>Set<sp/>to<sp/>`FALSE`<sp/>to<sp/>make<sp/>it<sp/>case-sensitive.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`array<sp/>COOKIE,<sp/>GET,<sp/>POST,<sp/>REQUEST,<sp/>SESSION,<sp/>FILES,<sp/>SERVER,<sp/>ENV`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Framework<sp/>equivalents<sp/>of<sp/>PHP<sp/>globals.<sp/>Variables<sp/>may<sp/>be<sp/>used<sp/>throughout<sp/>an<sp/>application.<sp/>However,<sp/>direct<sp/>use<sp/>in<sp/>templates<sp/>is<sp/>not<sp/>advised<sp/>due<sp/>to<sp/>security<sp/>risks.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`integer<sp/>DEBUG`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Stack<sp/>trace<sp/>verbosity.<sp/>Assign<sp/>values<sp/>1<sp/>to<sp/>3<sp/>for<sp/>increasing<sp/>verbosity<sp/>levels.<sp/>Zero<sp/>(0)<sp/>suppresses<sp/>the<sp/>stack<sp/>trace.<sp/>This<sp/>is<sp/>the<sp/>default<sp/>value<sp/>and<sp/>it<sp/>should<sp/>be<sp/>the<sp/>assigned<sp/>setting<sp/>on<sp/>a<sp/>production<sp/>server.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>DNSBL`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Comma-separated<sp/>list<sp/>of<sp/>[DNS<sp/>blacklist<sp/>servers](http://whatismyipaddress.com/blacklist-check).<sp/>Framework<sp/>generates<sp/>a<sp/>`403<sp/>Forbidden`<sp/>error<sp/>if<sp/>the<sp/>user&apos;s<sp/>IPv4<sp/>address<sp/>is<sp/>listed<sp/>on<sp/>the<sp/>specified<sp/>server(s).</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`array<sp/>DIACRITICS`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Key-value<sp/>pairs<sp/>for<sp/>foreign-to-ASCII<sp/>character<sp/>translations.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>ENCODING`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Character<sp/>set<sp/>used<sp/>for<sp/>document<sp/>encoding.<sp/>Default<sp/>value<sp/>is<sp/>`UTF-8`.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`array<sp/>ERROR`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Information<sp/>about<sp/>the<sp/>last<sp/>HTTP<sp/>error<sp/>that<sp/>occurred.<sp/>`ERROR.code`<sp/>is<sp/>the<sp/>HTTP<sp/>status<sp/>code.<sp/>`ERROR.status`<sp/>contains<sp/>a<sp/>brief<sp/>description<sp/>of<sp/>the<sp/>error.<sp/>`ERROR.text`<sp/>provides<sp/>more<sp/>detail.<sp/>For<sp/>HTTP<sp/>500<sp/>errors,<sp/>use<sp/>`ERROR.trace`<sp/>to<sp/>retrieve<sp/>the<sp/>stack<sp/>trace.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`bool<sp/>ESCAPE`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Used<sp/>to<sp/>enable/disable<sp/>auto-escaping.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>EXEMPT`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Comma-separated<sp/>list<sp/>of<sp/>IPv4<sp/>addresses<sp/>exempt<sp/>from<sp/>DNSBL<sp/>lookups.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>FALLBACK`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Language<sp/>(and<sp/>dictionary)<sp/>to<sp/>use<sp/>if<sp/>no<sp/>translation<sp/>is<sp/>available.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`bool<sp/>HALT`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>If<sp/>TRUE<sp/>(default),<sp/>framework<sp/>stops<sp/>execution<sp/>after<sp/>a<sp/>non-fatal<sp/>error<sp/>is<sp/>detected.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`array<sp/>HEADERS`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>HTTP<sp/>request<sp/>headers<sp/>received<sp/>by<sp/>the<sp/>server.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`bool<sp/>HIGHLIGHT`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Enable/disable<sp/>syntax<sp/>highlighting<sp/>of<sp/>stack<sp/>traces.<sp/>Default<sp/>value:<sp/>`TRUE`<sp/>(requires<sp/>`code.css`<sp/>stylesheet).</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>HOST`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Server<sp/>host<sp/>name.<sp/>If<sp/>`$_SERVER[&apos;SERVER_NAME&apos;]`<sp/>is<sp/>not<sp/>available,<sp/>return<sp/>value<sp/>of<sp/>`gethostname()`<sp/>is<sp/>used.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>IP`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Remote<sp/>IP<sp/>address.<sp/>The<sp/>framework<sp/>derives<sp/>the<sp/>address<sp/>from<sp/>headers<sp/>if<sp/>HTTP<sp/>client<sp/>is<sp/>behind<sp/>a<sp/>proxy<sp/>server.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`array<sp/>JAR`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Default<sp/>cookie<sp/>parameters.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>LANGUAGE`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Current<sp/>active<sp/>language.<sp/>Value<sp/>is<sp/>used<sp/>to<sp/>load<sp/>the<sp/>appropriate<sp/>language<sp/>translation<sp/>file<sp/>in<sp/>the<sp/>folder<sp/>pointed<sp/>to<sp/>by<sp/>`LOCALES`.<sp/>If<sp/>set<sp/>to<sp/>`NULL`,<sp/>language<sp/>is<sp/>auto-detected<sp/>from<sp/>the<sp/>HTTP<sp/>`Accept-Language`<sp/>request<sp/>header.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>LOCALES`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Location<sp/>of<sp/>the<sp/>language<sp/>dictionaries.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>LOGS`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Location<sp/>of<sp/>custom<sp/>logs.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`mixed<sp/>ONERROR`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Callback<sp/>function<sp/>to<sp/>use<sp/>as<sp/>custom<sp/>error<sp/>handler.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>PACKAGE`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Framework<sp/>name.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`array<sp/>PARAMS`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Captured<sp/>values<sp/>of<sp/>tokens<sp/>defined<sp/>in<sp/>a<sp/>`route()`<sp/>pattern.<sp/>`PARAMS.0`<sp/>contains<sp/>the<sp/>captured<sp/>URL<sp/>relative<sp/>to<sp/>the<sp/>Web<sp/>root.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>PATTERN`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Contains<sp/>the<sp/>routing<sp/>pattern<sp/>that<sp/>matches<sp/>the<sp/>current<sp/>request<sp/>URI.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>PLUGINS`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Location<sp/>of<sp/>F3<sp/>plugins.<sp/>Default<sp/>value<sp/>is<sp/>the<sp/>folder<sp/>where<sp/>the<sp/>framework<sp/>code<sp/>resides,<sp/>i.e.<sp/>the<sp/>path<sp/>to<sp/>`base.php`.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`int<sp/>PORT`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>TCP/IP<sp/>listening<sp/>port<sp/>used<sp/>by<sp/>the<sp/>Web<sp/>server.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>PREFIX`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>String<sp/>prepended<sp/>to<sp/>language<sp/>dictionary<sp/>terms.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`bool<sp/>QUIET`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Toggle<sp/>switch<sp/>for<sp/>suppressing<sp/>or<sp/>enabling<sp/>standard<sp/>output<sp/>and<sp/>error<sp/>messages.<sp/>Particularly<sp/>useful<sp/>in<sp/>unit<sp/>testing.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`bool<sp/>RAW`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Disable<sp/>automatic<sp/>storage<sp/>of<sp/>HTTP<sp/>request<sp/>body<sp/>into<sp/>`BODY`.<sp/>Should<sp/>be<sp/>TRUE<sp/>when<sp/>processing<sp/>large<sp/>data<sp/>coming<sp/>from<sp/>`php://input`<sp/>which<sp/>will<sp/>not<sp/>fit<sp/>in<sp/>memory.<sp/>Default<sp/>value:<sp/>`FALSE`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>REALM`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Full<sp/>canonical<sp/>URL.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>RESPONSE`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>The<sp/>body<sp/>of<sp/>the<sp/>last<sp/>HTTP<sp/>response.<sp/>F3<sp/>populates<sp/>this<sp/>variable<sp/>regardless<sp/>of<sp/>the<sp/>`QUIET`<sp/>setting.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>ROOT`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Absolute<sp/>path<sp/>to<sp/>document<sp/>root<sp/>folder.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`array<sp/>ROUTES`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Contains<sp/>the<sp/>defined<sp/>application<sp/>routes.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>SCHEME`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Server<sp/>protocol,<sp/>i.e.<sp/>`http`<sp/>or<sp/>`https`.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>SERIALIZER`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Default<sp/>serializer.<sp/>Normally<sp/>set<sp/>to<sp/>`php`,<sp/>unless<sp/>PHP<sp/>`igbinary`<sp/>extension<sp/>is<sp/>auto-detected.<sp/>Assign<sp/>`json`<sp/>if<sp/>desired.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>TEMP`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Temporary<sp/>folder<sp/>for<sp/>cache,<sp/>filesystem<sp/>locks,<sp/>compiled<sp/>F3<sp/>templates,<sp/>etc.<sp/>Default<sp/>is<sp/>the<sp/>`tmp/`<sp/>folder<sp/>inside<sp/>the<sp/>Web<sp/>root.<sp/>Adjust<sp/>accordingly<sp/>to<sp/>conform<sp/>to<sp/>your<sp/>site&apos;s<sp/>security<sp/>policies.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>TZ`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Default<sp/>timezone.<sp/>Changing<sp/>this<sp/>value<sp/>automatically<sp/>calls<sp/>the<sp/>underlying<sp/>`date_default_timezone_set()`<sp/>function.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>UI`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Search<sp/>path<sp/>for<sp/>user<sp/>interface<sp/>files<sp/>used<sp/>by<sp/>the<sp/>`View`<sp/>and<sp/>`Template`<sp/>classes&apos;<sp/>`render()`<sp/>method.<sp/>Default<sp/>value<sp/>is<sp/>the<sp/>Web<sp/>root.<sp/>Accepts<sp/>a<sp/>pipe<sp/>(`|`),<sp/>comma<sp/>(`,`),<sp/>or<sp/>semi-colon<sp/>(`;`)<sp/>as<sp/>separator<sp/>for<sp/>multiple<sp/>paths.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`callback<sp/>UNLOAD`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Executed<sp/>by<sp/>framework<sp/>on<sp/>script<sp/>shutdown.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>UPLOADS`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Directory<sp/>where<sp/>file<sp/>uploads<sp/>are<sp/>saved.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>URI`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Current<sp/>HTTP<sp/>request<sp/>URI.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>VERB`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Current<sp/>HTTP<sp/>request<sp/>method.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">`string<sp/>VERSION`</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>Framework<sp/>version.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Template<sp/>Directives</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">@token</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Replace<sp/>`@token`<sp/>with<sp/>value<sp/>of<sp/>equivalent<sp/>F3<sp/>variable.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">{{<sp/>mixed<sp/>expr<sp/>}}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Evaluate.<sp/>`expr`<sp/>may<sp/>include<sp/>template<sp/>tokens,<sp/>constants,<sp/>operators<sp/>(unary,<sp/>arithmetic,<sp/>ternary<sp/>and<sp/>relational),<sp/>parentheses,<sp/>data<sp/>type<sp/>converters,<sp/>and<sp/>functions.<sp/>If<sp/>not<sp/>an<sp/>attribute<sp/>of<sp/>a<sp/>template<sp/>directive,<sp/>result<sp/>is<sp/>echoed.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">{{<sp/>string<sp/>expr<sp/>|<sp/>raw<sp/>}}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Render<sp/>unescaped<sp/>`expr`.<sp/>F3<sp/>auto-escapes<sp/>strings<sp/>by<sp/>default.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">{{<sp/>string<sp/>expr<sp/>|<sp/>esc<sp/>}}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Render<sp/>escaped<sp/>`expr`.<sp/>This<sp/>is<sp/>the<sp/>default<sp/>framework<sp/>behavior.<sp/>The<sp/>`|<sp/>esc`<sp/>suffix<sp/>is<sp/>only<sp/>necessary<sp/>if<sp/>`ESCAPE`<sp/>global<sp/>variable<sp/>is<sp/>set<sp/>to<sp/>`FALSE`.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">{{<sp/>string<sp/>expr,<sp/>arg1,<sp/>...,<sp/>argN<sp/>|<sp/>format<sp/>}}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Render<sp/>an<sp/>ICU-formatted<sp/>`expr`<sp/>and<sp/>pass<sp/>the<sp/>comma-separated<sp/>arguments,<sp/>where<sp/>`arg1,<sp/>...,<sp/>argn`<sp/>is<sp/>one<sp/>of:-<sp/>`&apos;date&apos;`,<sp/>`&apos;time&apos;`,<sp/>`&apos;number,<sp/>integer&apos;`,<sp/>`&apos;number,<sp/>currency&apos;`,<sp/>or<sp/>`&apos;number,<sp/>percent&apos;`.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">&lt;include</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>[<sp/>if=&quot;{{<sp/>bool<sp/>condition<sp/>}}&quot;<sp/>]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>href=&quot;{{<sp/>string<sp/>subtemplate<sp/>}}&quot;</highlight></codeline>
<codeline><highlight class="normal">/&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Get<sp/>contents<sp/>of<sp/>`subtemplate`<sp/>and<sp/>insert<sp/>at<sp/>current<sp/>position<sp/>in<sp/>template<sp/>if<sp/>optional<sp/>condition<sp/>is<sp/>`TRUE`.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">&lt;exclude&gt;text-block&lt;/exclude&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Remove<sp/>`text-block`<sp/>at<sp/>runtime.<sp/>Used<sp/>for<sp/>embedding<sp/>comments<sp/>in<sp/>templates.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">&lt;ignore&gt;text-block&lt;/ignore&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Display<sp/>`text-block`<sp/>as-is,<sp/>without<sp/>interpretation/modification<sp/>by<sp/>the<sp/>template<sp/>engine.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">&lt;check<sp/>if=&quot;{{<sp/>bool<sp/>condition<sp/>}}&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;true&gt;true-block&lt;/true&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;false&gt;false-block&lt;/false&gt;</highlight></codeline>
<codeline><highlight class="normal">&lt;/check&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Evaluate<sp/>condition.<sp/>If<sp/>`TRUE`,<sp/>then<sp/>`true-block`<sp/>is<sp/>rendered.<sp/>Otherwise,<sp/>`false-block`<sp/>is<sp/>used.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">&lt;loop</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>from=&quot;{{<sp/>statement<sp/>}}&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>to=&quot;{{<sp/>bool<sp/>expr<sp/>}}&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>[<sp/>step=&quot;{{<sp/>statement<sp/>}}&quot;<sp/>]&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>text-block</highlight></codeline>
<codeline><highlight class="normal">&lt;/loop&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Evaluate<sp/>`from`<sp/>statement<sp/>once.<sp/>Check<sp/>if<sp/>the<sp/>expression<sp/>in<sp/>the<sp/>`to`<sp/>attribute<sp/>is<sp/>`TRUE`,<sp/>render<sp/>`text-block`<sp/>and<sp/>evaluate<sp/>`step`<sp/>statement.<sp/>Repeat<sp/>iteration<sp/>until<sp/>`to`<sp/>expression<sp/>is<sp/>`FALSE`.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">&lt;repeat</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>group=&quot;{{<sp/>array<sp/>@group|expr<sp/>}}&quot;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>[<sp/>key=&quot;{{<sp/>scalar<sp/>@key<sp/>}}&quot;<sp/>]</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>value=&quot;{{<sp/>mixed<sp/>@value<sp/>}}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>[<sp/>counter=&quot;{{<sp/>scalar<sp/>@key<sp/>}}&quot;<sp/>]&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>text-block</highlight></codeline>
<codeline><highlight class="normal">&lt;/repeat&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Repeat<sp/>`text-block`<sp/>as<sp/>many<sp/>times<sp/>as<sp/>there<sp/>are<sp/>elements<sp/>in<sp/>the<sp/>array<sp/>variable<sp/>`@group`<sp/>or<sp/>the<sp/>expression<sp/>`expr`.<sp/>`@key`<sp/>and<sp/>`@value`<sp/>function<sp/>in<sp/>the<sp/>same<sp/>manner<sp/>as<sp/>the<sp/>key-value<sp/>pair<sp/>in<sp/>the<sp/>equivalent<sp/>PHP<sp/>`foreach()`<sp/>statement.<sp/>Variable<sp/>represented<sp/>by<sp/>`key`<sp/>in<sp/>`counter`<sp/>attribute<sp/>increments<sp/>by<sp/>`1`<sp/>with<sp/>every<sp/>iteration.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">&lt;switch<sp/>expr=&quot;{{<sp/>scalar<sp/>expr<sp/>}}&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;case<sp/>value=&quot;{{<sp/>scalar<sp/>@value|expr<sp/>}}&quot;<sp/>break=&quot;{{<sp/>bool<sp/>TRUE|FALSE<sp/>}}&quot;&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text-block</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>&lt;/case&gt;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.</highlight></codeline>
<codeline><highlight class="normal">&lt;/switch&gt;</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Equivalent<sp/>of<sp/>the<sp/>PHP<sp/>switch-case<sp/>jump<sp/>table<sp/>structure.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">{*<sp/>text-block<sp/>*}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Alias<sp/>for<sp/>`&lt;exclude&gt;`.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>API<sp/>Documentation</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>most<sp/>up-to-date<sp/>documentation<sp/>is<sp/>located<sp/>at<sp/>[http://fatfreeframework.com/](http://fatfreeframework.com/).<sp/>It<sp/>contains<sp/>examples<sp/>of<sp/>usage<sp/>of<sp/>the<sp/>various<sp/>framework<sp/>components.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>Support<sp/>and<sp/>Licensing</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Technical<sp/>support<sp/>is<sp/>available<sp/>at<sp/>the<sp/>official<sp/>discussion<sp/>forum:<sp/>[`https://groups.google.com/forum/#!forum/f3-framework`](https://groups.google.com/forum/#!forum/f3-framework).<sp/>If<sp/>you<sp/>need<sp/>live<sp/>support,<sp/>you<sp/>can<sp/>talk<sp/>to<sp/>the<sp/>development<sp/>team<sp/>and<sp/>other<sp/>members<sp/>of<sp/>the<sp/>F3<sp/>community<sp/>via<sp/>IRC.<sp/>We&apos;re<sp/>on<sp/>the<sp/>FreeNode<sp/>`#fatfree`<sp/>channel<sp/>(`chat.freenode.net`).<sp/>Visit<sp/>[`http://webchat.freenode.net/`](http://webchat.freenode.net/)<sp/>to<sp/>join<sp/>the<sp/>conversation.<sp/>You<sp/>can<sp/>also<sp/>download<sp/>the<sp/>[Firefox<sp/>Chatzilla](https://addons.mozilla.org/en-US/firefox/addon/chatzilla/)<sp/>add-on<sp/>or<sp/>[Pidgin](http://www.pidgin.im/)<sp/>if<sp/>you<sp/>don&apos;t<sp/>have<sp/>an<sp/>IRC<sp/>client<sp/>so<sp/>you<sp/>can<sp/>participate<sp/>in<sp/>the<sp/>live<sp/>chat.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Nightly<sp/>Builds</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">F3<sp/>uses<sp/>Git<sp/>for<sp/>version<sp/>control.<sp/>To<sp/>clone<sp/>the<sp/>code<sp/>repository<sp/>on<sp/>GitHub:-</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```<sp/>bash</highlight></codeline>
<codeline><highlight class="normal">git<sp/>clone<sp/>git://github.com/bcosca/fatfree.git</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>all<sp/>you<sp/>want<sp/>is<sp/>a<sp/>zipball,<sp/>grab<sp/>it<sp/>[**here**](https://github.com/bcosca/fatfree/archive/dev.zip).</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">To<sp/>file<sp/>a<sp/>bug<sp/>report,<sp/>visit<sp/>[`https://github.com/bcosca/fatfree/issues`](https://github.com/bcosca/fatfree/issues).</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Fair<sp/>Licensing</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">**Fat-Free<sp/>Framework<sp/>is<sp/>free<sp/>and<sp/>released<sp/>as<sp/>open<sp/>source<sp/>software<sp/>covered<sp/>by<sp/>the<sp/>terms<sp/>of<sp/>the<sp/>[GNU<sp/>Public<sp/>License](http://www.gnu.org/licenses/gpl-3.0.html)<sp/>(GPL<sp/>v3).**<sp/>You<sp/>may<sp/>not<sp/>use<sp/>the<sp/>software,<sp/>documentation,<sp/>and<sp/>samples<sp/>except<sp/>in<sp/>compliance<sp/>with<sp/>the<sp/>license.<sp/>If<sp/>the<sp/>terms<sp/>and<sp/>conditions<sp/>of<sp/>this<sp/>license<sp/>are<sp/>too<sp/>restrictive<sp/>for<sp/>your<sp/>use,<sp/>alternative<sp/>licensing<sp/>is<sp/>available<sp/>for<sp/>a<sp/>very<sp/>reasonable<sp/>fee.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">If<sp/>you<sp/>feel<sp/>that<sp/>this<sp/>software<sp/>is<sp/>one<sp/>great<sp/>weapon<sp/>to<sp/>have<sp/>in<sp/>your<sp/>programming<sp/>arsenal,<sp/>it<sp/>saves<sp/>you<sp/>a<sp/>lot<sp/>of<sp/>time<sp/>and<sp/>money,<sp/>use<sp/>it<sp/>for<sp/>commercial<sp/>gain<sp/>or<sp/>in<sp/>your<sp/>business<sp/>organization,<sp/>please<sp/>consider<sp/>making<sp/>a<sp/>donation<sp/>to<sp/>the<sp/>project.<sp/>A<sp/>significant<sp/>amount<sp/>of<sp/>time,<sp/>effort,<sp/>and<sp/>money<sp/>has<sp/>been<sp/>spent<sp/>on<sp/>this<sp/>project.<sp/>Your<sp/>donations<sp/>help<sp/>keep<sp/>this<sp/>project<sp/>alive<sp/>and<sp/>the<sp/>development<sp/>team<sp/>motivated.<sp/>Donors<sp/>and<sp/>sponsors<sp/>get<sp/>priority<sp/>support<sp/>(24-hour<sp/>response<sp/>time<sp/>on<sp/>business<sp/>days).</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Credits</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">The<sp/>Fat-Free<sp/>Framework<sp/>is<sp/>community-driven<sp/>software.<sp/>It<sp/>can&apos;t<sp/>be<sp/>what<sp/>it<sp/>is<sp/>today<sp/>without<sp/>the<sp/>help<sp/>and<sp/>support<sp/>from<sp/>the<sp/>following<sp/>people<sp/>and<sp/>organizations:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">*<sp/>GitHub</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Square<sp/>Lines,<sp/>LLC</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Mirosystems</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Stehlik<sp/>&amp;<sp/>Company</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Talis<sp/>Group,<sp/>Ltd.</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Tecnil√≥gica</highlight></codeline>
<codeline><highlight class="normal">*<sp/>G<sp/>Holdings,<sp/>LLC</highlight></codeline>
<codeline><highlight class="normal">*<sp/>S2<sp/>Development,<sp/>Ltd.</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Store<sp/>Machine</highlight></codeline>
<codeline><highlight class="normal">*<sp/>PHP<sp/>Experts,<sp/>Inc.</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Meins<sp/>und<sp/>Vogel<sp/>GmbH</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Online<sp/>Prepaid<sp/>Services</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Christian<sp/>Knuth</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Sascha<sp/>Ohms</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Lars<sp/>Brandi<sp/>Jensen</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Jermaine<sp/>Maree</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Ey√∞un<sp/>Lamhauge</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Sergey<sp/>Zaretsky</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Daniel<sp/>Kloke</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Brian<sp/>Nelson</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Roberts<sp/>Lapins</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Boris<sp/>Gurevich</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Jose<sp/>Maria<sp/>Garrido<sp/>Diaz</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Dawn<sp/>Comfort</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Johan<sp/>Viberg</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Povilas<sp/>Musteikis</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Andrew<sp/>Snook</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Jafar<sp/>Amjad</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Taylor<sp/>McCall</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Raymond<sp/>Kirkland</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Yuriy<sp/>Gerassimenko</highlight></codeline>
<codeline><highlight class="normal">*<sp/>William<sp/>Stam</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Sam<sp/>George</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Steve<sp/>Wasiura</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Andreas<sp/>Ljunggren</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Sashank<sp/>Tadepalli</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Chad<sp/>Bishop</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Bradley<sp/>Slavik</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Lee<sp/>Blue</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Alexander<sp/>Shatilo</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Justin<sp/>Noel</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Ivan<sp/>Kovac</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Tony&apos;s<sp/>Internet<sp/>Solutions</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Charles<sp/>Stigler</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Attila<sp/>van<sp/>der<sp/>Velde</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Indoblo<sp/>Commerce<sp/>Ltd.</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Jens<sp/>N√≠emeyer</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Raghu<sp/>Veer<sp/>Dendukuri</highlight></codeline>
<codeline><highlight class="normal">*<sp/>NovelLead<sp/>B.V.</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Emir<sp/>Alp</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Dominic<sp/>Schwarz</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Sven<sp/>Zahrend</highlight></codeline>
<codeline><highlight class="normal">*<sp/>LucidStorm</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Nevatech</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Matt<sp/>Wielgos</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Maximilian<sp/>Summe</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Caspar<sp/>Frey</highlight></codeline>
<codeline><highlight class="normal">*<sp/>FocusHeart</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Philip<sp/>Lawrence</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Peter<sp/>Beverwyk</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Judith<sp/>Grass</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Randal<sp/>Hintz</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Franz<sp/>Josef</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Biswajit<sp/>Nayak</highlight></codeline>
<codeline><highlight class="normal">*<sp/>R<sp/>Mohan</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Michael<sp/>Messner</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Florent<sp/>Racineux</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Jason<sp/>Borseth</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Dmitrij<sp/>Chernov</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Marek<sp/>Toman</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Simone<sp/>Cociancich</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Alan<sp/>Holding</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Philipp<sp/>Hirsch</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Aur√©lien<sp/>Botermans</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Christian<sp/>Treptow</highlight></codeline>
<codeline><highlight class="normal">*<sp/>–ö—É–±–∞—Ä–µ–≤<sp/>–î–º–∏—Ç—Ä–∏–π<sp/>(Dmitry<sp/>Kubarev)</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Alexandru<sp/>Catalin<sp/>Trandafir</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Leigh<sp/>Harrison</highlight></codeline>
<codeline><highlight class="normal">*<sp/>–î–º–∏—Ç—Ä–∏–µ–≤<sp/>–ò–≤–∞–Ω<sp/>(Ivan<sp/>Dmitriev)</highlight></codeline>
<codeline><highlight class="normal">*<sp/>IT_GAP</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Sergeev<sp/>Andrey</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Steven<sp/>J<sp/>Mixon</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Roland<sp/>Fath</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Justin<sp/>Parker</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Costas<sp/>Menico</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Mathieu-Philippe<sp/>Bourgeois</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Ryan<sp/>McKillop</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Chris<sp/>Clarke</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Ngan<sp/>Ting<sp/>On</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Eli<sp/>Argon</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Seregin<sp/>Andrew</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Marek<sp/>Toman</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Diji<sp/>Enterprises</highlight></codeline>
<codeline><highlight class="normal">*<sp/>uonick</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Kamil<sp/>Kiblis</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Mars<sp/>Yau</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Martin<sp/>Latinov</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Malikov<sp/>Evgene</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Andres<sp/>Espinoza<sp/>Arce</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Matthew<sp/>Williamson</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Andrew<sp/>Brookes</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Steve<sp/>Cove</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Steven<sp/>Witten</highlight></codeline>
<codeline><highlight class="normal">*<sp/>Silvan<sp/>Seeholzer</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Special<sp/>thanks<sp/>to<sp/>the<sp/>selfless<sp/>others<sp/>who<sp/>expressed<sp/>their<sp/>desire<sp/>to<sp/>remain<sp/>anonymous,<sp/>yet<sp/>share<sp/>their<sp/>time,<sp/>contribute<sp/>code,<sp/>send<sp/>donations,<sp/>promote<sp/>the<sp/>framework<sp/>to<sp/>a<sp/>wider<sp/>audience,<sp/>as<sp/>well<sp/>as<sp/>provide<sp/>encouragement<sp/>and<sp/>regular<sp/>financial<sp/>assistance.<sp/>Their<sp/>generosity<sp/>is<sp/>F3&apos;s<sp/>prime<sp/>motivation.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">[![Paypal](ui/images/paypal.png)](https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=MJSQL8N5LPDAY)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">![Bitcoin](ui/images/bitcoin.png)</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">###<sp/>Legal<sp/>notice</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">By<sp/>making<sp/>a<sp/>donation<sp/>to<sp/>this<sp/>project<sp/>you<sp/>signify<sp/>that<sp/>you<sp/>acknowledged,<sp/>understood,<sp/>accepted,<sp/>and<sp/>agreed<sp/>to<sp/>the<sp/>terms<sp/>and<sp/>conditions<sp/>contained<sp/>in<sp/>this<sp/>notice.<sp/>Your<sp/>donation<sp/>to<sp/>the<sp/>Fat-Free<sp/>Framework<sp/>project<sp/>is<sp/>voluntary<sp/>and<sp/>is<sp/>not<sp/>a<sp/>fee<sp/>for<sp/>any<sp/>services,<sp/>goods,<sp/>or<sp/>advantages,<sp/>and<sp/>making<sp/>a<sp/>donation<sp/>to<sp/>the<sp/>project<sp/>does<sp/>not<sp/>entitle<sp/>you<sp/>to<sp/>any<sp/>services,<sp/>goods,<sp/>or<sp/>advantages.<sp/>We<sp/>have<sp/>the<sp/>right<sp/>to<sp/>use<sp/>the<sp/>money<sp/>you<sp/>donate<sp/>to<sp/>the<sp/>Fat-Free<sp/>Framework<sp/>project<sp/>in<sp/>any<sp/>lawful<sp/>way<sp/>and<sp/>for<sp/>any<sp/>lawful<sp/>purpose<sp/>we<sp/>see<sp/>fit<sp/>and<sp/>we<sp/>are<sp/>not<sp/>obligated<sp/>to<sp/>disclose<sp/>the<sp/>way<sp/>and<sp/>purpose<sp/>to<sp/>any<sp/>party<sp/>unless<sp/>required<sp/>by<sp/>applicable<sp/>law.<sp/>Although<sp/>Fat-Free<sp/>Framework<sp/>is<sp/>free<sp/>software,<sp/>to<sp/>our<sp/>best<sp/>knowledge<sp/>this<sp/>project<sp/>does<sp/>not<sp/>have<sp/>any<sp/>tax-exempt<sp/>status.<sp/>The<sp/>Fat-Free<sp/>Framework<sp/>project<sp/>is<sp/>neither<sp/>a<sp/>registered<sp/>non-profit<sp/>corporation<sp/>nor<sp/>a<sp/>registered<sp/>charity<sp/>in<sp/>any<sp/>country.<sp/>Your<sp/>donation<sp/>may<sp/>or<sp/>may<sp/>not<sp/>be<sp/>tax-deductible;<sp/>please<sp/>consult<sp/>this<sp/>with<sp/>your<sp/>tax<sp/>advisor.<sp/>We<sp/>will<sp/>not<sp/>publish/disclose<sp/>your<sp/>name<sp/>and<sp/>e-mail<sp/>address<sp/>without<sp/>your<sp/>consent,<sp/>unless<sp/>required<sp/>by<sp/>applicable<sp/>law.<sp/>Your<sp/>donation<sp/>is<sp/>non-refundable.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">**Copyright<sp/>(c)<sp/>2009-2014<sp/>F3::Factory/Bong<sp/>Cosca<sp/>&amp;lt;bong&amp;#46;cosca&amp;#64;yahoo&amp;#46;com&amp;gt;**</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">[![githalytics.com<sp/>alpha](https://cruel-carlota.pagodabox.com/a0b5e3f40092429070b6647a2e5ca6ab<sp/>&quot;githalytics.com&quot;)](http://githalytics.com/bcosca/fatfree)</highlight></codeline>
    </programlisting>
    <location file="/Users/aplennevaux/GITHUB/Visionary-website/src/vendor/bcosca/fatfree/readme.md"/>
  </compounddef>
</doxygen>
